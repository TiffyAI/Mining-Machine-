(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var hn;(function(t){t.NUMBER="NUMBER_NUMBER",t.HEX="NUMBER_HEX",t.STR="NUMBER_STR",t.BIGINT="NUMBER_BIGINT"})(hn||(hn={}));var _r;(function(t){t.HEX="BYTES_HEX",t.UINT8ARRAY="BYTES_UINT8ARRAY"})(_r||(_r={}));const At={number:hn.BIGINT,bytes:_r.HEX},oe={number:hn.HEX,bytes:_r.HEX};var br;(function(t){t.EARLIEST="earliest",t.LATEST="latest",t.PENDING="pending",t.SAFE="safe",t.FINALIZED="finalized",t.COMMITTED="committed"})(br||(br={}));var Lo;(function(t){t.chainstart="chainstart",t.frontier="frontier",t.homestead="homestead",t.dao="dao",t.tangerineWhistle="tangerineWhistle",t.spuriousDragon="spuriousDragon",t.byzantium="byzantium",t.constantinople="constantinople",t.petersburg="petersburg",t.istanbul="istanbul",t.muirGlacier="muirGlacier",t.berlin="berlin",t.london="london",t.altair="altair",t.arrowGlacier="arrowGlacier",t.grayGlacier="grayGlacier",t.bellatrix="bellatrix",t.merge="merge",t.capella="capella",t.shanghai="shanghai"})(Lo||(Lo={}));const If=Object.getPrototypeOf(Uint8Array);var mg=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const yg=Symbol.for("web3/base-provider");class ka{static isWeb3Provider(e){return e instanceof ka||!!(e&&e[yg])}get[yg](){return!0}send(e,n){this.request(e).then(r=>{n(null,r)}).catch(r=>{n(r)})}sendAsync(e){return mg(this,void 0,void 0,function*(){return this.request(e)})}asEIP1193Provider(){const e=Object.create(this),n=e.request;return e.request=function(i){return mg(this,void 0,void 0,function*(){return(yield n(i)).result})},e.asEIP1193Provider=void 0,e}}class hA extends Array{constructor(e){super(),this._accountProvider=e}}const fA=100,pA=101,gA=201,mA=202,yA=203,bA=204,wA=205,vA=206,EA=207,_A=208,AA=300,xA=301,IA=310,SA=311,TA=400,RA=402,BA=405,PA=407,kA=408,OA=410,CA=411,DA=412,NA=413,MA=414,LA=415,$A=416,UA=417,FA=418,jA=419,qA=420,HA=421,zA=422,GA=423,VA=424,KA=425,WA=426,QA=427,ZA=428,JA=429,YA=430,XA=431,e2=432,t2=433,n2=434,r2=435,i2=436,s2=437,o2=438,a2=439,c2=440,u2=441,l2=500,d2=503,h2=505,f2=506,p2=507,g2=600,m2=602,y2=603,b2=604,w2=701,v2=702,E2=703,_2=704,A2=705,x2=706,I2=707,S2=709,T2=801,R2=802,B2=4001,P2=4100,k2=4200,O2=4900,C2=4901,D2=902,N2=903,M2=1001,L2=1002,$2=1003,U2=1004,F2=1005,j2=1006,q2=1008,H2=1009,z2=1010,G2=1011,V2=1012,K2=1014,W2=1015,Q2=1100,_b=1101,Z2=1200,Fc=-32700,jc=-32600,qc=-32601,Hc=-32602,zc=-32603,Gc=-32e3,Vc=-32001,Kc=-32002,Wc=-32003,Qc=-32004,Zc=-32005,Jc=-32006;class ie extends Error{get innerError(){return this.cause instanceof $o?this.cause.errors:this.cause}set innerError(e){Array.isArray(e)?this.cause=new $o(e):this.cause=e}constructor(e,n){super(e),Array.isArray(n)?this.cause=new $o(n):this.cause=n,this.name=this.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(new.target.constructor):this.stack=new Error().stack}static convertToString(e,n=!1){if(e==null)return"undefined";const r=JSON.stringify(e,(i,s)=>typeof s=="bigint"?s.toString():s);return n&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause,innerError:this.cause}}}class $o extends ie{constructor(e){super(`Multiple errors occurred: [${e.map(n=>n.message).join("], [")}]`),this.code=_A,this.errors=e}}class fe extends ie{constructor(e,n){super(`Invalid value given "${ie.convertToString(e,!0)}". Error: ${n}.`),this.name=this.constructor.name}}class bg extends ie{constructor(){super("Private key must be 32 bytes."),this.code=w2}}class J2 extends ie{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=v2}}class Y2 extends ie{constructor(e){super(`"${e}"`),this.code=R2}}class Ab extends ie{constructor(){super("Invalid key derivation function"),this.code=E2}}class X2 extends ie{constructor(){super("Key derivation failed - possibly wrong password"),this.code=_2}}class ex extends ie{constructor(){super("Unsupported key store version"),this.code=A2}}class tx extends ie{constructor(){super("Password cannot be empty"),this.code=x2}}class nx extends ie{constructor(){super("Initialization vector must be 16 bytes"),this.code=I2}}class rx extends ie{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=S2}}class Oa extends ie{constructor(e,n){super(e),this.code=l2,n&&(this.errorCode=n.code,this.errorReason=n.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class Jd extends Oa{constructor(e){super("Connection not open",e),this.code=d2}}class ix extends Oa{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=h2}}class sx extends Oa{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=f2}}class ox extends Oa{constructor(e){super(`Request already sent with following id: ${e}`),this.code=p2}}class xt extends ie{constructor(e,n){super(e),this.code=AA,this.receipt=n}}class wg extends ie{constructor(e,n){super(`The resolver at ${e} does not implement requested method: "${n}".`),this.address=e,this.name=n,this.code=xA}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class Zu extends xt{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,typeof e.data=="object"){let n;e.data&&"originalError"in e.data?n=e.data.originalError:n=e.data,this.data=n.data,this.cause=new Zu(n)}else this.data=e.data}setDecodedProperties(e,n,r){this.errorName=e,this.errorSignature=n,this.errorArgs=r}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class ki extends xt{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=IA,this.cause=new Zu(e)}}class ax extends fe{constructor(e){var n,r;super(`data: ${(n=e.data)!==null&&n!==void 0?n:"undefined"}, input: ${(r=e.input)!==null&&r!==void 0?r:"undefined"}`,`You can't have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.`),this.code=SA}}class cx extends ie{constructor(e){super(`ENS is not supported on network ${e}`),this.code=D2}}class ux extends ie{constructor(){super("Network not synced"),this.code=N2}}class vg extends ie{constructor(e){super(`Invalid parameters passed. "${typeof e<"u"?e:""}"`),this.hint=e,this.code=EA}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class Yd extends ie{constructor(){super(...arguments),this.code=gA}}class er extends ie{constructor(){super("The method you're trying to call is not implemented."),this.code=mA}}class xb extends ie{constructor(){super(...arguments),this.code=yA}}class lx extends ie{constructor(){super(...arguments),this.code=bA}}class ge extends ie{constructor(e,n){super(e),this.code=wA,this.props=n??{}}}class dx extends ie{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=vA}}class vc extends ie{constructor(){super(...arguments),this.code=g2}}class Xd extends ie{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=m2}}class pr extends ie{constructor(){super(...arguments),this.code=y2}}class hx extends ie{constructor(){super(...arguments),this.code=b2}}class fx extends fe{constructor(){super(...arguments),this.code=T2}}class Sf extends ie{constructor(e,n){super(e),this.receipt=n,this.code=TA}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class Yc extends ie{constructor(e,n,r,i){super(`Transaction has been reverted by the EVM${r===void 0?"":`:
 ${ie.convertToString(r)}`}`),this.reason=e,this.signature=n,this.receipt=r,this.data=i,this.code=RA}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class Ib extends Yc{constructor(e,n,r,i,s,o,a){super(e),this.reason=e,this.customErrorName=n,this.customErrorDecodedSignature=r,this.customErrorArguments=i,this.signature=s,this.receipt=o,this.data=a,this.code=o2}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class Sb extends Sf{constructor(e){super(`Transaction has been reverted by the EVM${e===void 0?"":`:
 ${ie.convertToString(e)}`}`,e),this.code=BA}}class px extends Sf{constructor(){super("Raw transaction undefined"),this.code=PA}}class Eg extends Sf{constructor(){super("Transaction not found"),this.code=YA}}class gx extends fe{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=kA}}class mx extends fe{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=s2}}class yx extends fe{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=OA}}class bx extends fe{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=CA}}class wx extends fe{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=DA}}class vx extends fe{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=r2}}class Ex extends fe{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=i2}}class _x extends fe{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=NA}}class Ax extends fe{constructor(e){var n,r;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${(n=e.chain)!==null&&n!==void 0?n:"undefined"}, "hardfork": ${(r=e.hardfork)!==null&&r!==void 0?r:"undefined"}`),this.code=MA}}class xx extends ie{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=c2}}class Ix extends fe{constructor(e){var n,r,i,s;super(`gas: ${(n=e.gas)!==null&&n!==void 0?n:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}, maxPriorityFeePerGas: ${(i=e.maxPriorityFeePerGas)!==null&&i!==void 0?i:"undefined"}, maxFeePerGas: ${(s=e.maxFeePerGas)!==null&&s!==void 0?s:"undefined"}`,'"gas" is missing'),this.code=LA,this.cause=new xx}}class Sx extends ie{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=u2}}class Tx extends fe{constructor(e){var n,r,i,s;super(`gas: ${(n=e.gas)!==null&&n!==void 0?n:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}, maxPriorityFeePerGas: ${(i=e.maxPriorityFeePerGas)!==null&&i!==void 0?i:"undefined"}, maxFeePerGas: ${(s=e.maxFeePerGas)!==null&&s!==void 0?s:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=n2,this.cause=new Sx}}class Rx extends fe{constructor(e){var n,r;super(`gas: ${(n=e.gas)!==null&&n!==void 0?n:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=$A}}class Bx extends fe{constructor(e){var n,r;super(`maxPriorityFeePerGas: ${(n=e.maxPriorityFeePerGas)!==null&&n!==void 0?n:"undefined"}, maxFeePerGas: ${(r=e.maxFeePerGas)!==null&&r!==void 0?r:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=UA}}class Px extends fe{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=FA}}class Tb extends fe{constructor(e){var n,r;super(`maxPriorityFeePerGas: ${(n=e.maxPriorityFeePerGas)!==null&&n!==void 0?n:"undefined"}, maxFeePerGas: ${(r=e.maxFeePerGas)!==null&&r!==void 0?r:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=jA}}class kx extends fe{constructor(e){super(e,"invalid transaction object"),this.code=qA}}class Ox extends fe{constructor(e){var n,r;super(`nonce: ${(n=e.nonce)!==null&&n!==void 0?n:"undefined"}, chainId: ${(r=e.chainId)!==null&&r!==void 0?r:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=HA}}class Cx extends fe{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=zA}}class Dx extends fe{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=GA}}class _g extends fe{constructor(e){super(e,"unsupported transaction type"),this.code=VA}}class Rb extends fe{constructor(e){var n,r;super(`data: ${(n=e.data)!==null&&n!==void 0?n:"undefined"}, input: ${(r=e.input)!==null&&r!==void 0?r:"undefined"}`,`You can't have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.`),this.code=KA}}class Nx extends ie{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!
	Transaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=XA}}function Bb(t){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!
	Transaction Hash: ${t?t.toString():"not available"}`}class Pb extends ie{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${Bb(e.transactionHash)}`),this.code=WA}}class kb extends ie{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${Bb(e.transactionHash)}`),this.code=e2}}class Mx extends fe{constructor(e){var n,r;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${(n=e.blockHash)===null||n===void 0?void 0:n.toString()}, transactionHash: ${(r=e.transactionHash)===null||r===void 0?void 0:r.toString()}`,"Receipt missing or blockHash null"),this.code=QA}}class Lx extends fe{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=ZA}}class eh extends ie{constructor(e){super(`Invalid signature. "${e}"`),this.code=t2}}class Ag extends fe{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=JA}}class $x extends ie{constructor(e,n){const r=[];e.forEach(i=>r.push(i.keyword)),super(`The following properties are invalid for the transaction type ${n}: ${r.join(", ")}`),this.code=a2}}class As extends fe{constructor(e){super(e,"can not parse as byte data"),this.code=L2}}class Tf extends fe{constructor(e){super(e,"can not parse as number data"),this.code=$2}}class Rf extends fe{constructor(e){super(e,"invalid ethereum address"),this.code=F2}}class Ux extends fe{constructor(e){super(e,"not a valid string"),this.code=M2}}class Ob extends fe{constructor(e){super(e,"invalid unit"),this.code=U2}}class Cb extends fe{constructor(e){super(e,"not a valid unit. Must be a positive integer"),this.code=W2}}class Fx extends fe{constructor(e){super(e,"can not be converted to hex"),this.code=j2}}class Db extends fe{constructor(e){super(e,"value greater than the nibble width"),this.code=K2}}class Bf extends fe{constructor(e){super(e,"not a valid boolean."),this.code=q2}}class jx extends fe{constructor(e){super(e,"not a valid unsigned integer."),this.code=H2}}class xg extends fe{constructor(e){super(e,"invalid size given."),this.code=z2}}class Ig extends fe{constructor(e){super(e,"value is larger than size."),this.code=G2}}class qx extends fe{constructor(e){super(e,"invalid string given"),this.code=V2}}const Hx=t=>!Array.isArray(t)&&t.jsonrpc==="2.0"&&!!t&&(t.result===void 0||t.result===null)&&"error"in t&&(typeof t.id=="number"||typeof t.id=="string"),Sg=t=>Hx(t)?t.error.message:"";class zn extends ie{constructor(e,n,r,i){var s;super(n??`Returned error: ${Array.isArray(e)?e.map(a=>Sg(a)).join(","):Sg(e)}`),this.code=fA,n||(this.data=Array.isArray(e)?e.map(a=>{var u;return(u=a.error)===null||u===void 0?void 0:u.data}):(s=e?.error)===null||s===void 0?void 0:s.data),this.statusCode=i,this.request=r;let o;"error"in e?o=e.error:e instanceof Array&&(o=e.filter(a=>a.error).map(a=>a.error)),Array.isArray(o)&&o.length>0?this.cause=new $o(o):this.cause=o}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request,statusCode:this.statusCode})}}class Ju extends zn{constructor(e,n){super(e,void 0,n),this.code=pA;let r;"error"in e?r=e.error:e instanceof Array&&(r=e.map(i=>i.error)),Array.isArray(r)?this.cause=new $o(r):this.cause=r}}class Tg extends ie{constructor(e,n){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${n}`),this.code=_b}}class Rg extends ie{constructor(e,n){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${n}`),this.code=_b}}const Nb="An Rpc error has occured with a code of *code*",vt={[Fc]:{message:"Parse error",description:"Invalid JSON"},[jc]:{message:"Invalid request",description:"JSON is not a valid request object	"},[qc]:{message:"Method not found",description:"Method does not exist	"},[Hc]:{message:"Invalid params",description:"Invalid method parameters"},[zc]:{message:"Internal error",description:"Internal JSON-RPC error"},[Gc]:{message:"Invalid input",description:"Missing or invalid parameters"},[Vc]:{message:"Resource not found",description:"Requested resource not found"},[Kc]:{message:"Resource unavailable",description:"Requested resource not available"},[Wc]:{message:"Transaction rejected",description:"Transaction creation failed"},[Qc]:{message:"Method not supported",description:"Method is not implemented"},[Zc]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[Jc]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[B2]:{name:"User Rejected Request",message:"The user rejected the request."},[P2]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[k2]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[O2]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[C2]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class en extends ie{constructor(e,n){super(n??Nb.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class zx extends ie{constructor(e,n){var r,i,s,o;if(!e)super();else if(!((r=vt[e])===null||r===void 0)&&r.message)super(vt[e].message);else{const a=Object.keys(vt).find(u=>typeof u=="string"&&e>=parseInt(u.split("-")[0],10)&&e<=parseInt(u.split("-")[1],10));super((s=(i=vt[a??""])===null||i===void 0?void 0:i.message)!==null&&s!==void 0?s:Nb.replace("*code*",(o=e?.toString())!==null&&o!==void 0?o:'""'))}this.code=e,this.data=n}}class Gx extends en{constructor(e){super(e,vt[Fc].message),this.code=Fc}}class Vx extends en{constructor(e){super(e,vt[jc].message),this.code=jc}}class Kx extends en{constructor(e){super(e,vt[qc].message),this.code=qc}}class Wx extends en{constructor(e){super(e,vt[Hc].message),this.code=Hc}}class Qx extends en{constructor(e){super(e,vt[zc].message),this.code=zc}}class Zx extends en{constructor(e){super(e,vt[Gc].message),this.code=Gc}}class Jx extends en{constructor(e){super(e,vt[Qc].message),this.code=Qc}}class Yx extends en{constructor(e){super(e,vt[Kc].message),this.code=Kc}}class Xx extends en{constructor(e){super(e,vt[Vc].message),this.code=Vc}}class eI extends en{constructor(e){super(e,vt[Jc].message),this.code=Jc}}class tI extends en{constructor(e){super(e,vt[Wc].message),this.code=Wc}}class nI extends en{constructor(e){super(e,vt[Zc].message),this.code=Zc}}const Tt=new Map;Tt.set(Fc,{error:Gx});Tt.set(jc,{error:Vx});Tt.set(qc,{error:Kx});Tt.set(Hc,{error:Wx});Tt.set(zc,{error:Qx});Tt.set(Gc,{error:Zx});Tt.set(Qc,{error:Jx});Tt.set(Kc,{error:Yx});Tt.set(Wc,{error:tI});Tt.set(Vc,{error:Xx});Tt.set(Jc,{error:eI});Tt.set(Zc,{error:nI});class rI extends ie{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=Z2}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}function Ut(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function iI(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function sI(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Js(t,...e){if(!sI(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Pf(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ut(t.outputLen),Ut(t.blockLen)}function $i(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function kf(t,e){Js(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Mb={number:Ut,bool:iI,bytes:Js,hash:Pf,exists:$i,output:kf},Xa=BigInt(2**32-1),Bg=BigInt(32);function oI(t,e=!1){return e?{h:Number(t&Xa),l:Number(t>>Bg&Xa)}:{h:Number(t>>Bg&Xa)|0,l:Number(t&Xa)|0}}function aI(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=oI(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const cI=(t,e,n)=>t<<n|e>>>32-n,uI=(t,e,n)=>e<<n|t>>>32-n,lI=(t,e,n)=>e<<n-32|t>>>64-n,dI=(t,e,n)=>t<<n-32|e>>>64-n,Ec=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _c=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Ac=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Cn=(t,e)=>t<<32-e|t>>>e,Ee=(t,e)=>t<<e|t>>>32-e>>>0,Xc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,hI=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function eu(t){for(let e=0;e<t.length;e++)t[e]=hI(t[e])}function Bs(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ps(t){return typeof t=="string"&&(t=Bs(t)),Js(t),t}function tu(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Js(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let Of=class{clone(){return this._cloneInto()}};const fI={}.toString;function Lb(t,e){if(e!==void 0&&fI.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function $b(t){const e=r=>t().update(Ps(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ub(t=32){if(Ec&&typeof Ec.getRandomValues=="function")return Ec.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}const Fb=[],jb=[],qb=[],pI=BigInt(0),ho=BigInt(1),gI=BigInt(2),mI=BigInt(7),yI=BigInt(256),bI=BigInt(113);for(let t=0,e=ho,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Fb.push(2*(5*r+n)),jb.push((t+1)*(t+2)/2%64);let i=pI;for(let s=0;s<7;s++)e=(e<<ho^(e>>mI)*bI)%yI,e&gI&&(i^=ho<<(ho<<BigInt(s))-ho);qb.push(i)}const[wI,vI]=aI(qb,!0),Pg=(t,e,n)=>n>32?lI(t,e,n):cI(t,e,n),kg=(t,e,n)=>n>32?dI(t,e,n):uI(t,e,n);function EI(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,l=n[u],c=n[u+1],d=Pg(l,c,1)^n[a],h=kg(l,c,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=jb[o],u=Pg(i,s,a),l=kg(i,s,a),c=Fb[o];i=t[c],s=t[c+1],t[c]=u,t[c+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=wI[r],t[1]^=vI[r]}n.fill(0)}let _I=class Hb extends Of{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ut(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=_c(this.state)}keccak(){Xc||eu(this.state32),EI(this.state32,this.rounds),Xc||eu(this.state32),this.posOut=0,this.pos=0}update(e){$i(this);const{blockLen:n,state:r}=this;e=Ps(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){$i(this,!1),Js(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ut(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(kf(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Hb(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const AI=(t,e,n)=>$b(()=>new _I(e,t,n)),Og=AI(1,136,256/8),nu=Mb.bytes;function zb(t){if(!(t instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof t}`);return new TextDecoder().decode(t)}function xI(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function II(t){return e=>(Mb.bytes(e),t(e))}(()=>{const t=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,e=typeof module<"u"&&typeof module.require=="function"&&module.require.bind(module);return{node:e&&!t?e("crypto"):void 0,web:t}})();const _t=(()=>{const t=II(Og);return t.create=Og.create,t})();var ve;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ve||(ve={}));var th;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(th||(th={}));const J=ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gr=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return Number.isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},j=ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),SI=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Jt extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,u=0;for(;u<o.path.length;){const l=o.path[u];u===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],u++}}};return i(this),r}static assert(e){if(!(e instanceof Jt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Jt.create=t=>new Jt(t);const ks=(t,e)=>{let n;switch(t.code){case j.invalid_type:t.received===J.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case j.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ve.jsonStringifyReplacer)}`;break;case j.unrecognized_keys:n=`Unrecognized key(s) in object: ${ve.joinValues(t.keys,", ")}`;break;case j.invalid_union:n="Invalid input";break;case j.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ve.joinValues(t.options)}`;break;case j.invalid_enum_value:n=`Invalid enum value. Expected ${ve.joinValues(t.options)}, received '${t.received}'`;break;case j.invalid_arguments:n="Invalid function arguments";break;case j.invalid_return_type:n="Invalid function return type";break;case j.invalid_date:n="Invalid date";break;case j.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ve.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case j.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case j.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case j.custom:n="Invalid input";break;case j.invalid_intersection_types:n="Intersection results could not be merged";break;case j.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case j.not_finite:n="Number must be finite";break;default:n=e.defaultError,ve.assertNever(t)}return{message:n}};let Gb=ks;function TI(t){Gb=t}function ru(){return Gb}const iu=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const u=r.filter(l=>!!l).slice().reverse();for(const l of u)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},RI=[];function K(t,e){const n=ru(),r=iu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===ks?void 0:ks].filter(i=>!!i)});t.common.issues.push(r)}class Et{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ne;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Et.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return ne;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const ne=Object.freeze({status:"aborted"}),Es=t=>({status:"dirty",value:t}),Rt=t=>({status:"valid",value:t}),nh=t=>t.status==="aborted",rh=t=>t.status==="dirty",Ui=t=>t.status==="valid",Jo=t=>typeof Promise<"u"&&t instanceof Promise;var Y;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Y||(Y={}));class Qn{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Cg=(t,e)=>{if(Ui(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Jt(t.common.issues);return this._error=n,this._error}}};function ue(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:u??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:u??n??a.defaultError}},description:i}}class de{get description(){return this._def.description}_getType(e){return gr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:gr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Et,ctx:{common:e.parent.common,data:e.data,parsedType:gr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Jo(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gr(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Cg(r,i)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gr(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return Ui(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>Ui(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gr(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Jo(i)?i:Promise.resolve(i));return Cg(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:j.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Pn({schema:this,typeName:re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Wn.create(this,this._def)}nullable(){return ni.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Rn.create(this)}promise(){return Cs.create(this,this._def)}or(e){return ta.create([this,e],this._def)}and(e){return na.create(this,e,this._def)}transform(e){return new Pn({...ue(this._def),schema:this,typeName:re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new aa({...ue(this._def),innerType:this,defaultValue:n,typeName:re.ZodDefault})}brand(){return new Cf({typeName:re.ZodBranded,type:this,...ue(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ca({...ue(this._def),innerType:this,catchValue:n,typeName:re.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Ca.create(this,e)}readonly(){return ua.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const BI=/^c[^\s-]{8,}$/i,PI=/^[0-9a-z]+$/,kI=/^[0-9A-HJKMNP-TV-Z]{26}$/i,OI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CI=/^[a-z0-9_-]{21}$/i,DI=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,NI=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MI=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,LI="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ul;const $I=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,UI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,FI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qI=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,HI=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Vb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zI=new RegExp(`^${Vb}$`);function Kb(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function GI(t){return new RegExp(`^${Kb(t)}$`)}function Wb(t){let e=`${Vb}T${Kb(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function VI(t,e){return!!((e==="v4"||!e)&&$I.test(t)||(e==="v6"||!e)&&FI.test(t))}function KI(t,e){if(!DI.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function WI(t,e){return!!((e==="v4"||!e)&&UI.test(t)||(e==="v6"||!e)&&jI.test(t))}class Sn extends de{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const s=this._getOrReturnCtx(e);return K(s,{code:j.invalid_type,expected:J.string,received:s.parsedType}),ne}const r=new Et;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),K(i,{code:j.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),K(i,{code:j.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?K(i,{code:j.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&K(i,{code:j.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")MI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"email",code:j.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Ul||(Ul=new RegExp(LI,"u")),Ul.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"emoji",code:j.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")OI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"uuid",code:j.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")CI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"nanoid",code:j.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")BI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"cuid",code:j.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")PI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"cuid2",code:j.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")kI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"ulid",code:j.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),K(i,{validation:"url",code:j.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"regex",code:j.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),K(i,{code:j.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),K(i,{code:j.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),K(i,{code:j.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?Wb(s).test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{code:j.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?zI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{code:j.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?GI(s).test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{code:j.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?NI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"duration",code:j.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?VI(e.data,s.version)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"ip",code:j.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?KI(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"jwt",code:j.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?WI(e.data,s.version)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"cidr",code:j.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?qI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"base64",code:j.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?HI.test(e.data)||(i=this._getOrReturnCtx(e,i),K(i,{validation:"base64url",code:j.invalid_string,message:s.message}),r.dirty()):ve.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:j.invalid_string,...Y.errToObj(r)})}_addCheck(e){return new Sn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Y.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Y.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Y.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Y.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Y.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Y.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Y.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Y.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Y.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Y.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Y.errToObj(n)})}nonempty(e){return this.min(1,Y.errToObj(e))}trim(){return new Sn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Sn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Sn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Sn.create=t=>new Sn({checks:[],typeName:re.ZodString,coerce:t?.coerce??!1,...ue(t)});function QI(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class Xr extends de{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const s=this._getOrReturnCtx(e);return K(s,{code:j.invalid_type,expected:J.number,received:s.parsedType}),ne}let r;const i=new Et;for(const s of this._def.checks)s.kind==="int"?ve.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),K(r,{code:j.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),K(r,{code:j.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),K(r,{code:j.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?QI(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),K(r,{code:j.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),K(r,{code:j.not_finite,message:s.message}),i.dirty()):ve.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Y.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Y.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Y.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Y.toString(n))}setLimit(e,n,r,i){return new Xr({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Y.toString(i)}]})}_addCheck(e){return new Xr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ve.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Xr.create=t=>new Xr({checks:[],typeName:re.ZodNumber,coerce:t?.coerce||!1,...ue(t)});class ei extends de{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==J.bigint)return this._getInvalidInput(e);let r;const i=new Et;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),K(r,{code:j.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),K(r,{code:j.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),K(r,{code:j.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ve.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return K(n,{code:j.invalid_type,expected:J.bigint,received:n.parsedType}),ne}gte(e,n){return this.setLimit("min",e,!0,Y.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Y.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Y.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Y.toString(n))}setLimit(e,n,r,i){return new ei({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Y.toString(i)}]})}_addCheck(e){return new ei({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ei.create=t=>new ei({checks:[],typeName:re.ZodBigInt,coerce:t?.coerce??!1,...ue(t)});class Yo extends de{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const r=this._getOrReturnCtx(e);return K(r,{code:j.invalid_type,expected:J.boolean,received:r.parsedType}),ne}return Rt(e.data)}}Yo.create=t=>new Yo({typeName:re.ZodBoolean,coerce:t?.coerce||!1,...ue(t)});class Fi extends de{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const s=this._getOrReturnCtx(e);return K(s,{code:j.invalid_type,expected:J.date,received:s.parsedType}),ne}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return K(s,{code:j.invalid_date}),ne}const r=new Et;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),K(i,{code:j.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),K(i,{code:j.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ve.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Fi({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Y.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Y.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Fi.create=t=>new Fi({checks:[],coerce:t?.coerce||!1,typeName:re.ZodDate,...ue(t)});class su extends de{_parse(e){if(this._getType(e)!==J.symbol){const r=this._getOrReturnCtx(e);return K(r,{code:j.invalid_type,expected:J.symbol,received:r.parsedType}),ne}return Rt(e.data)}}su.create=t=>new su({typeName:re.ZodSymbol,...ue(t)});class Xo extends de{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return K(r,{code:j.invalid_type,expected:J.undefined,received:r.parsedType}),ne}return Rt(e.data)}}Xo.create=t=>new Xo({typeName:re.ZodUndefined,...ue(t)});class ea extends de{_parse(e){if(this._getType(e)!==J.null){const r=this._getOrReturnCtx(e);return K(r,{code:j.invalid_type,expected:J.null,received:r.parsedType}),ne}return Rt(e.data)}}ea.create=t=>new ea({typeName:re.ZodNull,...ue(t)});class Os extends de{constructor(){super(...arguments),this._any=!0}_parse(e){return Rt(e.data)}}Os.create=t=>new Os({typeName:re.ZodAny,...ue(t)});class Oi extends de{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Rt(e.data)}}Oi.create=t=>new Oi({typeName:re.ZodUnknown,...ue(t)});class Ar extends de{_parse(e){const n=this._getOrReturnCtx(e);return K(n,{code:j.invalid_type,expected:J.never,received:n.parsedType}),ne}}Ar.create=t=>new Ar({typeName:re.ZodNever,...ue(t)});class ou extends de{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return K(r,{code:j.invalid_type,expected:J.void,received:r.parsedType}),ne}return Rt(e.data)}}ou.create=t=>new ou({typeName:re.ZodVoid,...ue(t)});class Rn extends de{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==J.array)return K(n,{code:j.invalid_type,expected:J.array,received:n.parsedType}),ne;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(K(n,{code:o?j.too_big:j.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(K(n,{code:j.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(K(n,{code:j.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new Qn(n,o,n.path,a)))).then(o=>Et.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new Qn(n,o,n.path,a)));return Et.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Rn({...this._def,minLength:{value:e,message:Y.toString(n)}})}max(e,n){return new Rn({...this._def,maxLength:{value:e,message:Y.toString(n)}})}length(e,n){return new Rn({...this._def,exactLength:{value:e,message:Y.toString(n)}})}nonempty(e){return this.min(1,e)}}Rn.create=(t,e)=>new Rn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:re.ZodArray,...ue(e)});function ms(t){if(t instanceof Ue){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Wn.create(ms(r))}return new Ue({...t._def,shape:()=>e})}else return t instanceof Rn?new Rn({...t._def,type:ms(t.element)}):t instanceof Wn?Wn.create(ms(t.unwrap())):t instanceof ni?ni.create(ms(t.unwrap())):t instanceof Zn?Zn.create(t.items.map(e=>ms(e))):t}class Ue extends de{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ve.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==J.object){const l=this._getOrReturnCtx(e);return K(l,{code:j.invalid_type,expected:J.object,received:l.parsedType}),ne}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ar&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const u=[];for(const l of o){const c=s[l],d=i.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new Qn(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Ar){const l=this._def.unknownKeys;if(l==="passthrough")for(const c of a)u.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(l==="strict")a.length>0&&(K(i,{code:j.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const c of a){const d=i.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new Qn(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const c of u){const d=await c.key,h=await c.value;l.push({key:d,value:h,alwaysSet:c.alwaysSet})}return l}).then(l=>Et.mergeObjectSync(r,l)):Et.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Y.errToObj,new Ue({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const i=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:Y.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Ue({...this._def,unknownKeys:"strip"})}passthrough(){return new Ue({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ue({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ue({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:re.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ue({...this._def,catchall:e})}pick(e){const n={};for(const r of ve.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Ue({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ve.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Ue({...this._def,shape:()=>n})}deepPartial(){return ms(this)}partial(e){const n={};for(const r of ve.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Ue({...this._def,shape:()=>n})}required(e){const n={};for(const r of ve.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Wn;)s=s._def.innerType;n[r]=s}return new Ue({...this._def,shape:()=>n})}keyof(){return Qb(ve.objectKeys(this.shape))}}Ue.create=(t,e)=>new Ue({shape:()=>t,unknownKeys:"strip",catchall:Ar.create(),typeName:re.ZodObject,...ue(e)});Ue.strictCreate=(t,e)=>new Ue({shape:()=>t,unknownKeys:"strict",catchall:Ar.create(),typeName:re.ZodObject,...ue(e)});Ue.lazycreate=(t,e)=>new Ue({shape:t,unknownKeys:"strip",catchall:Ar.create(),typeName:re.ZodObject,...ue(e)});class ta extends de{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Jt(a.ctx.common.issues));return K(n,{code:j.invalid_union,unionErrors:o}),ne}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const l={...n,common:{...n.common,issues:[]},parent:null},c=u._parseSync({data:n.data,path:n.path,parent:l});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(u=>new Jt(u));return K(n,{code:j.invalid_union,unionErrors:a}),ne}}get options(){return this._def.options}}ta.create=(t,e)=>new ta({options:t,typeName:re.ZodUnion,...ue(e)});const dr=t=>t instanceof ia?dr(t.schema):t instanceof Pn?dr(t.innerType()):t instanceof sa?[t.value]:t instanceof ti?t.options:t instanceof oa?ve.objectValues(t.enum):t instanceof aa?dr(t._def.innerType):t instanceof Xo?[void 0]:t instanceof ea?[null]:t instanceof Wn?[void 0,...dr(t.unwrap())]:t instanceof ni?[null,...dr(t.unwrap())]:t instanceof Cf||t instanceof ua?dr(t.unwrap()):t instanceof ca?dr(t._def.innerType):[];class Yu extends de{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return K(n,{code:j.invalid_type,expected:J.object,received:n.parsedType}),ne;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(K(n,{code:j.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ne)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=dr(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Yu({typeName:re.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...ue(r)})}}function ih(t,e){const n=gr(t),r=gr(e);if(t===e)return{valid:!0,data:t};if(n===J.object&&r===J.object){const i=ve.objectKeys(e),s=ve.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const u=ih(t[a],e[a]);if(!u.valid)return{valid:!1};o[a]=u.data}return{valid:!0,data:o}}else if(n===J.array&&r===J.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],u=ih(o,a);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===J.date&&r===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class na extends de{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(nh(s)||nh(o))return ne;const a=ih(s.value,o.value);return a.valid?((rh(s)||rh(o))&&n.dirty(),{status:n.value,value:a.data}):(K(r,{code:j.invalid_intersection_types}),ne)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}na.create=(t,e,n)=>new na({left:t,right:e,typeName:re.ZodIntersection,...ue(n)});class Zn extends de{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.array)return K(r,{code:j.invalid_type,expected:J.array,received:r.parsedType}),ne;if(r.data.length<this._def.items.length)return K(r,{code:j.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ne;!this._def.rest&&r.data.length>this._def.items.length&&(K(r,{code:j.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const u=this._def.items[a]||this._def.rest;return u?u._parse(new Qn(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Et.mergeArray(n,o)):Et.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Zn({...this._def,rest:e})}}Zn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zn({items:t,typeName:re.ZodTuple,rest:null,...ue(e)})};class ra extends de{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return K(r,{code:j.invalid_type,expected:J.object,received:r.parsedType}),ne;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Qn(r,a,r.path,a)),value:o._parse(new Qn(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Et.mergeObjectAsync(n,i):Et.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof de?new ra({keyType:e,valueType:n,typeName:re.ZodRecord,...ue(r)}):new ra({keyType:Sn.create(),valueType:e,typeName:re.ZodRecord,...ue(n)})}}class au extends de{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.map)return K(r,{code:j.invalid_type,expected:J.map,received:r.parsedType}),ne;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,u],l)=>({key:i._parse(new Qn(r,a,r.path,[l,"key"])),value:s._parse(new Qn(r,u,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const u of o){const l=await u.key,c=await u.value;if(l.status==="aborted"||c.status==="aborted")return ne;(l.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(l.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const u of o){const l=u.key,c=u.value;if(l.status==="aborted"||c.status==="aborted")return ne;(l.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(l.value,c.value)}return{status:n.value,value:a}}}}au.create=(t,e,n)=>new au({valueType:e,keyType:t,typeName:re.ZodMap,...ue(n)});class ji extends de{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.set)return K(r,{code:j.invalid_type,expected:J.set,received:r.parsedType}),ne;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(K(r,{code:j.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(K(r,{code:j.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const l=new Set;for(const c of u){if(c.status==="aborted")return ne;c.status==="dirty"&&n.dirty(),l.add(c.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((u,l)=>s._parse(new Qn(r,u,r.path,l)));return r.common.async?Promise.all(a).then(u=>o(u)):o(a)}min(e,n){return new ji({...this._def,minSize:{value:e,message:Y.toString(n)}})}max(e,n){return new ji({...this._def,maxSize:{value:e,message:Y.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ji.create=(t,e)=>new ji({valueType:t,minSize:null,maxSize:null,typeName:re.ZodSet,...ue(e)});class xs extends de{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==J.function)return K(n,{code:j.invalid_type,expected:J.function,received:n.parsedType}),ne;function r(a,u){return iu({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ru(),ks].filter(l=>!!l),issueData:{code:j.invalid_arguments,argumentsError:u}})}function i(a,u){return iu({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ru(),ks].filter(l=>!!l),issueData:{code:j.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Cs){const a=this;return Rt(async function(...u){const l=new Jt([]),c=await a._def.args.parseAsync(u,s).catch(g=>{throw l.addIssue(r(u,g)),l}),d=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(d,s).catch(g=>{throw l.addIssue(i(d,g)),l})})}else{const a=this;return Rt(function(...u){const l=a._def.args.safeParse(u,s);if(!l.success)throw new Jt([r(u,l.error)]);const c=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(c,s);if(!d.success)throw new Jt([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new xs({...this._def,args:Zn.create(e).rest(Oi.create())})}returns(e){return new xs({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new xs({args:e||Zn.create([]).rest(Oi.create()),returns:n||Oi.create(),typeName:re.ZodFunction,...ue(r)})}}class ia extends de{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ia.create=(t,e)=>new ia({getter:t,typeName:re.ZodLazy,...ue(e)});class sa extends de{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return K(n,{received:n.data,code:j.invalid_literal,expected:this._def.value}),ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}sa.create=(t,e)=>new sa({value:t,typeName:re.ZodLiteral,...ue(e)});function Qb(t,e){return new ti({values:t,typeName:re.ZodEnum,...ue(e)})}class ti extends de{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return K(n,{expected:ve.joinValues(r),received:n.parsedType,code:j.invalid_type}),ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return K(n,{received:n.data,code:j.invalid_enum_value,options:r}),ne}return Rt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ti.create(e,{...this._def,...n})}exclude(e,n=this._def){return ti.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ti.create=Qb;class oa extends de{_parse(e){const n=ve.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==J.string&&r.parsedType!==J.number){const i=ve.objectValues(n);return K(r,{expected:ve.joinValues(i),received:r.parsedType,code:j.invalid_type}),ne}if(this._cache||(this._cache=new Set(ve.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ve.objectValues(n);return K(r,{received:r.data,code:j.invalid_enum_value,options:i}),ne}return Rt(e.data)}get enum(){return this._def.values}}oa.create=(t,e)=>new oa({values:t,typeName:re.ZodNativeEnum,...ue(e)});class Cs extends de{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==J.promise&&n.common.async===!1)return K(n,{code:j.invalid_type,expected:J.promise,received:n.parsedType}),ne;const r=n.parsedType===J.promise?n.data:Promise.resolve(n.data);return Rt(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Cs.create=(t,e)=>new Cs({type:t,typeName:re.ZodPromise,...ue(e)});class Pn extends de{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{K(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return ne;const u=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return u.status==="aborted"?ne:u.status==="dirty"||n.value==="dirty"?Es(u.value):u});{if(n.value==="aborted")return ne;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?ne:a.status==="dirty"||n.value==="dirty"?Es(a.value):a}}if(i.type==="refinement"){const o=a=>{const u=i.refinement(a,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ne:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ne:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ui(o))return ne;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ui(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):ne);ve.assertNever(i)}}Pn.create=(t,e,n)=>new Pn({schema:t,typeName:re.ZodEffects,effect:e,...ue(n)});Pn.createWithPreprocess=(t,e,n)=>new Pn({schema:e,effect:{type:"preprocess",transform:t},typeName:re.ZodEffects,...ue(n)});class Wn extends de{_parse(e){return this._getType(e)===J.undefined?Rt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wn.create=(t,e)=>new Wn({innerType:t,typeName:re.ZodOptional,...ue(e)});class ni extends de{_parse(e){return this._getType(e)===J.null?Rt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ni.create=(t,e)=>new ni({innerType:t,typeName:re.ZodNullable,...ue(e)});class aa extends de{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===J.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}aa.create=(t,e)=>new aa({innerType:t,typeName:re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ue(e)});class ca extends de{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Jo(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Jt(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Jt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ca.create=(t,e)=>new ca({innerType:t,typeName:re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ue(e)});class cu extends de{_parse(e){if(this._getType(e)!==J.nan){const r=this._getOrReturnCtx(e);return K(r,{code:j.invalid_type,expected:J.nan,received:r.parsedType}),ne}return{status:"valid",value:e.data}}}cu.create=t=>new cu({typeName:re.ZodNaN,...ue(t)});const ZI=Symbol("zod_brand");class Cf extends de{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Ca extends de{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ne:s.status==="dirty"?(n.dirty(),Es(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ne:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Ca({in:e,out:n,typeName:re.ZodPipeline})}}class ua extends de{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Ui(i)&&(i.value=Object.freeze(i.value)),i);return Jo(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}ua.create=(t,e)=>new ua({innerType:t,typeName:re.ZodReadonly,...ue(e)});function Dg(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function Zb(t,e={},n){return t?Os.create().superRefine((r,i)=>{const s=t(r);if(s instanceof Promise)return s.then(o=>{if(!o){const a=Dg(e,r),u=a.fatal??n??!0;i.addIssue({code:"custom",...a,fatal:u})}});if(!s){const o=Dg(e,r),a=o.fatal??n??!0;i.addIssue({code:"custom",...o,fatal:a})}}):Os.create()}const JI={object:Ue.lazycreate};var re;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(re||(re={}));const YI=(t,e={message:`Input not instance of ${t.name}`})=>Zb(n=>n instanceof t,e),Jb=Sn.create,Yb=Xr.create,XI=cu.create,eS=ei.create,Xb=Yo.create,tS=Fi.create,nS=su.create,rS=Xo.create,iS=ea.create,sh=Os.create,sS=Oi.create,oS=Ar.create,aS=ou.create,ew=Rn.create,xc=Ue.create,cS=Ue.strictCreate,tw=ta.create,uS=Yu.create,lS=na.create,nw=Zn.create,dS=ra.create,hS=au.create,fS=ji.create,pS=xs.create,gS=ia.create,mS=sa.create,yS=ti.create,bS=oa.create,wS=Cs.create,Ng=Pn.create,vS=Wn.create,ES=ni.create,_S=Pn.createWithPreprocess,AS=Ca.create,xS=()=>Jb().optional(),IS=()=>Yb().optional(),SS=()=>Xb().optional(),TS={string:t=>Sn.create({...t,coerce:!0}),number:t=>Xr.create({...t,coerce:!0}),boolean:t=>Yo.create({...t,coerce:!0}),bigint:t=>ei.create({...t,coerce:!0}),date:t=>Fi.create({...t,coerce:!0})},RS=ne,Mg=Object.freeze(Object.defineProperty({__proto__:null,BRAND:ZI,DIRTY:Es,EMPTY_PATH:RI,INVALID:ne,NEVER:RS,OK:Rt,ParseStatus:Et,Schema:de,ZodAny:Os,ZodArray:Rn,ZodBigInt:ei,ZodBoolean:Yo,ZodBranded:Cf,ZodCatch:ca,ZodDate:Fi,ZodDefault:aa,ZodDiscriminatedUnion:Yu,ZodEffects:Pn,ZodEnum:ti,ZodError:Jt,get ZodFirstPartyTypeKind(){return re},ZodFunction:xs,ZodIntersection:na,ZodIssueCode:j,ZodLazy:ia,ZodLiteral:sa,ZodMap:au,ZodNaN:cu,ZodNativeEnum:oa,ZodNever:Ar,ZodNull:ea,ZodNullable:ni,ZodNumber:Xr,ZodObject:Ue,ZodOptional:Wn,ZodParsedType:J,ZodPipeline:Ca,ZodPromise:Cs,ZodReadonly:ua,ZodRecord:ra,ZodSchema:de,ZodSet:ji,ZodString:Sn,ZodSymbol:su,ZodTransformer:Pn,ZodTuple:Zn,ZodType:de,ZodUndefined:Xo,ZodUnion:ta,ZodUnknown:Oi,ZodVoid:ou,addIssueToContext:K,any:sh,array:ew,bigint:eS,boolean:Xb,coerce:TS,custom:Zb,date:tS,datetimeRegex:Wb,defaultErrorMap:ks,discriminatedUnion:uS,effect:Ng,enum:yS,function:pS,getErrorMap:ru,getParsedType:gr,instanceof:YI,intersection:lS,isAborted:nh,isAsync:Jo,isDirty:rh,isValid:Ui,late:JI,lazy:gS,literal:mS,makeIssue:iu,map:hS,nan:XI,nativeEnum:bS,never:oS,null:iS,nullable:ES,number:Yb,object:xc,get objectUtil(){return th},oboolean:SS,onumber:IS,optional:vS,ostring:xS,pipeline:AS,preprocess:_S,promise:wS,quotelessJson:SI,record:dS,set:fS,setErrorMap:TI,strictObject:cS,string:Jb,symbol:nS,transformer:Ng,tuple:nw,undefined:rS,union:tw,unknown:sS,get util(){return ve},void:aS},Symbol.toStringTag,{value:"Module"})),BS=t=>t.message?t.message:"unspecified error";class Ds extends ie{constructor(e){super(),this.code=Q2,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:
${this._compileErrors().join(`
`)}`}_compileErrors(){return this.errors.map(BS)}}const PS=["bool","int","uint","bytes","string","address","tuple"],rw=t=>typeof t=="object"&&"type"in t&&"name"in t,Df=t=>typeof t=="string",xe=t=>typeof t=="string"&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(t);function iw(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/))}const uu=t=>typeof t=="number"||typeof t=="bigint"||typeof t=="string"&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(t);function Nf(t){if(typeof t!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof t}`);return t.startsWith("0x")}const Mf=function(t){for(const[e,n]of Object.entries(t))if(n!==void 0&&n.length>0&&n[0]===0)throw new Error(`${e} cannot have leading zeroes, received: ${n.toString()}`)},kS=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],Yi=t=>{let e=t.replace(/ /,""),n,r=!1,i=[];if(t.includes("[")&&(e=e.slice(0,e.indexOf("[")),i=[...t.matchAll(/(?:\[(\d*)\])/g)].map(s=>parseInt(s[1],10)).map(s=>Number.isNaN(s)?-1:s),r=i.length>0),PS.includes(e))return{baseType:e,isArray:r,baseTypeSize:n,arraySizes:i};if(e.startsWith("int"))n=parseInt(e.substring(3),10),e="int";else if(e.startsWith("uint"))n=parseInt(t.substring(4),10),e="uint";else if(e.startsWith("bytes"))n=parseInt(e.substring(5),10),e="bytes";else return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:i};return{baseType:e,isArray:r,baseTypeSize:n,arraySizes:i}},Fl=(t,e={})=>{if(Object.keys(e).includes("type"))throw new Ds([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:t},instancePath:"",schemaPath:""}]);const{baseType:r,baseTypeSize:i}=Yi(t);if(!r&&!kS.includes(t))throw new Ds([{keyword:"eth",message:`Eth data type "${t}" is not valid`,params:{eth:t},instancePath:"",schemaPath:""}]);if(r){if(r==="tuple")throw new Error('"tuple" type is not implemented directly.');return{format:`${r}${i??""}`,required:!0}}return t?{format:t,required:!0}:{}},lu=(t,e="/0")=>{const n={type:"array",items:[],maxItems:t.length,minItems:t.length};for(const[r,i]of t.entries()){let s,o,a=[];rw(i)?(s=i.type,o=i.name||`${e}/${r}`,a=i.components):typeof i=="string"?(s=i,o=`${e}/${r}`):Array.isArray(i)&&(i[0]&&typeof i[0]=="string"&&i[0].startsWith("tuple")&&!Array.isArray(i[0])&&i[1]&&Array.isArray(i[1])?(s=i[0],o=`${e}/${r}`,a=i[1]):(s="tuple",o=`${e}/${r}`,a=i));const{baseType:u,isArray:l,arraySizes:c}=Yi(s);let d,h=n;for(let g=c.length-1;g>0;g-=1)d={type:"array",$id:o,items:[],maxItems:c[g],minItems:c[g]},c[g]<0&&(delete d.maxItems,delete d.minItems),Array.isArray(h.items)?h.items.length===0?h.items=[d]:h.items.push(d):h.items=[h.items,d],h=d;if(u==="tuple"&&!l){const g=lu(a,o);g.$id=o,h.items.push(g)}else if(u==="tuple"&&l){const g=c[0],f=Object.assign({type:"array",$id:o,items:lu(a,o)},g>=0&&{minItems:g,maxItems:g});h.items.push(f)}else if(l){const g=c[0],f=Object.assign({type:"array",$id:o,items:Fl(s)},g>=0&&{minItems:g,maxItems:g});h.items.push(f)}else Array.isArray(h.items)?h.items.push(Object.assign({$id:o},Fl(s))):h.items.push(Object.assign({$id:o},Fl(s)));h=n}return n},Lf=t=>lu(t),$f=(t,e)=>e===1?t:$f(t[0],e-1),Uo=(t,e,n)=>{const r=[];for(const[i,s]of t.entries()){let o,a,u=[];rw(s)?(o=s.type,a=s.name,u=s.components):typeof s=="string"?o=s:Array.isArray(s)&&(s[1]&&Array.isArray(s[1])?(o=s[0],u=s[1]):(o="tuple",u=s));const{baseType:l,isArray:c,arraySizes:d}=Yi(o),h=Array.isArray(e)?e[i]:e[a];if(l==="tuple"&&!c)r.push(Uo(u,h,n));else if(l==="tuple"&&c){const g=[];for(const f of h)if(d.length>1){const p=$f(f,d.length-1),m=[];for(const y of p)m.push(Uo(u,y,n));g.push(m)}else g.push(Uo(u,f,n));r.push(g)}else r.push(h)}return n=n??[],n.push(...r),n},sw=t=>{if(t>=48&&t<=57)return t-48;if(t>=65&&t<=70)return t-55;if(t>=97&&t<=102)return t-87;throw new Error(`Invalid code point: ${t}`)},Xu=t=>{if(!xe(t))throw new Error("Invalid hex string");const[e,n]=t.startsWith("-")?[!0,t.slice(1)]:[!1,t],r=BigInt(n);return r>Number.MAX_SAFE_INTEGER?e?-r:r:r<Number.MIN_SAFE_INTEGER?r:e?-1*Number(r):Number(r)},el=t=>{if((typeof t=="number"||typeof t=="bigint")&&t<0)return`-0x${t.toString(16).slice(1)}`;if((typeof t=="number"||typeof t=="bigint")&&t>=0)return`0x${t.toString(16)}`;if(typeof t=="string"&&xe(t)){const[e,n]=t.startsWith("-")?[!0,t.slice(1)]:[!1,t],r=n.split(/^(-)?0(x|X)/).slice(-1)[0];return`${e?"-":""}0x${r.replace(/^0+/,"").toLowerCase()}`}if(typeof t=="string"&&!xe(t))return el(BigInt(t));throw new Tf(t)},du=(t,e,n="0")=>{if(typeof t=="string"&&!xe(t))return t.padStart(e,n);const r=typeof t=="string"&&xe(t)?t:el(t),[i,s]=r.startsWith("-")?["-0x",r.slice(3)]:["0x",r.slice(2)];return`${i}${s.padStart(e,n)}`};function Rr(t){let e="0x";for(const n of t){const r=n.toString(16);e+=r.length===1?`0${r}`:r}return e}const tr={zero:48,nine:57,A:65,F:70,a:97,f:102};function Lg(t){if(t>=tr.zero&&t<=tr.nine)return t-tr.zero;if(t>=tr.A&&t<=tr.F)return t-(tr.A-10);if(t>=tr.a&&t<=tr.f)return t-(tr.a-10)}function Xi(t){let e=0;if(t.startsWith("0")&&(t[1]==="x"||t[1]==="X")&&(e=2),t.length%2!==0)throw new As(`hex string has odd length: ${t}`);const n=(t.length-e)/2,r=new Uint8Array(n);for(let i=0,s=e;i<n;i+=1){const o=Lg(t.charCodeAt(s++)),a=Lg(t.charCodeAt(s++));if(o===void 0||a===void 0)throw new As(`Invalid byte sequence ("${t[s-2]}${t[s-1]}" in "${t}").`);r[i]=o*16+a}return r}function tl(t){var e;return!(t instanceof Uint8Array)&&((e=t?.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"?Uint8Array.from(t):t}const ow=Object.freeze(Object.defineProperty({__proto__:null,abiSchemaToJsonSchema:lu,codePointToInt:sw,ensureIfUint8Array:tl,ethAbiToJsonSchema:Lf,fetchArrayElement:$f,hexToNumber:Xu,hexToUint8Array:Xi,numberToHex:el,padLeft:du,parseBaseType:Yi,transformJsonDataToAbiFormat:Uo,uint8ArrayToHexString:Rr},Symbol.toStringTag,{value:"Module"})),oh=t=>{var e,n;return t instanceof Uint8Array||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="Buffer"},si=(t,e={abiType:"bytes"})=>{if(typeof t!="string"&&!Array.isArray(t)&&!oh(t)||typeof t=="string"&&xe(t)&&t.startsWith("-")||typeof t=="string"&&!xe(t))return!1;let n;if(typeof t=="string"){if(t.length%2!==0)return!1;n=Xi(t)}else if(Array.isArray(t)){if(t.some(r=>r<0||r>255||!Number.isInteger(r)))return!1;n=new Uint8Array(t)}else n=t;if(e?.abiType){const{baseTypeSize:r}=Yi(e.abiType);return r?n.length===r:!0}return e?.size?n.length===e?.size:!0},aw=t=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(t))return!1;const e=t.slice(2),n=Bs(e.toLowerCase()),r=Rr(_t(tl(n))).slice(2);for(let i=0;i<40;i+=1)if(parseInt(r[i],16)>7&&e[i].toUpperCase()!==e[i]||parseInt(r[i],16)<=7&&e[i].toLowerCase()!==e[i])return!1;return!0},Yt=(t,e=!0)=>{if(typeof t!="string"&&!oh(t))return!1;let n;return oh(t)?n=Rr(t):typeof t=="string"&&!xe(t)?n=t.toLowerCase().startsWith("0x")?t:`0x${t}`:n=t,/^(0x)?[0-9a-f]{40}$/i.test(n)?/^(0x|0X)?[0-9a-f]{40}$/.test(n)||/^(0x|0X)?[0-9A-F]{40}$/.test(n)?!0:e?aw(n):!0:!1},qi=(t,e)=>{if(e===BigInt(0))return BigInt(1);let n=t;for(let r=1;r<e;r+=1)n*=t;return n},xr=(t,e={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof t)||typeof t=="string"&&t.length===0)return!1;let n;if(e?.abiType){const{baseTypeSize:i}=Yi(e.abiType);i&&(n=i)}else e.bitSize&&(n=e.bitSize);const r=qi(BigInt(2),BigInt(n??256))-BigInt(1);try{const i=typeof t=="string"&&xe(t)?BigInt(Xu(t)):BigInt(t);return i>=0&&i<=r}catch{return!1}},la=(t,e={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof t)||typeof t=="number"&&t>Number.MAX_SAFE_INTEGER)return!1;let n;if(e?.abiType){const{baseTypeSize:s,baseType:o}=Yi(e.abiType);if(o!=="int")return!1;s&&(n=s)}else e.bitSize&&(n=e.bitSize);const r=qi(BigInt(2),BigInt((n??256)-1)),i=BigInt(-1)*qi(BigInt(2),BigInt((n??256)-1));try{const s=typeof t=="string"&&xe(t)?BigInt(Xu(t)):BigInt(t);return s>=i&&s<=r}catch{return!1}},cw=t=>!!(la(t)||typeof t=="string"&&/[0-9.]/.test(t)&&t.indexOf(".")===t.lastIndexOf(".")||typeof t=="number"),uw=t=>xr(t),at=t=>Object.values(br).includes(t),ah=t=>at(t)||uw(t),Ys=t=>typeof t!="string"||!/^(0x)?[0-9a-f]{512}$/i.test(t)?!1:!!(/^(0x)?[0-9a-f]{512}$/.test(t)||/^(0x)?[0-9A-F]{512}$/.test(t)),nl=(t,e)=>{if(typeof e=="string"&&!xe(e)||!Ys(t))return!1;const n=typeof e=="string"?Xi(e):e,r=Rr(_t(n)).slice(2);for(let i=0;i<12;i+=4){const s=(parseInt(r.slice(i,i+2),16)<<8)+parseInt(r.slice(i+2,i+4),16)&2047,o=sw(t.charCodeAt(t.length-1-Math.floor(s/4))),a=1<<s%4;if((o&a)!==a)return!1}return!0},OS=(t,e)=>{if(!Ys(t)||!Yt(e))return!1;const n=du(e,64);return nl(t,n)},CS=(t,e)=>!Ys(t)||!Yt(e)?!1:nl(t,e),DS=t=>["number","string","boolean"].includes(typeof t)?typeof t=="boolean"?!0:typeof t=="string"&&!xe(t)?t==="1"||t==="0":typeof t=="string"&&xe(t)?t==="0x1"||t==="0x0":t===1||t===0:!1,L=t=>t==null,Ns=t=>typeof t=="object"&&!L(t)&&!Array.isArray(t)&&!(t instanceof If),hu=t=>typeof t!="string"||!/^(0x)?[0-9a-f]{64}$/i.test(t)?!1:!!(/^(0x)?[0-9a-f]{64}$/.test(t)||/^(0x)?[0-9A-F]{64}$/.test(t)),NS=(t,e)=>!Ys(t)||!hu(e)?!1:nl(t,e),MS=t=>{const e=["fromBlock","toBlock","address","topics","blockHash"];if(L(t)||typeof t!="object"||!Object.keys(t).every(n=>e.includes(n))||!L(t.fromBlock)&&!ah(t.fromBlock)||!L(t.toBlock)&&!ah(t.toBlock))return!1;if(!L(t.address)){if(Array.isArray(t.address)){if(!t.address.every(n=>Yt(n)))return!1}else if(!Yt(t.address))return!1}return!(!L(t.topics)&&!t.topics.every(n=>L(n)?!0:Array.isArray(n)?n.every(r=>hu(r)):!!hu(n)))},Hi={address:t=>Yt(t),bloom:t=>Ys(t),blockNumber:t=>uw(t),blockTag:t=>at(t),blockNumberOrTag:t=>ah(t),bool:t=>DS(t),bytes:t=>si(t),filter:t=>MS(t),hex:t=>xe(t),uint:t=>xr(t),int:t=>la(t),number:t=>cw(t),string:t=>Df(t)};for(let t=8;t<=256;t+=8)Hi[`int${t}`]=e=>la(e,{bitSize:t}),Hi[`uint${t}`]=e=>xr(e,{bitSize:t});for(let t=1;t<=32;t+=1)Hi[`bytes${t}`]=e=>si(e,{size:t});Hi.bytes256=Hi.bytes;const ko=t=>{if((!t?.type||t?.type==="object")&&t?.properties){const e={};for(const n of Object.keys(t.properties)){const r=ko(t.properties[n]);r&&(e[n]=r)}return Array.isArray(t.required)?xc(e).partial().required(t.required.reduce((n,r)=>Object.assign(Object.assign({},n),{[r]:!0}),{})):xc(e).partial()}if(t?.type==="array"&&t?.items){if(Array.isArray(t.items)&&t.items.length>1&&t.maxItems!==void 0&&new Set(t.items.map(r=>r.$id)).size===t.items.length){const r=[];for(const i of t.items){const s=ko(i);s&&r.push(s)}return nw(r)}const e=Array.isArray(t.items)?t.items[0]:t.items;let n=ew(ko(e));return n=t.minItems!==void 0?n.min(t.minItems):n,n=t.maxItems!==void 0?n.max(t.maxItems):n,n}if(t.oneOf&&Array.isArray(t.oneOf))return tw(t.oneOf.map(e=>ko(e)));if(t?.format){if(!Hi[t.format])throw new rI(t.format);return sh().refine(Hi[t.format],e=>({params:{value:e,format:t.format}}))}return t?.type&&t?.type!=="object"&&typeof Mg[String(t.type)]=="function"?Mg[String(t.type)]():xc({data:sh()}).partial()};class _s{static factory(){return _s.validatorInstance||(_s.validatorInstance=new _s),_s.validatorInstance}validate(e,n,r){var i,s;const a=ko(e).safeParse(n);if(!a.success){const u=this.convertErrors((s=(i=a.error)===null||i===void 0?void 0:i.issues)!==null&&s!==void 0?s:[]);if(u){if(r?.silent)return u;throw new Ds(u)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map(n=>{var r;let i,s,o,a;a=n.path.join("/");const u=String(n.path[n.path.length-1]),l=n.path.join("/");if(n.code===j.too_big)s="maxItems",a=`${l}/maxItems`,o={limit:n.maximum},i=`must NOT have more than ${n.maximum} items`;else if(n.code===j.too_small)s="minItems",a=`${l}/minItems`,o={limit:n.minimum},i=`must NOT have fewer than ${n.minimum} items`;else if(n.code===j.custom){const{value:c,format:d}=(r=n.params)!==null&&r!==void 0?r:{};typeof c>"u"?i=`value at "/${a}" is required`:i=`value "${typeof c=="object"?JSON.stringify(c):c}" at "/${a}" must pass "${d}" validation`,o={value:c}}return{keyword:s??u,instancePath:l?`/${l}`:"",schemaPath:a?`#${a}`:"#",params:o??{value:n.message},message:i??n.message}})}}class LS{constructor(){this._validator=_s.factory()}validateJSONSchema(e,n,r){return this._validator.validate(e,n,r)}validate(e,n,r={silent:!1}){var i,s;const o=Lf(e);if(!(Array.isArray(o.items)&&((i=o.items)===null||i===void 0?void 0:i.length)===0&&n.length===0)){if(Array.isArray(o.items)&&((s=o.items)===null||s===void 0?void 0:s.length)===0&&n.length!==0)throw new Ds([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:n}]);return this._validator.validate(o,n,r)}}}const ee=new LS;function oi(t){var e,n;return t instanceof Uint8Array||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="Buffer"}function Bt(...t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function rl(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n+=1)if(t[n]!==e[n])return!1;return!0}const il={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},ch="Warning: Using type `number` with values that are large or contain many decimals may cause loss of precision, it is recommended to use type `string` or `BigInt` when using conversion methods",Jn=t=>{if(ee.validate(["bytes"],[t]),oi(t))return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="string")return Xi(t);throw new As(t)},{uint8ArrayToHexString:$S}=ow,pe=t=>$S(Jn(t)),De=t=>typeof t=="string"&&t.slice(0,2).toLowerCase()!=="0x"?Jn(`0x${t}`):Jn(t),Da=t=>(ee.validate(["hex"],[t]),Xu(t)),US=Da,Ye=(t,e)=>{typeof t!="bigint"&&ee.validate(["int"],[t]);let n=el(t);return e&&(!n.startsWith("-")&&n.length%2===1?n="0x0".concat(n.slice(2)):n.length%2===0&&n.startsWith("-")&&(n="-0x0".concat(n.slice(3)))),n},FS=Ye,jS=t=>Da(t).toString(),kn=t=>{ee.validate(["string"],[t]);let e=t.replace(/^(?:\u0000)/,"");return e=e.replace(/(?:\u0000)$/,""),pe(new TextEncoder().encode(e))},lw=kn,qS=kn,sl=t=>zb(De(t)),HS=t=>typeof t=="string"?sl(t):(ee.validate(["bytes"],[t]),zb(t)),Uf=Bs,zS=sl,dw=t=>{ee.validate(["string"],[t]);let e="";for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n).toString(16);e+=r.length%2!==0?`0${r}`:r}return`0x${e}`},GS=dw,hw=t=>new TextDecoder("ascii").decode(De(t)),VS=hw,Ir=(t,e)=>{if(typeof t=="string"&&Yt(t))return e?"address":`0x${t.toLowerCase().replace(/^0x/i,"")}`;if(typeof t=="boolean")return e?"bool":t?"0x01":"0x00";if(typeof t=="number")return e?t<0?"int256":"uint256":Ye(t);if(typeof t=="bigint")return e?"bigint":Ye(t);if(oi(t))return e?"bytes":pe(t);if(typeof t=="object"&&t)return e?"string":kn(JSON.stringify(t));if(typeof t=="string"){if(t.startsWith("-0x")||t.startsWith("-0X"))return e?"int256":Ye(t);if(xe(t))return e?"bytes":t;if(uu(t)&&!la(t)&&!xr(t))return e?"bytes":`0x${t}`;if(uu(t)&&!la(t)&&xr(t))return e?"uint":Ye(t);if(!Number.isFinite(t))return e?"string":kn(t)}throw new Fx(t)},jt=t=>{if(typeof t=="number")return t>1e20?(console.warn(ch),BigInt(t)):t;if(typeof t=="bigint")return t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?Number(t):t;if(typeof t=="string"&&xe(t))return Da(t);try{return jt(BigInt(t))}catch{throw new Tf(t)}},vi=t=>{if(typeof t=="number")return BigInt(t);if(typeof t=="bigint")return t;if(typeof t=="string"&&uu(t))return t.startsWith("-")?-BigInt(t.substring(1)):BigInt(t);throw new Tf(t)},KS=(t,e)=>{let n;if(typeof e=="string"){if(n=il[e],!n)throw new Ob(e)}else{if(e<0||!Number.isInteger(e))throw new Cb(e);n=qi(BigInt(10),BigInt(e))}const r=String(jt(t)),i=n.toString().length-1;if(i<=0)return r.toString();const s=r.padStart(i,"0"),o=s.slice(0,-i),a=s.slice(-i).replace(/\.?0+$/,"");return o===""?a?`0.${a}`:"0":a===""?o:`${o}.${a}`.slice(0,o.length+i+1)},WS=(t,e)=>{ee.validate(["number"],[t]);let n;if(typeof e=="string"){if(n=il[e],!n)throw new Ob(e)}else{if(e<0||!Number.isInteger(e))throw new Cb(e);n=qi(BigInt(10),BigInt(e))}let r=t;typeof r=="number"&&(r<1e-15&&console.warn(ch),r>1e20?(console.warn(ch),r=BigInt(r)):r=r.toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}));const[i,s]=String(typeof r=="string"&&!xe(r)?r:jt(r)).split(".").concat(""),a=BigInt(`${i}${s}`)*n,u=s.length;return u===0?a.toString():a.toString().slice(0,-u)},Xn=t=>{if(!Yt(t,!1))throw new Rf(t);const e=t.toLowerCase().replace(/^0x/i,""),n=Rr(_t(tl(Uf(e))));if(L(n)||n==="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470")return"";let r="0x";const i=n.replace(/^0x/i,"");for(let s=0;s<e.length;s+=1)parseInt(i[s],16)>7?r+=e[s].toUpperCase():r+=e[s];return r},fw=t=>{if(typeof t=="boolean")return t;if(typeof t=="number"&&(t===0||t===1)||typeof t=="bigint"&&(t===BigInt(0)||t===BigInt(1)))return!!t;if(typeof t=="string"&&!xe(t)&&(t==="1"||t==="0"||t==="false"||t==="true"))return t==="true"?!0:t==="false"?!1:!!Number(t);if(typeof t=="string"&&xe(t)&&(t==="0x1"||t==="0x0"))return!!jt(t);throw new Bf(t)};var un=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Na(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function QS(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var jl={exports:{}},$g;function ZS(){return $g||($g=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function s(u,l,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new i(c,d||u,h),f=n?n+l:l;return u._events[f]?u._events[f].fn?u._events[f]=[u._events[f],g]:u._events[f].push(g):(u._events[f]=g,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,d;if(this._eventsCount===0)return l;for(d in c=this._events)e.call(c,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=n?n+l:l,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,g=d.length,f=new Array(g);h<g;h++)f[h]=d[h].fn;return f},a.prototype.listenerCount=function(l){var c=n?n+l:l,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,c,d,h,g,f){var p=n?n+l:l;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,w,b;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,d),!0;case 4:return m.fn.call(m.context,c,d,h),!0;case 5:return m.fn.call(m.context,c,d,h,g),!0;case 6:return m.fn.call(m.context,c,d,h,g,f),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];m.fn.apply(m.context,w)}else{var A=m.length,E;for(b=0;b<A;b++)switch(m[b].once&&this.removeListener(l,m[b].fn,void 0,!0),y){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,c);break;case 3:m[b].fn.call(m[b].context,c,d);break;case 4:m[b].fn.call(m[b].context,c,d,h);break;default:if(!w)for(E=1,w=new Array(y-1);E<y;E++)w[E-1]=arguments[E];m[b].fn.apply(m[b].context,w)}}return!0},a.prototype.on=function(l,c,d){return s(this,l,c,d,!1)},a.prototype.once=function(l,c,d){return s(this,l,c,d,!0)},a.prototype.removeListener=function(l,c,d,h){var g=n?n+l:l;if(!this._events[g])return this;if(!c)return o(this,g),this;var f=this._events[g];if(f.fn)f.fn===c&&(!h||f.once)&&(!d||f.context===d)&&o(this,g);else{for(var p=0,m=[],y=f.length;p<y;p++)(f[p].fn!==c||h&&!f[p].once||d&&f[p].context!==d)&&m.push(f[p]);m.length?this._events[g]=m.length===1?m[0]:m:o(this,g)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(jl)),jl.exports}var JS=ZS();const pw=Na(JS);class Ff extends pw{constructor(){super(...arguments),this.maxListeners=Number.MAX_SAFE_INTEGER}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}}const YS=xe,XS=uu,eT=aw,tT=Yt,nT=Ys,rT=nl,iT=OS,sT=CS,oT=hu,aT=NS,cT=(t,e)=>{const n=typeof t=="string"&&at(t),r=typeof e=="string"&&at(e);if(t===e||(t==="earliest"||t===0)&&(e==="earliest"||e===0))return 0;if(t==="earliest")return-1;if(e==="earliest")return 1;if(n&&r){const o={[br.EARLIEST]:1,[br.FINALIZED]:2,[br.SAFE]:3,[br.LATEST]:4,[br.PENDING]:5};return o[t]<o[e]?-1:1}if(n&&!r||!n&&r)throw new qx("Cannot compare blocktag with provided non-blocktag input.");const i=BigInt(t),s=BigInt(e);return i<s?-1:i===s?0:1},Kr=t=>typeof t=="object"&&!L(t)&&Object.keys(t).length!==0&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some(e=>e in t),te=L,Ug=t=>typeof t=="object"&&!L(t)&&!Array.isArray(t)&&!(t instanceof If),ai=(t,...e)=>{if(!Ug(t))return t;const n=Object.assign({},t);for(const r of e)for(const i in r)Ug(r[i])?(n[i]||(n[i]={}),n[i]=ai(n[i],r[i])):!L(r[i])&&Object.hasOwnProperty.call(r,i)&&(Array.isArray(r[i])||r[i]instanceof If?n[i]=r[i].slice(0):n[i]=r[i]);return n},Ms=(t,e,n="0")=>typeof t=="string"?xe(t)?du(t,e,n):t.padStart(e,n):(ee.validate(["int"],[t]),du(t,e,n)),gw=(t,e,n="0")=>{if(typeof t=="string"&&!xe(t))return t.padEnd(e,n);const r=typeof t=="string"&&xe(t)?t:Ye(t),i=r.startsWith("-")?3:2;return ee.validate([r.startsWith("-")?"int":"uint"],[t]),r.padEnd(e+i,n)},mw=gw,da=Ms,yw=(t,e=64)=>{ee.validate(["int"],[t]);const n=jt(t);if(n>=0)return Ms(Ir(n),e);const r=qi(BigInt(2),BigInt(e*4));if(-n>=r)throw new Db(`value: ${t}, nibbleWidth: ${e}`);const s=BigInt(n)+r;return Ms(Ye(s),e)},uT=(t,e=64)=>{ee.validate(["int"],[t]);const n=jt(t);if(n<0)return n;const r=Math.ceil(Math.log(Number(n))/Math.log(2));if(r>e*4)throw new Db(`value: "${t}", nibbleWidth: "${e}"`);if(e*4!==r)return n;const i=qi(BigInt(2),BigInt(e)*BigInt(4));return jt(BigInt(n)-i)},{parseBaseType:lT}=ow,mr=t=>typeof t=="object"&&!L(t)&&"number"in t&&"bytes"in t,dT=(t,e,n=[])=>{let r=Object.assign({},t),i;for(const s of e){if(r.oneOf&&i){const o=i,a=n.find(([u])=>u===o);a&&a[0]===i&&(r=r.oneOf[a[1]])}if(!r.properties&&!r.items)return;r.properties?r=r.properties[s]:r.items&&r.items.properties?r=r.items.properties[s]:r.items&&Ns(r.items)?r=r.items:r.items&&Array.isArray(r.items)&&(r=r.items[parseInt(s,10)]),r&&s&&(i=s)}return r},ha=(t,e,n)=>{try{const{baseType:r,baseTypeSize:i}=lT(e);if(r==="int"||r==="uint")switch(n.number){case hn.NUMBER:return Number(vi(t));case hn.HEX:return Ye(vi(t));case hn.STR:return vi(t).toString();case hn.BIGINT:return vi(t);default:throw new Yd(`Invalid format: ${String(n.number)}`)}if(r==="bytes"){let s;switch(i?typeof t=="string"?s=Ms(t,i*2):oi(t)&&(s=Bt(new Uint8Array(i-t.length),t)):s=t,n.bytes){case _r.HEX:return pe(Jn(s));case _r.UINT8ARRAY:return Jn(s);default:throw new Yd(`Invalid format: ${String(n.bytes)}`)}}if(r==="string")return String(t)}catch{return t}return t},Fg=({value:t,schemaProp:e,schema:n,object:r,key:i,dataPath:s,format:o,oneOfPath:a=[]})=>{var u,l;if(Array.isArray(t)){let c=e;if(e?.oneOf!==void 0&&e.oneOf.forEach((d,h)=>{var g,f;!Array.isArray(e?.items)&&(typeof t[0]=="object"&&((g=d?.items)===null||g===void 0?void 0:g.type)==="object"||typeof t[0]=="string"&&((f=d?.items)===null||f===void 0?void 0:f.type)!=="object")&&(c=d,a.push([i,h]))}),L(c?.items))return delete r[i],s.pop(),!0;if(Ns(c.items)&&!L(c.items.format)){for(let d=0;d<t.length;d+=1)r[i][d]=ha(t[d],(u=c?.items)===null||u===void 0?void 0:u.format,o);return s.pop(),!0}if(!Array.isArray(c?.items)&&((l=c?.items)===null||l===void 0?void 0:l.type)==="object"){for(const d of t)ol(d,n,s,o,a);return s.pop(),!0}if(Array.isArray(c?.items)){for(let d=0;d<t.length;d+=1)r[i][d]=ha(t[d],c.items[d].format,o);return s.pop(),!0}}return!1},ol=(t,e,n,r,i=[])=>{var s;if(!Ns(t)&&!Array.isArray(t))return ha(t,e?.format,r);const o=t;if(Array.isArray(o)&&e?.type==="array"&&((s=e?.items)===null||s===void 0?void 0:s.type)==="object")Fg({value:o,schemaProp:e,schema:e,object:o,key:"",dataPath:n,format:r,oneOfPath:i});else for(const[a,u]of Object.entries(o)){n.push(a);let l=dT(e,n,i);if(L(l)){delete o[a],n.pop();continue}if(Ns(u)){ol(u,e,n,r,i),n.pop();continue}if(!Fg({value:u,schemaProp:l,schema:e,object:o,key:a,dataPath:n,format:r,oneOfPath:i})){if(l?.format===void 0&&l?.oneOf!==void 0){for(const[c,d]of l.oneOf.entries())if(d?.format!==void 0){l=d;break}}o[a]=ha(u,l.format,r),n.pop()}}return o},F=(t,e,n=At)=>{let r;Ns(e)?r=ai({},e):Array.isArray(e)?r=[...e]:r=e;const i=Ns(t)?t:Lf(t);if(!i.properties&&!i.items&&!i.format)throw new Yd("Invalid json schema for formatting");return ol(r,i,[],n)},bw="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Ls=t=>{let e;return typeof t=="bigint"||typeof t=="number"?e=Bs(t.toString()):Array.isArray(t)?e=new Uint8Array(t):typeof t=="string"&&!xe(t)?e=Bs(t):e=Jn(t),pe(_t(tl(e)))},Ma=t=>{let e;typeof t=="string"?t.startsWith("0x")&&xe(t)?e=De(t):e=Bs(t):e=t;const n=Ls(e);return n===bw?void 0:n},Xt=t=>{const e=Ma(t);return L(e)?bw:e},hT=t=>{if(Array.isArray(t))throw new Error("Autodetection of array types is not supported.");let e,n;if(typeof t=="object"&&("t"in t||"type"in t)&&("v"in t||"value"in t))e="t"in t?t.t:t.type,n="v"in t?t.v:t.value,e=e.toLowerCase()==="bigint"?"int":e;else{if(typeof t=="bigint")return["int",t];e=Ir(t,!0),n=Ir(t),!e.startsWith("int")&&!e.startsWith("uint")&&(e="bytes")}return(e.startsWith("int")||e.startsWith("uint"))&&typeof n=="string"&&!/^(-)?0x/i.test(n)&&(n=vi(n)),[e,n]},fT=t=>t.startsWith("int[")?`int256${t.slice(3)}`:t==="int"?"int256":t.startsWith("uint[")?`uint256'${t.slice(4)}`:t==="uint"?"uint256":t,ql=(t,e)=>{const n=/^(\d+).*$/.exec(t.slice(e));return n?parseInt(n[1],10):0},jg=t=>t.toString(2).length,qg=(t,e)=>{const n=e.toString();if(t==="string"){if(typeof e=="string")return kn(e);throw new Ux(e)}if(t==="bool"||t==="boolean"){if(typeof e=="boolean")return e?"01":"00";throw new Bf(e)}if(t==="address"){if(!Yt(n))throw new Rf(n);return n}const r=fT(t);if(t.startsWith("uint")){const i=ql(r,4);if(i%8||i<8||i>256)throw new xg(n);const s=jt(n);if(jg(s)>i)throw new Ig(n);if(s<BigInt(0))throw new jx(n);return i?da(s.toString(16),i/8*2):s.toString(16)}if(t.startsWith("int")){const i=ql(r,3);if(i%8||i<8||i>256)throw new xg(t);const s=jt(n);if(jg(s)>i)throw new Ig(n);return s<BigInt(0)?yw(s.toString(),i/8*2):i?da(s.toString(16),i/4):s.toString(16)}if(r==="bytes"){if(n.replace(/^0x/i,"").length%2!==0)throw new As(n);return n}if(t.startsWith("bytes")){if(n.replace(/^0x/i,"").length%2!==0)throw new As(n);const i=ql(t,5);if(!i||i<1||i>64||i<n.replace(/^0x/i,"").length/2)throw new As(n);return mw(n,i*2)}return""},ww=t=>{const[e,n]=hT(t);return Array.isArray(n)?n.map(s=>qg(e,s).replace("0x","")).join(""):qg(e,n).replace("0x","")},jf=(...t)=>`0x${t.map(ww).join("").toLowerCase()}`,pT=(...t)=>Ma(jf(...t)),gT=(...t)=>Xt(jf(...t)),mT=t=>Ma(`0x${(typeof t=="number"?t.toString():t).padStart(64,"0")}`);function yT(t){return Ub(t)}const fa=t=>yT(t),bT=t=>pe(fa(t));var al=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function vw(t){return(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ew(t,e,n){return al(this,void 0,void 0,function*(){let r;const i=yield Promise.race([t instanceof Promise?t:t(),new Promise((s,o)=>{r=setTimeout(()=>n?o(n):s(void 0),e)})]);if(r&&clearTimeout(r),i instanceof Error)throw i;return i})}function qf(t,e){let n;return[new Promise((i,s)=>{n=setInterval(function o(){return al(this,void 0,void 0,function*(){try{const a=yield Ew(t,e);L(a)||(clearInterval(n),i(a))}catch(a){clearInterval(n),s(a)}}),o}(),e)}),n]}function wT(t,e){return al(this,void 0,void 0,function*(){return qf(t,e)[0]})}function Hf(t,e){let n;const r=new Promise((i,s)=>{n=setTimeout(()=>{s(e)},t)});return[n,r]}function _w(t,e){let n;const r=new Promise((i,s)=>{n=setInterval(()=>{al(this,void 0,void 0,function*(){const o=yield t();o&&(clearInterval(n),s(o))})},e)});return[n,r]}const zf=()=>{const t=fa(16);t[6]=t[6]&15|64,t[8]=t[8]&63|128;const e=pe(t);return[e.substring(2,10),e.substring(10,14),e.substring(14,18),e.substring(18,22),e.substring(22,34)].join("-")},Gf=t=>{const e=t.error.code;return Tt.has(e)||e>=-32099&&e<=-32e3},Zr=t=>!Array.isArray(t)&&!!t&&t.jsonrpc==="2.0"&&"result"in t&&L(t.error)&&(typeof t.id=="number"||typeof t.id=="string"),Jr=t=>!Array.isArray(t)&&t.jsonrpc==="2.0"&&!!t&&L(t.result)&&"error"in t&&(typeof t.id=="number"||typeof t.id=="string"),cl=t=>!Array.isArray(t)&&!!t&&t.jsonrpc==="2.0"&&!L(t.params)&&!L(t.method),Aw=t=>!Array.isArray(t)&&!!t&&t.jsonrpc==="2.0"&&"id"in t&&"result"in t,fu=t=>Zr(t)||Jr(t),Vf=t=>Array.isArray(t)?t.every(fu):fu(t),pa=t=>Array.isArray(t)&&t.length>0&&Vf(t);let Ic;const xw=t=>{Ic=t},zi=t=>{var e,n,r,i;return typeof Ic<"u"&&(Ic+=1),{jsonrpc:(e=t.jsonrpc)!==null&&e!==void 0?e:"2.0",id:(r=(n=t.id)!==null&&n!==void 0?n:Ic)!==null&&r!==void 0?r:zf(),method:t.method,params:(i=t.params)!==null&&i!==void 0?i:void 0}},Kf=t=>t.map(e=>zi(e)),jn=t=>Array.isArray(t)&&t.length>0,vT=Object.freeze(Object.defineProperty({__proto__:null,isBatchRequest:jn,isBatchResponse:pa,isResponseRpcError:Gf,isResponseWithError:Jr,isResponseWithNotification:cl,isResponseWithResult:Zr,isSubscriptionResult:Aw,isValidResponse:Vf,setRequestIdStart:xw,toBatchPayload:Kf,toPayload:zi,validateResponse:fu},Symbol.toStringTag,{value:"Module"}));var Hl=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})},Iw;class pu{constructor({timeout:e,eagerStart:n,timeoutMessage:r}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[Iw]="Promise",this._state="pending",this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s}),this._timeoutMessage=r,this._timeoutInterval=e,n&&this.startTimer()}get state(){return this._state}then(e,n){return Hl(this,void 0,void 0,function*(){return this._promise.then(e,n)})}catch(e){return Hl(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return Hl(this,void 0,void 0,function*(){return this._promise.finally(e)})}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){this._state==="pending"&&this._timeoutId&&this.reject(new xb(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}Iw=Symbol.toStringTag;class Sw{constructor(e,n){this.eventEmitter=e,this.autoReconnect=n,this.chunkTimeout=1e3*15}clearQueues(){typeof this._clearQueues=="function"&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const n=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach(i=>{let s=i;this.lastChunk&&(s=this.lastChunk+s);let o;try{o=JSON.parse(s)}catch{this.lastChunk=s,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),this.lastChunkTimeout=setTimeout(()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new Ju({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))},this.chunkTimeout);return}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,o&&n.push(o)}),n}}var Hg=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class Wf extends ka{constructor(){super(...arguments),this._eventEmitter=new pw,this._chainId="",this._accounts=[]}_getChainId(){return Hg(this,void 0,void 0,function*(){var e;const n=yield this.request(zi({method:"eth_chainId",params:[]}));return(e=n?.result)!==null&&e!==void 0?e:""})}_getAccounts(){return Hg(this,void 0,void 0,function*(){var e;const n=yield this.request(zi({method:"eth_accounts",params:[]}));return(e=n?.result)!==null&&e!==void 0?e:[]})}_onConnect(){Promise.all([this._getChainId().then(e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))}).catch(e=>{console.error(e)}),this._getAccounts().then(e=>{this._accounts.length===e.length&&e.every(n=>e.includes(n))||(this._accounts=e,this._onAccountsChanged())}).catch(e=>{console.error(e)})]).then(()=>this._eventEmitter.emit("connect",{chainId:this._chainId})).catch(e=>{console.error(e)})}_onDisconnect(e,n){this._eventEmitter.emit("disconnect",new zx(e,n))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var zl=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const ET={autoReconnect:!0,delay:5e3,maxAttempts:5},_T=1e3;class Tw extends Wf{get SocketConnection(){return this._socketConnection}constructor(e,n,r){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new Xd(e);this._socketPath=e,this._socketOptions=n,this._reconnectOptions=Object.assign(Object.assign({},ET),r??{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new Sw(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError(()=>{this._clearQueues()}),this.isReconnecting=!1}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(this.isReconnecting)setImmediate(()=>{this._reconnect()});else throw this._connectionStatus="disconnected",e&&e.message?new Oa(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new Xd(this._socketPath)}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,n){this._eventEmitter.on(e,n)}once(e,n){this._eventEmitter.once(e,n)}removeListener(e,n){this._eventEmitter.removeListener(e,n)}_onDisconnect(e,n){this._connectionStatus="disconnected",super._onDisconnect(e,n)}disconnect(e,n){const r=e??_T;this._removeSocketListeners(),this.getStatus()!=="disconnected"&&this._closeSocketConnection(r,n),this._onDisconnect(r,n)}safeDisconnect(e,n){return zl(this,arguments,void 0,function*(r,i,s=!1,o=1e3){let a=0;yield zl(this,void 0,void 0,function*(){return new Promise(l=>{const c=setInterval(()=>{s&&a>=5&&this.clearQueues(),this.getPendingRequestQueueSize()===0&&this.getSentRequestsQueueSize()===0&&(clearInterval(c),l(!0)),a+=1},o)})}),this.disconnect(r,i)})}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((e,n)=>{e.deferredPromise.reject(new sx),this._sentRequestsQueue.delete(n)}),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout(()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1},this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new ix(this._reconnectOptions.maxAttempts))))}request(e){return zl(this,void 0,void 0,function*(){if(te(this._socketConnection))throw new Error("Connection is undefined");this.getStatus()==="disconnected"&&this.connect();const n=jn(e)?e[0].id:e.id;if(!n)throw new hx("Request Id not defined");if(this._sentRequestsQueue.has(n))throw new ox(n);const r=new pu;r.catch(s=>{this._eventEmitter.emit("error",s)});const i={payload:e,deferredPromise:r};if(this.getStatus()==="connecting")return this._pendingRequestsQueue.set(n,i),i.deferredPromise;this._sentRequestsQueue.set(n,i);try{this._sendToSocket(i.payload)}catch(s){this._sentRequestsQueue.delete(n),this._eventEmitter.emit("error",s)}return r})}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,n]of this._pendingRequestsQueue.entries())try{this._sendToSocket(n.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,n)}catch(r){this._pendingRequestsQueue.delete(e),this._eventEmitter.emit("error",r)}}_onMessage(e){const n=this._parseResponses(e);if(!(te(n)||n.length===0))for(const r of n){if(cl(r)&&r.method.endsWith("_subscription")){this._eventEmitter.emit("message",r);return}const i=pa(r)?r[0].id:r.id,s=this._sentRequestsQueue.get(i);if(!s)return;(pa(r)||Zr(r)||Jr(r))&&(this._eventEmitter.emit("message",r),s.deferredPromise.resolve(r)),this._sentRequestsQueue.delete(i)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach((n,r)=>{n.deferredPromise.reject(new Jd(e)),this._pendingRequestsQueue.delete(r)}),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((n,r)=>{n.deferredPromise.reject(new Jd(e)),this._sentRequestsQueue.delete(r)}),this._removeSocketListeners()}}const Rw=Object.freeze(Object.defineProperty({__proto__:null,ChunkResponseParser:Sw,Eip1193Provider:Wf,EventEmitter:Ff,SocketProvider:Tw,Web3DeferredPromise:pu,asciiToHex:dw,bytesToHex:pe,bytesToUint8Array:Jn,checkAddressCheckSum:eT,compareBlockNumbers:cT,convert:ol,convertScalarValue:ha,encodePacked:jf,ethUnitMap:il,format:F,fromAscii:GS,fromDecimal:FS,fromTwosComplement:uT,fromUtf8:lw,fromWei:KS,getStorageSlotNumForLongString:mT,hexToAscii:hw,hexToBytes:De,hexToNumber:Da,hexToNumberString:jS,hexToString:zS,hexToUtf8:sl,isAddress:tT,isBatchRequest:jn,isBatchResponse:pa,isBloom:nT,isContractAddressInBloom:sT,isContractInitOptions:Kr,isDataFormat:mr,isHex:XS,isHexStrict:YS,isInBloom:rT,isNullish:te,isPromise:vw,isResponseRpcError:Gf,isResponseWithError:Jr,isResponseWithNotification:cl,isResponseWithResult:Zr,isSubscriptionResult:Aw,isTopic:oT,isTopicInBloom:aT,isUint8Array:oi,isUserEthereumAddressInBloom:iT,isValidResponse:Vf,jsonRpc:vT,keccak256:Ls,keccak256Wrapper:Ls,leftPad:da,mergeDeep:ai,numberToHex:Ye,padLeft:Ms,padRight:gw,pollTillDefined:wT,pollTillDefinedAndReturnIntervalId:qf,processSolidityEncodePackedArgs:ww,randomBytes:fa,randomHex:bT,rejectIfConditionAtInterval:_w,rejectIfTimeout:Hf,rightPad:mw,setRequestIdStart:xw,sha3:Ma,sha3Raw:Xt,soliditySha3:pT,soliditySha3Raw:gT,stringToHex:qS,toAscii:VS,toBatchPayload:Kf,toBigInt:vi,toBool:fw,toChecksumAddress:Xn,toDecimal:US,toHex:Ir,toNumber:jt,toPayload:zi,toTwosComplement:yw,toUtf8:HS,toWei:WS,uint8ArrayConcat:Bt,uint8ArrayEquals:rl,utf8ToBytes:Uf,utf8ToHex:kn,uuidV4:zf,validateResponse:fu,waitWithTimeout:Ew},Symbol.toStringTag,{value:"Module"}));class ul{constructor(){this._emitter=new Ff}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,n){this._emitter.emit(e,n)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var Gi;(function(t){t.CONFIG_CHANGE="CONFIG_CHANGE"})(Gi||(Gi={}));class AT extends ul{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:750*1e3,transactionReceiptPollingInterval:void 0,transactionSendTimeout:750*1e3,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:Ir(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0,customTransactionSchema:void 0,defaultReturnFormat:At,ignoreGasPricing:!1},this.setConfig(e??{})}setConfig(e){const n=Object.keys(e);for(const r of n)this._triggerConfigChange(r,e[r]),!te(e[r])&&typeof e[r]=="number"&&r==="maxListenersWarningThreshold"&&this.setMaxListenerWarningThreshold(Number(e[r]));Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultReturnFormat(){return this.config.defaultReturnFormat}set defaultReturnFormat(e){this._triggerConfigChange("defaultReturnFormat",e),this.config.defaultReturnFormat=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!te(this.config.defaultCommon)&&!te(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new Rg(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!te(this.config.defaultCommon)&&!te(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new Tg(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!te(this.config.defaultHardfork)&&!te(e)&&!te(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new Tg(this.config.defaultHardfork,e.hardfork);if(!te(this.config.defaultChain)&&!te(e)&&!te(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new Rg(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get ignoreGasPricing(){return this.config.ignoreGasPricing}set ignoreGasPricing(e){this._triggerConfigChange("ignoreGasPricing",e),this.config.ignoreGasPricing=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}get customTransactionSchema(){return this.config.customTransactionSchema}set customTransactionSchema(e){this._triggerConfigChange("customTransactionSchema",e),this.config.customTransactionSchema=e}_triggerConfigChange(e,n){this.emit(Gi.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:n})}}var ec={exports:{}},zg;function xT(){return zg||(zg=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof un<"u"&&un,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof un<"u"&&un||{},u={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(v){return v&&DataView.prototype.isPrototypeOf(v)}if(u.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(v){return v&&c.indexOf(Object.prototype.toString.call(v))>-1};function h(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function g(v){return typeof v!="string"&&(v=String(v)),v}function f(v){var I={next:function(){var P=v.shift();return{done:P===void 0,value:P}}};return u.iterable&&(I[Symbol.iterator]=function(){return I}),I}function p(v){this.map={},v instanceof p?v.forEach(function(I,P){this.append(P,I)},this):Array.isArray(v)?v.forEach(function(I){if(I.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+I.length);this.append(I[0],I[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(I){this.append(I,v[I])},this)}p.prototype.append=function(v,I){v=h(v),I=g(I);var P=this.map[v];this.map[v]=P?P+", "+I:I},p.prototype.delete=function(v){delete this.map[h(v)]},p.prototype.get=function(v){return v=h(v),this.has(v)?this.map[v]:null},p.prototype.has=function(v){return this.map.hasOwnProperty(h(v))},p.prototype.set=function(v,I){this.map[h(v)]=g(I)},p.prototype.forEach=function(v,I){for(var P in this.map)this.map.hasOwnProperty(P)&&v.call(I,this.map[P],P,this)},p.prototype.keys=function(){var v=[];return this.forEach(function(I,P){v.push(P)}),f(v)},p.prototype.values=function(){var v=[];return this.forEach(function(I){v.push(I)}),f(v)},p.prototype.entries=function(){var v=[];return this.forEach(function(I,P){v.push([P,I])}),f(v)},u.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function m(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function y(v){return new Promise(function(I,P){v.onload=function(){I(v.result)},v.onerror=function(){P(v.error)}})}function w(v){var I=new FileReader,P=y(I);return I.readAsArrayBuffer(v),P}function b(v){var I=new FileReader,P=y(I),C=/charset=([A-Za-z0-9_-]+)/.exec(v.type),O=C?C[1]:"utf-8";return I.readAsText(v,O),P}function A(v){for(var I=new Uint8Array(v),P=new Array(I.length),C=0;C<I.length;C++)P[C]=String.fromCharCode(I[C]);return P.join("")}function E(v){if(v.slice)return v.slice(0);var I=new Uint8Array(v.byteLength);return I.set(new Uint8Array(v)),I.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:u.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:u.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():u.arrayBuffer&&u.blob&&l(v)?(this._bodyArrayBuffer=E(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||d(v))?this._bodyArrayBuffer=E(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=m(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var R=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function x(v){var I=v.toUpperCase();return R.indexOf(I)>-1?I:v}function S(v,I){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');I=I||{};var P=I.body;if(v instanceof S){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,I.headers||(this.headers=new p(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!P&&v._bodyInit!=null&&(P=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=I.credentials||this.credentials||"same-origin",(I.headers||!this.headers)&&(this.headers=new p(I.headers)),this.method=x(I.method||this.method||"GET"),this.mode=I.mode||this.mode||null,this.signal=I.signal||this.signal||function(){if("AbortController"in a){var D=new AbortController;return D.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(I.cache==="no-store"||I.cache==="no-cache")){var C=/([?&])_=[^&]*/;if(C.test(this.url))this.url=this.url.replace(C,"$1_="+new Date().getTime());else{var O=/\?/;this.url+=(O.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function T(v){var I=new FormData;return v.trim().split("&").forEach(function(P){if(P){var C=P.split("="),O=C.shift().replace(/\+/g," "),D=C.join("=").replace(/\+/g," ");I.append(decodeURIComponent(O),decodeURIComponent(D))}}),I}function B(v){var I=new p,P=v.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(C){return C.indexOf(`
`)===0?C.substr(1,C.length):C}).forEach(function(C){var O=C.split(":"),D=O.shift().trim();if(D){var $=O.join(":").trim();try{I.append(D,$)}catch(q){console.warn("Response "+q.message)}}}),I}_.call(S.prototype);function k(v,I){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(I||(I={}),this.type="default",this.status=I.status===void 0?200:I.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=I.statusText===void 0?"":""+I.statusText,this.headers=new p(I.headers),this.url=I.url||"",this._initBody(v)}_.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},k.error=function(){var v=new k(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var N=[301,302,303,307,308];k.redirect=function(v,I){if(N.indexOf(I)===-1)throw new RangeError("Invalid status code");return new k(null,{status:I,headers:{location:v}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(I,P){this.message=I,this.name=P;var C=Error(I);this.stack=C.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function M(v,I){return new Promise(function(P,C){var O=new S(v,I);if(O.signal&&O.signal.aborted)return C(new o.DOMException("Aborted","AbortError"));var D=new XMLHttpRequest;function $(){D.abort()}D.onload=function(){var H={statusText:D.statusText,headers:B(D.getAllResponseHeaders()||"")};O.url.indexOf("file://")===0&&(D.status<200||D.status>599)?H.status=200:H.status=D.status,H.url="responseURL"in D?D.responseURL:H.headers.get("X-Request-URL");var W="response"in D?D.response:D.responseText;setTimeout(function(){P(new k(W,H))},0)},D.onerror=function(){setTimeout(function(){C(new TypeError("Network request failed"))},0)},D.ontimeout=function(){setTimeout(function(){C(new TypeError("Network request timed out"))},0)},D.onabort=function(){setTimeout(function(){C(new o.DOMException("Aborted","AbortError"))},0)};function q(H){try{return H===""&&a.location.href?a.location.href:H}catch{return H}}if(D.open(O.method,q(O.url),!0),O.credentials==="include"?D.withCredentials=!0:O.credentials==="omit"&&(D.withCredentials=!1),"responseType"in D&&(u.blob?D.responseType="blob":u.arrayBuffer&&(D.responseType="arraybuffer")),I&&typeof I.headers=="object"&&!(I.headers instanceof p||a.Headers&&I.headers instanceof a.Headers)){var V=[];Object.getOwnPropertyNames(I.headers).forEach(function(H){V.push(h(H)),D.setRequestHeader(H,g(I.headers[H]))}),O.headers.forEach(function(H,W){V.indexOf(W)===-1&&D.setRequestHeader(W,H)})}else O.headers.forEach(function(H,W){D.setRequestHeader(W,H)});O.signal&&(O.signal.addEventListener("abort",$),D.onreadystatechange=function(){D.readyState===4&&O.signal.removeEventListener("abort",$)}),D.send(typeof O._bodyInit>"u"?null:O._bodyInit)})}return M.polyfill=!0,a.fetch||(a.fetch=M,a.Headers=p,a.Request=S,a.Response=k),o.Headers=p,o.Request=S,o.Response=k,o.fetch=M,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(ec,ec.exports)),ec.exports}var IT=xT();const ST=Na(IT);var TT=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class ll extends ka{constructor(e,n){if(super(),!ll.validateClientUrl(e))throw new Xd(e);this.clientUrl=e,this.httpProviderOptions=n}static validateClientUrl(e){return typeof e=="string"?/^http(s)?:\/\//i.test(e):!1}getStatus(){throw new er}supportsSubscriptions(){return!1}request(e,n){var r;return TT(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},(r=this.httpProviderOptions)===null||r===void 0?void 0:r.providerOptions),n),s=yield ST(this.clientUrl,Object.assign(Object.assign({},i),{method:"POST",headers:Object.assign(Object.assign({},i.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!s.ok)throw new zn(yield s.json(),void 0,void 0,s.status);return yield s.json()})}on(){throw new er}removeListener(){throw new er}once(){throw new er}removeAllListeners(){throw new er}connect(){throw new er}disconnect(){throw new er}reset(){throw new er}reconnect(){throw new er}}var ys=null;typeof WebSocket<"u"?ys=WebSocket:typeof MozWebSocket<"u"?ys=MozWebSocket:typeof global<"u"?ys=global.WebSocket||global.MozWebSocket:typeof window<"u"?ys=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ys=self.WebSocket||self.MozWebSocket);const RT=ys;class Bw extends Tw{constructor(e,n,r){super(e,n,r)}_validateProviderPath(e){return typeof e=="string"?/^ws(s)?:\/\//i.test(e):!1}getStatus(){if(this._socketConnection&&!te(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new RT(this._socketPath,void 0,this._socketOptions&&Object.keys(this._socketOptions).length===0?void 0:this._socketOptions)}_closeSocketConnection(e,n){var r;(r=this._socketConnection)===null||r===void 0||r.close(e,n)}_sendToSocket(e){var n;if(this.getStatus()==="disconnected")throw new Jd;(n=this._socketConnection)===null||n===void 0||n.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,n,r,i;(e=this._socketConnection)===null||e===void 0||e.addEventListener("open",this._onOpenHandler),(n=this._socketConnection)===null||n===void 0||n.addEventListener("message",this._onMessageHandler),(r=this._socketConnection)===null||r===void 0||r.addEventListener("close",s=>this._onCloseHandler(s)),(i=this._socketConnection)===null||i===void 0||i.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,n,r;(e=this._socketConnection)===null||e===void 0||e.removeEventListener("message",this._onMessageHandler),(n=this._socketConnection)===null||n===void 0||n.removeEventListener("open",this._onOpenHandler),(r=this._socketConnection)===null||r===void 0||r.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var n;if(this._reconnectOptions.autoReconnect&&(![1e3,1001].includes(e.code)||!e.wasClean)){this._reconnect();return}this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),(n=this._socketConnection)===null||n===void 0||n.removeEventListener("error",this._onErrorHandler)}}const Pw=t=>ka.isWeb3Provider(t),kw=t=>typeof t!="string"&&"request"in t&&t.request.constructor.name==="Function",Ow=t=>typeof t!="string"&&"request"in t&&t.request.constructor.name==="AsyncFunction",Cw=t=>typeof t!="string"&&"send"in t,Dw=t=>typeof t!="string"&&"sendAsync"in t,gu=t=>t&&(Pw(t)||Ow(t)||kw(t)||Dw(t)||Cw(t)),BT=t=>t&&"supportsSubscriptions"in t?t.supportsSubscriptions():!!(t&&typeof t!="string"&&"on"in t);var Gl=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})},$s;(function(t){t.PROVIDER_CHANGED="PROVIDER_CHANGED",t.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"})($s||($s={}));const Gg={HttpProvider:ll,WebsocketProvider:Bw};class Ci extends ul{constructor(e,n,r){super(),te(e)||this.setProvider(e),this.useRpcCallSpecification=n,te(r)||(this.middleware=r)}static get providers(){return Gg}get provider(){return this._provider}get providers(){return Gg}setProvider(e){let n;if(e&&typeof e=="string"&&this.providers)if(/^http(s)?:\/\//i.test(e))n=new this.providers.HttpProvider(e);else if(/^ws(s)?:\/\//i.test(e))n=new this.providers.WebsocketProvider(e);else throw new vc(`Can't autodetect provider for "${e}"`);else te(e)?n=void 0:n=e;return this.emit($s.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=n,this.emit($s.PROVIDER_CHANGED,this._provider),!0}setMiddleware(e){this.middleware=e}send(e){return Gl(this,void 0,void 0,function*(){const n=Object.assign({},e);let r=yield this._sendRequest(n);if(te(this.middleware)||(r=yield this.middleware.processResponse(r)),Zr(r))return r.result;throw new zn(r)})}sendBatch(e){return Gl(this,void 0,void 0,function*(){return yield this._sendRequest(e)})}_sendRequest(e){return Gl(this,void 0,void 0,function*(){const{provider:n}=this;if(te(n))throw new vc("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let r=jn(e)?Kf(e):zi(e);if(te(this.middleware)||(r=yield this.middleware.processRequest(r)),Pw(n)){let i;try{i=yield n.request(r)}catch(s){i=s}return this._processJsonRpcResponse(r,i,{legacy:!1,error:!1})}if(Ow(n))return n.request(r).then(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!1})).catch(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!0}));if(kw(n))return new Promise((i,s)=>{const o=l=>{s(this._processJsonRpcResponse(r,l,{legacy:!0,error:!0}))},a=l=>i(this._processJsonRpcResponse(r,l,{legacy:!0,error:!1})),u=n.request(r,(l,c)=>l?o(l):a(c));vw(u)&&u.then(a).catch(c=>{try{const d=this._processJsonRpcResponse(r,c,{legacy:!0,error:!0});s(d)}catch(d){s(d)}})});if(Cw(n))return new Promise((i,s)=>{n.send(r,(o,a)=>{if(o)return s(this._processJsonRpcResponse(r,o,{legacy:!0,error:!0}));if(te(a))throw new zn({},'Got a "nullish" response from provider.');return i(this._processJsonRpcResponse(r,a,{legacy:!0,error:!1}))})});if(Dw(n))return n.sendAsync(r).then(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!1})).catch(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!0}));throw new vc("Provider does not have a request or send method to use.")})}_processJsonRpcResponse(e,n,{legacy:r,error:i}){if(te(n))return this._buildResponse(e,null,i);if(Jr(n)){if(this.useRpcCallSpecification&&Gf(n)){const s=n;if(Tt.get(s.error.code)){const o=Tt.get(s.error.code).error;throw new o(s)}else throw new en(s)}else if(!Ci._isReverted(n))throw new Ju(n,e)}if(Zr(n))return n;if(n instanceof Error)throw Ci._isReverted(n),n;if(!r&&jn(e)&&pa(n)||r&&!i&&jn(e))return n;if(r&&i&&jn(e))throw n;if(r&&!Jr(n)&&!Zr(n))return this._buildResponse(e,n,i);throw jn(e)&&!Array.isArray(n)?new zn(n,"Got normal response for a batch request."):!jn(e)&&Array.isArray(n)?new zn(n,"Got batch response for a normal request."):new zn(n,"Invalid response")}static _isReverted(e){let n;if(Jr(e)?n=e.error:e instanceof Error&&(n=e),n?.message.includes("revert"))throw new ki(n);return!1}_buildResponse(e,n,r){const i={jsonrpc:"2.0",id:jn(e)?e[0].id:"id"in e?e.id:null};return r?Object.assign(Object.assign({},i),{error:n}):Object.assign(Object.assign({},i),{result:n})}}var fo=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class mu{constructor(e,n,r=!1){this.requestManager=e,this.registeredSubscriptions=n,this.tolerateUnlinkedSubscription=r,this._subscriptions=new Map,this.requestManager.on($s.BEFORE_PROVIDER_CHANGE,()=>fo(this,void 0,void 0,function*(){yield this.unsubscribe()})),this.requestManager.on($s.PROVIDER_CHANGED,()=>{this.clear(),this.listenToProviderEvents()}),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;!this.requestManager.provider||typeof e?.supportsSubscriptions=="function"&&!e?.supportsSubscriptions()||typeof this.requestManager.provider.on=="function"&&(typeof this.requestManager.provider.request=="function"?this.requestManager.provider.on("message",n=>this.messageListener(n)):e.on("data",n=>this.messageListener(n)))}messageListener(e){var n,r,i;if(!e)throw new pr("Should not call messageListener with no data. Type was");const s=((n=e.params)===null||n===void 0?void 0:n.subscription)||((r=e.data)===null||r===void 0?void 0:r.subscription)||((i=e.id)===null||i===void 0?void 0:i.toString(16));if(s){const o=this._subscriptions.get(s);o?.processSubscriptionData(e)}}subscribe(e,n){return fo(this,arguments,void 0,function*(r,i,s=At){const o=this.registeredSubscriptions[r];if(!o)throw new pr("Invalid subscription type");const a=new o(i??void 0,{subscriptionManager:this,returnFormat:s});return yield this.addSubscription(a),a})}get subscriptions(){return this._subscriptions}addSubscription(e){return fo(this,void 0,void 0,function*(){if(!this.requestManager.provider)throw new vc("Provider not available");if(!this.supportsSubscriptions())throw new pr("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new pr(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),te(e.id))throw new pr("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id})}removeSubscription(e){return fo(this,void 0,void 0,function*(){const{id:n}=e;if(te(n))throw new pr("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(n)&&!this.tolerateUnlinkedSubscription)throw new pr(`Subscription with id "${n.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(n),n})}unsubscribe(e){return fo(this,void 0,void 0,function*(){const n=[];for(const[r,i]of this.subscriptions.entries())(!e||typeof e=="function"&&e({id:r,sub:i}))&&n.push(this.removeSubscription(i));return Promise.all(n)})}clear(){this._subscriptions.clear()}supportsSubscriptions(){return te(this.requestManager.provider)?!1:BT(this.requestManager.provider)}}var po=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class La extends ul{constructor(e,n){var r;super(),this.args=e;const{requestManager:i}=n,{subscriptionManager:s}=n;i?this._subscriptionManager=new mu(i,{},!0):this._subscriptionManager=s,this._returnFormat=(r=n?.returnFormat)!==null&&r!==void 0?r:At}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return po(this,void 0,void 0,function*(){return this._subscriptionManager.addSubscription(this)})}processSubscriptionData(e){var n,r;e?.data?this._processSubscriptionResult((r=(n=e?.data)===null||n===void 0?void 0:n.result)!==null&&r!==void 0?r:e?.data):e&&cl(e)&&this._processSubscriptionResult(e?.params.result)}sendSubscriptionRequest(){return po(this,void 0,void 0,function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id})}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return po(this,void 0,void 0,function*(){yield this.unsubscribe(),yield this.subscribe()})}unsubscribe(){return po(this,void 0,void 0,function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))})}sendUnsubscribeRequest(){return po(this,void 0,void 0,function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0})}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var ss=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class yu extends hA{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(n){return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&!L(e)&&e.length!==0?e:void 0}}create(e){for(let n=0;n<e;n+=1)this.add(this._accountProvider.create());return this}add(e){var n;if(typeof e=="string")return this.add(this._accountProvider.privateKeyToAccount(e));let r=this.length;return this.get(e.address)&&(console.warn(`Account ${e.address.toLowerCase()} already exists.`),r=(n=this._addressMap.get(e.address.toLowerCase()))!==null&&n!==void 0?n:r),this._addressMap.set(e.address.toLowerCase(),r),this[r]=e,this}get(e){if(typeof e=="string"){const n=this._addressMap.get(e.toLowerCase());return L(n)?void 0:this[n]}return this[e]}remove(e){if(typeof e=="string"){const n=this._addressMap.get(e.toLowerCase());return L(n)?!1:(this._addressMap.delete(e.toLowerCase()),this.splice(n,1),!0)}return this[e]?(this.splice(e,1),!0):!1}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,n){return ss(this,void 0,void 0,function*(){return Promise.all(this.map(r=>ss(this,void 0,void 0,function*(){return r.encrypt(e,n)})))})}decrypt(e,n,r){return ss(this,void 0,void 0,function*(){const i=yield Promise.all(e.map(s=>ss(this,void 0,void 0,function*(){return this._accountProvider.decrypt(s,n,r)})));for(const s of i)this.add(s);return this})}save(e,n){return ss(this,void 0,void 0,function*(){const r=yu.getStorage();if(!r)throw new Error("Local storage not available.");return r.setItem(n??this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0})}load(e,n){return ss(this,void 0,void 0,function*(){const r=yu.getStorage();if(!r)throw new Error("Local storage not available.");const i=r.getItem(n??this._defaultKeyName);return i&&(yield this.decrypt(JSON.parse(i)||[],e)),this})}}const Kn={web:Ec};function Nw(t,e,n){if(!n.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${n}`);if(e.length!==16)throw new Error("AES: wrong IV length");if(n.startsWith("aes-128")&&t.length!==16||n.startsWith("aes-256")&&t.length!==32)throw new Error("AES: wrong key length")}async function Mw(t,e,n){if(!Kn.web)throw new Error("Browser crypto not available.");let r;if(["aes-128-cbc","aes-256-cbc"].includes(t)&&(r="cbc"),["aes-128-ctr","aes-256-ctr"].includes(t)&&(r="ctr"),!r)throw new Error("AES: unsupported mode");return[await Kn.web.subtle.importKey("raw",e,{name:`AES-${r.toUpperCase()}`,length:e.length*8},!0,["encrypt","decrypt"]),{name:`aes-${r}`,iv:n,counter:n,length:128}]}async function Qf(t,e,n,r="aes-128-ctr",i=!0){if(Nw(e,n,r),Kn.web){const[s,o]=await Mw(r,e,n),a=await Kn.web.subtle.encrypt(o,s,t);let u=new Uint8Array(a);return!i&&o.name==="aes-cbc"&&!(t.length%16)&&(u=u.slice(0,-16)),u}else if(Kn.node){const s=Kn.node.createCipheriv(r,e,n);return s.setAutoPadding(i),tu(s.update(t),s.final())}else throw new Error("The environment doesn't have AES module")}async function PT(t,e,n,r){const i=t.slice(-16);for(let o=0;o<16;o++)i[o]^=n[o]^16;return(await Qf(i,e,n,r)).slice(0,16)}async function kT(t,e,n,r="aes-128-ctr",i=!0){if(Nw(e,n,r),Kn.web){const[s,o]=await Mw(r,e,n);if(!i&&o.name==="aes-cbc"){const l=await PT(t,e,n,r);t=tu(t,l)}const a=await Kn.web.subtle.decrypt(o,s,t),u=new Uint8Array(a);if(o.name==="aes-cbc"){const l=await Qf(u,e,n,r);if(!xI(l,t))throw new Error("AES: wrong padding")}return u}else if(Kn.node){const s=Kn.node.createDecipheriv(r,e,n);return s.setAutoPadding(i),tu(s.update(t),s.final())}else throw new Error("The environment doesn't have AES module")}class Lw extends Of{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Pf(e);const r=Ps(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return $i(this),this.iHash.update(e),this}digestInto(e){$i(this),Js(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Zf=(t,e,n)=>new Lw(t,e).update(n).digest();Zf.create=(t,e)=>new Lw(t,e);function OT(t,e,n,r){Pf(t);const i=Lb({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Ut(s),Ut(o),Ut(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const u=Ps(e),l=Ps(n),c=new Uint8Array(o),d=Zf.create(t,u),h=d._cloneInto().update(l);return{c:s,dkLen:o,asyncTick:a,DK:c,PRF:d,PRFSalt:h}}function CT(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}function Jf(t,e,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:u}=OT(t,e,n,r);let l;const c=new Uint8Array(4),d=Ac(c),h=new Uint8Array(a.outputLen);for(let g=1,f=0;f<s;g++,f+=a.outputLen){const p=o.subarray(f,f+a.outputLen);d.setInt32(0,g,!1),(l=u._cloneInto(l)).update(c).digestInto(h),p.set(h.subarray(0,p.length));for(let m=1;m<i;m++){a._cloneInto(l).update(h).digestInto(h);for(let y=0;y<p.length;y++)p[y]^=h[y]}}return CT(a,u,o,l,h)}function DT(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),u=r?4:0,l=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+l,a,r)}const NT=(t,e,n)=>t&e^~t&n,MT=(t,e,n)=>t&e^t&n^e&n;class LT extends Of{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ac(this.buffer)}update(e){$i(this);const{view:n,buffer:r,blockLen:i}=this;e=Ps(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=Ac(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$i(this),kf(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;DT(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Ac(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,c[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const $T=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Or=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cr=new Uint32Array(64);class UT extends LT{constructor(){super(64,32,8,!1),this.A=Or[0]|0,this.B=Or[1]|0,this.C=Or[2]|0,this.D=Or[3]|0,this.E=Or[4]|0,this.F=Or[5]|0,this.G=Or[6]|0,this.H=Or[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:u}=this;return[e,n,r,i,s,o,a,u]}set(e,n,r,i,s,o,a,u){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,n){for(let d=0;d<16;d++,n+=4)Cr[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Cr[d-15],g=Cr[d-2],f=Cn(h,7)^Cn(h,18)^h>>>3,p=Cn(g,17)^Cn(g,19)^g>>>10;Cr[d]=p+Cr[d-7]+f+Cr[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:u,G:l,H:c}=this;for(let d=0;d<64;d++){const h=Cn(a,6)^Cn(a,11)^Cn(a,25),g=c+h+NT(a,u,l)+$T[d]+Cr[d]|0,p=(Cn(r,2)^Cn(r,13)^Cn(r,22))+MT(r,i,s)|0;c=l,l=u,u=a,a=o+g|0,o=s,s=i,i=r,r=g+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,s,o,a,u,l,c)}roundClean(){Cr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const dl=$b(()=>new UT);function $w(t,e,n,r,i){if(!["sha256","sha512"].includes(i))throw new Error("Only sha256 and sha512 are supported");return nu(t),nu(e),Jf(dl,t,e,{c:n,dkLen:r})}function Vg(t,e,n,r,i,s){let o=t[e++]^n[r++],a=t[e++]^n[r++],u=t[e++]^n[r++],l=t[e++]^n[r++],c=t[e++]^n[r++],d=t[e++]^n[r++],h=t[e++]^n[r++],g=t[e++]^n[r++],f=t[e++]^n[r++],p=t[e++]^n[r++],m=t[e++]^n[r++],y=t[e++]^n[r++],w=t[e++]^n[r++],b=t[e++]^n[r++],A=t[e++]^n[r++],E=t[e++]^n[r++],_=o,R=a,x=u,S=l,T=c,B=d,k=h,N=g,M=f,v=p,I=m,P=y,C=w,O=b,D=A,$=E;for(let q=0;q<8;q+=2)T^=Ee(_+C|0,7),M^=Ee(T+_|0,9),C^=Ee(M+T|0,13),_^=Ee(C+M|0,18),v^=Ee(B+R|0,7),O^=Ee(v+B|0,9),R^=Ee(O+v|0,13),B^=Ee(R+O|0,18),D^=Ee(I+k|0,7),x^=Ee(D+I|0,9),k^=Ee(x+D|0,13),I^=Ee(k+x|0,18),S^=Ee($+P|0,7),N^=Ee(S+$|0,9),P^=Ee(N+S|0,13),$^=Ee(P+N|0,18),R^=Ee(_+S|0,7),x^=Ee(R+_|0,9),S^=Ee(x+R|0,13),_^=Ee(S+x|0,18),k^=Ee(B+T|0,7),N^=Ee(k+B|0,9),T^=Ee(N+k|0,13),B^=Ee(T+N|0,18),P^=Ee(I+v|0,7),M^=Ee(P+I|0,9),v^=Ee(M+P|0,13),I^=Ee(v+M|0,18),C^=Ee($+D|0,7),O^=Ee(C+$|0,9),D^=Ee(O+C|0,13),$^=Ee(D+O|0,18);i[s++]=o+_|0,i[s++]=a+R|0,i[s++]=u+x|0,i[s++]=l+S|0,i[s++]=c+T|0,i[s++]=d+B|0,i[s++]=h+k|0,i[s++]=g+N|0,i[s++]=f+M|0,i[s++]=p+v|0,i[s++]=m+I|0,i[s++]=y+P|0,i[s++]=w+C|0,i[s++]=b+O|0,i[s++]=A+D|0,i[s++]=E+$|0}function Vl(t,e,n,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)n[o+a]=t[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)Vg(n,o,t,e,n,s),a>0&&(o+=16),Vg(n,s,t,e+=16,n,o)}function FT(t,e,n){const r=Lb({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:i,r:s,p:o,dkLen:a,asyncTick:u,maxmem:l,onProgress:c}=r;if(Ut(i),Ut(s),Ut(o),Ut(a),Ut(u),Ut(l),c!==void 0&&typeof c!="function")throw new Error("progressCb should be function");const d=128*s,h=d/4;if(i<=1||(i&i-1)!==0||i>=2**(d/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=d*(i+o);if(g>l)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${l} (maxmem)`);const f=Jf(dl,t,e,{c:1,dkLen:d*o}),p=_c(f),m=_c(new Uint8Array(d*i)),y=_c(new Uint8Array(d));let w=()=>{};if(c){const b=2*i*o,A=Math.max(Math.floor(b/1e4),1);let E=0;w=()=>{E++,c&&(!(E%A)||E===b)&&c(E/b)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:h,V:m,B32:p,B:f,tmp:y,blockMixCb:w,asyncTick:u}}function jT(t,e,n,r,i){const s=Jf(dl,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),i.fill(0),s}function qT(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:u,B32:l,B:c,tmp:d,blockMixCb:h}=FT(t,e,n);Xc||eu(l);for(let g=0;g<s;g++){const f=a*g;for(let p=0;p<a;p++)u[p]=l[f+p];for(let p=0,m=0;p<r-1;p++)Vl(u,m,u,m+=a,i),h();Vl(u,(r-1)*a,l,f,i),h();for(let p=0;p<r;p++){const m=l[f+a-16]%r;for(let y=0;y<a;y++)d[y]=l[f+y]^u[m*a+y];Vl(d,0,l,f,i),h()}}return Xc||eu(l),jT(t,o,c,u,d)}function Uw(t,e,n,r,i,s,o){return nu(t),nu(e),qT(t,e,{N:n,r:i,p:r,dkLen:s,onProgress:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fw=BigInt(0),hl=BigInt(1),HT=BigInt(2);function Vi(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function $a(t){if(!Vi(t))throw new Error("Uint8Array expected")}const zT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Us(t){$a(t);let e="";for(let n=0;n<t.length;n++)e+=zT[t[n]];return e}function jw(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Yf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const nr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Kg(t){if(t>=nr._0&&t<=nr._9)return t-nr._0;if(t>=nr._A&&t<=nr._F)return t-(nr._A-10);if(t>=nr._a&&t<=nr._f)return t-(nr._a-10)}function Fs(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Kg(t.charCodeAt(s)),a=Kg(t.charCodeAt(s+1));if(o===void 0||a===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+a}return r}function Di(t){return Yf(Us(t))}function Xf(t){return $a(t),Yf(Us(Uint8Array.from(t).reverse()))}function js(t,e){return Fs(t.toString(16).padStart(e*2,"0"))}function ep(t,e){return js(t,e).reverse()}function GT(t){return Fs(jw(t))}function In(t,e,n){let r;if(typeof e=="string")try{r=Fs(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Vi(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function ga(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];$a(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function VT(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function KT(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function WT(t){let e;for(e=0;t>Fw;t>>=hl,e+=1);return e}function QT(t,e){return t>>BigInt(e)&hl}function ZT(t,e,n){return t|(n?hl:Fw)<<BigInt(e)}const tp=t=>(HT<<BigInt(t-1))-hl,Kl=t=>new Uint8Array(t),Wg=t=>Uint8Array.from(t);function qw(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Kl(t),i=Kl(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),u=(d=Kl())=>{i=a(Wg([0]),d),r=a(),d.length!==0&&(i=a(Wg([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const g=r.slice();h.push(g),d+=r.length}return ga(...h)};return(d,h)=>{o(),u(d);let g;for(;!(g=h(l()));)u();return o(),g}}const JT={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Vi(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Ua(t,e,n={}){const r=(i,s,o)=>{const a=JT[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const u=t[i];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const YT=Object.freeze(Object.defineProperty({__proto__:null,abytes:$a,bitGet:QT,bitLen:WT,bitMask:tp,bitSet:ZT,bytesToHex:Us,bytesToNumberBE:Di,bytesToNumberLE:Xf,concatBytes:ga,createHmacDrbg:qw,ensureBytes:In,equalBytes:VT,hexToBytes:Fs,hexToNumber:Yf,isBytes:Vi,numberToBytesBE:js,numberToBytesLE:ep,numberToHexUnpadded:jw,numberToVarBytesBE:GT,utf8ToBytes:KT,validateObject:Ua},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const st=BigInt(0),qe=BigInt(1),yi=BigInt(2),XT=BigInt(3),uh=BigInt(4),Qg=BigInt(5),Zg=BigInt(8);BigInt(9);BigInt(16);function Lt(t,e){const n=t%e;return n>=st?n:e+n}function e3(t,e,n){if(n<=st||e<st)throw new Error("Expected power/modulo > 0");if(n===qe)return st;let r=qe;for(;e>st;)e&qe&&(r=r*t%n),t=t*t%n,e>>=qe;return r}function tn(t,e,n){let r=t;for(;e-- >st;)r*=r,r%=n;return r}function lh(t,e){if(t===st||e<=st)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Lt(t,e),r=e,i=st,s=qe;for(;n!==st;){const a=r/n,u=r%n,l=i-s*a;r=n,n=u,i=s,s=l}if(r!==qe)throw new Error("invert: does not exist");return Lt(i,e)}function t3(t){const e=(t-qe)/yi;let n,r,i;for(n=t-qe,r=0;n%yi===st;n/=yi,r++);for(i=yi;i<t&&e3(i,e,t)!==t-qe;i++);if(r===1){const o=(t+qe)/uh;return function(u,l){const c=u.pow(l,o);if(!u.eql(u.sqr(c),l))throw new Error("Cannot find square root");return c}}const s=(n+qe)/yi;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,c=a.pow(a.mul(a.ONE,i),n),d=a.pow(u,s),h=a.pow(u,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let g=1;for(let p=a.sqr(h);g<l&&!a.eql(p,a.ONE);g++)p=a.sqr(p);const f=a.pow(c,qe<<BigInt(l-g-1));c=a.sqr(f),d=a.mul(d,f),h=a.mul(h,c),l=g}return d}}function n3(t){if(t%uh===XT){const e=(t+qe)/uh;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Zg===Qg){const e=(t-Qg)/Zg;return function(r,i){const s=r.mul(i,yi),o=r.pow(s,e),a=r.mul(i,o),u=r.mul(r.mul(a,yi),o),l=r.mul(a,r.sub(u,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return t3(t)}const r3=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function i3(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=r3.reduce((r,i)=>(r[i]="function",r),e);return Ua(t,n)}function s3(t,e,n){if(n<st)throw new Error("Expected power > 0");if(n===st)return t.ONE;if(n===qe)return e;let r=t.ONE,i=e;for(;n>st;)n&qe&&(r=t.mul(r,i)),i=t.sqr(i),n>>=qe;return r}function o3(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Hw(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function a3(t,e,n=!1,r={}){if(t<=st)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Hw(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=n3(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:tp(i),ZERO:st,ONE:qe,create:u=>Lt(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return st<=u&&u<t},is0:u=>u===st,isOdd:u=>(u&qe)===qe,neg:u=>Lt(-u,t),eql:(u,l)=>u===l,sqr:u=>Lt(u*u,t),add:(u,l)=>Lt(u+l,t),sub:(u,l)=>Lt(u-l,t),mul:(u,l)=>Lt(u*l,t),pow:(u,l)=>s3(a,u,l),div:(u,l)=>Lt(u*lh(l,t),t),sqrN:u=>u*u,addN:(u,l)=>u+l,subN:(u,l)=>u-l,mulN:(u,l)=>u*l,inv:u=>lh(u,t),sqrt:r.sqrt||(u=>o(a,u)),invertBatch:u=>o3(a,u),cmov:(u,l,c)=>c?l:u,toBytes:u=>n?ep(u,s):js(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return n?Xf(u):Di(u)}});return Object.freeze(a)}function zw(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Gw(t){const e=zw(t);return e+Math.ceil(e/2)}function c3(t,e,n=!1){const r=t.length,i=zw(e),s=Gw(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Di(t):Xf(t),a=Lt(o,e-qe)+qe;return n?ep(a,i):js(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u3=BigInt(0),Wl=BigInt(1);function l3(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>u3;)s&Wl&&(o=o.add(a)),a=a.double(),s>>=Wl;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),u=[];let l=i,c=l;for(let d=0;d<o;d++){c=l,u.push(c);for(let h=1;h<a;h++)c=c.add(l),u.push(c);l=c.double()}return u},wNAF(i,s,o){const{windows:a,windowSize:u}=r(i);let l=t.ZERO,c=t.BASE;const d=BigInt(2**i-1),h=2**i,g=BigInt(i);for(let f=0;f<a;f++){const p=f*u;let m=Number(o&d);o>>=g,m>u&&(m-=h,o+=Wl);const y=p,w=p+Math.abs(m)-1,b=f%2!==0,A=m<0;m===0?c=c.add(n(b,s[y])):l=l.add(n(A,s[w]))}return{p:l,f:c}},wNAFCached(i,s,o,a){const u=i._WINDOW_SIZE||1;let l=s.get(i);return l||(l=this.precomputeWindow(i,u),u!==1&&s.set(i,a(l))),this.wNAF(u,l,o)}}}function Vw(t){return i3(t.Fp),Ua(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Hw(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function d3(t){const e=Vw(t);Ua(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:h3,hexToBytes:f3}=YT,Ei={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Ei;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:h3(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Ei,n=typeof t=="string"?f3(t):t;$a(n);let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Ei._parseInt(n.subarray(2)),{d:o,l:a}=Ei._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const c=l.toString(16);return c.length&1?`0${c}`:c},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),u=n(o);return`30${n(o+s+4)}02${u}${i}02${a}${r}`}},wr=BigInt(0),on=BigInt(1);BigInt(2);const Jg=BigInt(3);BigInt(4);function p3(t){const e=d3(t),{Fp:n}=e,r=e.toBytes||((f,p,m)=>{const y=p.toAffine();return ga(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),i=e.fromBytes||(f=>{const p=f.subarray(1),m=n.fromBytes(p.subarray(0,n.BYTES)),y=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:m,y}});function s(f){const{a:p,b:m}=e,y=n.sqr(f),w=n.mul(y,f);return n.add(n.add(w,n.mul(f,p)),m)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(f){return typeof f=="bigint"&&wr<f&&f<e.n}function a(f){if(!o(f))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(f){const{allowedPrivateKeyLengths:p,nByteLength:m,wrapPrivateKey:y,n:w}=e;if(p&&typeof f!="bigint"){if(Vi(f)&&(f=Us(f)),typeof f!="string"||!p.includes(f.length))throw new Error("Invalid key");f=f.padStart(m*2,"0")}let b;try{b=typeof f=="bigint"?f:Di(In("private key",f,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof f}`)}return y&&(b=Lt(b,w)),a(b),b}const l=new Map;function c(f){if(!(f instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(p,m,y){if(this.px=p,this.py=m,this.pz=y,p==null||!n.isValid(p))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(p){const{x:m,y}=p||{};if(!p||!n.isValid(m)||!n.isValid(y))throw new Error("invalid affine point");if(p instanceof d)throw new Error("projective point not allowed");const w=b=>n.eql(b,n.ZERO);return w(m)&&w(y)?d.ZERO:new d(m,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const m=n.invertBatch(p.map(y=>y.pz));return p.map((y,w)=>y.toAffine(m[w])).map(d.fromAffine)}static fromHex(p){const m=d.fromAffine(i(In("pointHex",p)));return m.assertValidity(),m}static fromPrivateKey(p){return d.BASE.multiply(u(p))}_setWindowSize(p){this._WINDOW_SIZE=p,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:p,y:m}=this.toAffine();if(!n.isValid(p)||!n.isValid(m))throw new Error("bad point: x or y not FE");const y=n.sqr(m),w=s(p);if(!n.eql(y,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){c(p);const{px:m,py:y,pz:w}=this,{px:b,py:A,pz:E}=p,_=n.eql(n.mul(m,E),n.mul(b,w)),R=n.eql(n.mul(y,E),n.mul(A,w));return _&&R}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:m}=e,y=n.mul(m,Jg),{px:w,py:b,pz:A}=this;let E=n.ZERO,_=n.ZERO,R=n.ZERO,x=n.mul(w,w),S=n.mul(b,b),T=n.mul(A,A),B=n.mul(w,b);return B=n.add(B,B),R=n.mul(w,A),R=n.add(R,R),E=n.mul(p,R),_=n.mul(y,T),_=n.add(E,_),E=n.sub(S,_),_=n.add(S,_),_=n.mul(E,_),E=n.mul(B,E),R=n.mul(y,R),T=n.mul(p,T),B=n.sub(x,T),B=n.mul(p,B),B=n.add(B,R),R=n.add(x,x),x=n.add(R,x),x=n.add(x,T),x=n.mul(x,B),_=n.add(_,x),T=n.mul(b,A),T=n.add(T,T),x=n.mul(T,B),E=n.sub(E,x),R=n.mul(T,S),R=n.add(R,R),R=n.add(R,R),new d(E,_,R)}add(p){c(p);const{px:m,py:y,pz:w}=this,{px:b,py:A,pz:E}=p;let _=n.ZERO,R=n.ZERO,x=n.ZERO;const S=e.a,T=n.mul(e.b,Jg);let B=n.mul(m,b),k=n.mul(y,A),N=n.mul(w,E),M=n.add(m,y),v=n.add(b,A);M=n.mul(M,v),v=n.add(B,k),M=n.sub(M,v),v=n.add(m,w);let I=n.add(b,E);return v=n.mul(v,I),I=n.add(B,N),v=n.sub(v,I),I=n.add(y,w),_=n.add(A,E),I=n.mul(I,_),_=n.add(k,N),I=n.sub(I,_),x=n.mul(S,v),_=n.mul(T,N),x=n.add(_,x),_=n.sub(k,x),x=n.add(k,x),R=n.mul(_,x),k=n.add(B,B),k=n.add(k,B),N=n.mul(S,N),v=n.mul(T,v),k=n.add(k,N),N=n.sub(B,N),N=n.mul(S,N),v=n.add(v,N),B=n.mul(k,v),R=n.add(R,B),B=n.mul(I,v),_=n.mul(M,_),_=n.sub(_,B),B=n.mul(M,k),x=n.mul(I,x),x=n.add(x,B),new d(_,R,x)}subtract(p){return this.add(p.negate())}is0(){return this.equals(d.ZERO)}wNAF(p){return g.wNAFCached(this,l,p,m=>{const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,b)=>w.toAffine(y[b])).map(d.fromAffine)})}multiplyUnsafe(p){const m=d.ZERO;if(p===wr)return m;if(a(p),p===on)return this;const{endo:y}=e;if(!y)return g.unsafeLadder(this,p);let{k1neg:w,k1:b,k2neg:A,k2:E}=y.splitScalar(p),_=m,R=m,x=this;for(;b>wr||E>wr;)b&on&&(_=_.add(x)),E&on&&(R=R.add(x)),x=x.double(),b>>=on,E>>=on;return w&&(_=_.negate()),A&&(R=R.negate()),R=new d(n.mul(R.px,y.beta),R.py,R.pz),_.add(R)}multiply(p){a(p);let m=p,y,w;const{endo:b}=e;if(b){const{k1neg:A,k1:E,k2neg:_,k2:R}=b.splitScalar(m);let{p:x,f:S}=this.wNAF(E),{p:T,f:B}=this.wNAF(R);x=g.constTimeNegate(A,x),T=g.constTimeNegate(_,T),T=new d(n.mul(T.px,b.beta),T.py,T.pz),y=x.add(T),w=S.add(B)}else{const{p:A,f:E}=this.wNAF(m);y=A,w=E}return d.normalizeZ([y,w])[0]}multiplyAndAddUnsafe(p,m,y){const w=d.BASE,b=(E,_)=>_===wr||_===on||!E.equals(w)?E.multiplyUnsafe(_):E.multiply(_),A=b(this,m).add(b(p,y));return A.is0()?void 0:A}toAffine(p){const{px:m,py:y,pz:w}=this,b=this.is0();p==null&&(p=b?n.ONE:n.inv(w));const A=n.mul(m,p),E=n.mul(y,p),_=n.mul(w,p);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:A,y:E}}isTorsionFree(){const{h:p,isTorsionFree:m}=e;if(p===on)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:m}=e;return p===on?this:m?m(d,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),r(d,this,p)}toHex(p=!0){return Us(this.toRawBytes(p))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,g=l3(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function g3(t){const e=Vw(t);return Ua(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function m3(t){const e=g3(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(v){return wr<v&&v<n.ORDER}function a(v){return Lt(v,r)}function u(v){return lh(v,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:h}=p3({...e,toBytes(v,I,P){const C=I.toAffine(),O=n.toBytes(C.x),D=ga;return P?D(Uint8Array.from([I.hasEvenY()?2:3]),O):D(Uint8Array.from([4]),O,n.toBytes(C.y))},fromBytes(v){const I=v.length,P=v[0],C=v.subarray(1);if(I===i&&(P===2||P===3)){const O=Di(C);if(!o(O))throw new Error("Point is not on curve");const D=d(O);let $;try{$=n.sqrt(D)}catch(H){const W=H instanceof Error?": "+H.message:"";throw new Error("Point is not on curve"+W)}const q=($&on)===on;return(P&1)===1!==q&&($=n.neg($)),{x:O,y:$}}else if(I===s&&P===4){const O=n.fromBytes(C.subarray(0,n.BYTES)),D=n.fromBytes(C.subarray(n.BYTES,2*n.BYTES));return{x:O,y:D}}else throw new Error(`Point of length ${I} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=v=>Us(js(v,e.nByteLength));function f(v){const I=r>>on;return v>I}function p(v){return f(v)?a(-v):v}const m=(v,I,P)=>Di(v.slice(I,P));class y{constructor(I,P,C){this.r=I,this.s=P,this.recovery=C,this.assertValidity()}static fromCompact(I){const P=e.nByteLength;return I=In("compactSignature",I,P*2),new y(m(I,0,P),m(I,P,2*P))}static fromDER(I){const{r:P,s:C}=Ei.toSig(In("DER",I));return new y(P,C)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(I){return new y(this.r,this.s,I)}recoverPublicKey(I){const{r:P,s:C,recovery:O}=this,D=R(In("msgHash",I));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const $=O===2||O===3?P+e.n:P;if($>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=(O&1)===0?"02":"03",V=l.fromHex(q+g($)),H=u($),W=a(-D*H),X=a(C*H),he=l.BASE.multiplyAndAddUnsafe(V,W,X);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Fs(this.toDERHex())}toDERHex(){return Ei.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Fs(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const w={isValidPrivateKey(v){try{return c(v),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const v=Gw(e.n);return c3(e.randomBytes(v),e.n)},precompute(v=8,I=l.BASE){return I._setWindowSize(v),I.multiply(BigInt(3)),I}};function b(v,I=!0){return l.fromPrivateKey(v).toRawBytes(I)}function A(v){const I=Vi(v),P=typeof v=="string",C=(I||P)&&v.length;return I?C===i||C===s:P?C===2*i||C===2*s:v instanceof l}function E(v,I,P=!0){if(A(v))throw new Error("first arg must be private key");if(!A(I))throw new Error("second arg must be public key");return l.fromHex(I).multiply(c(v)).toRawBytes(P)}const _=e.bits2int||function(v){const I=Di(v),P=v.length*8-e.nBitLength;return P>0?I>>BigInt(P):I},R=e.bits2int_modN||function(v){return a(_(v))},x=tp(e.nBitLength);function S(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(wr<=v&&v<x))throw new Error(`bigint expected < 2^${e.nBitLength}`);return js(v,e.nByteLength)}function T(v,I,P=B){if(["recovered","canonical"].some(ae=>ae in P))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:O}=e;let{lowS:D,prehash:$,extraEntropy:q}=P;D==null&&(D=!0),v=In("msgHash",v),$&&(v=In("prehashed msgHash",C(v)));const V=R(v),H=c(I),W=[S(H),S(V)];if(q!=null&&q!==!1){const ae=q===!0?O(n.BYTES):q;W.push(In("extraEntropy",ae))}const X=ga(...W),he=V;function me(ae){const Te=_(ae);if(!h(Te))return;const ze=u(Te),Xe=l.BASE.multiply(Te).toAffine(),mn=a(Xe.x);if(mn===wr)return;const yn=a(ze*a(he+mn*H));if(yn===wr)return;let is=(Xe.x===mn?0:2)|Number(Xe.y&on),Ya=yn;return D&&f(yn)&&(Ya=p(yn),is^=1),new y(mn,Ya,is)}return{seed:X,k2sig:me}}const B={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function N(v,I,P=B){const{seed:C,k2sig:O}=T(v,I,P),D=e;return qw(D.hash.outputLen,D.nByteLength,D.hmac)(C,O)}l.BASE._setWindowSize(8);function M(v,I,P,C=k){const O=v;if(I=In("msgHash",I),P=In("publicKey",P),"strict"in C)throw new Error("options.strict was renamed to lowS");const{lowS:D,prehash:$}=C;let q,V;try{if(typeof O=="string"||Vi(O))try{q=y.fromDER(O)}catch(Xe){if(!(Xe instanceof Ei.Err))throw Xe;q=y.fromCompact(O)}else if(typeof O=="object"&&typeof O.r=="bigint"&&typeof O.s=="bigint"){const{r:Xe,s:mn}=O;q=new y(Xe,mn)}else throw new Error("PARSE");V=l.fromHex(P)}catch(Xe){if(Xe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(D&&q.hasHighS())return!1;$&&(I=e.hash(I));const{r:H,s:W}=q,X=R(I),he=u(W),me=a(X*he),ae=a(H*he),Te=l.BASE.multiplyAndAddUnsafe(V,me,ae)?.toAffine();return Te?a(Te.x)===H:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:E,sign:N,verify:M,ProjectivePoint:l,Signature:y,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function y3(t){return{hash:t,hmac:(e,...n)=>Zf(t,e,tu(...n)),randomBytes:Ub}}function b3(t,e){const n=r=>m3({...t,...y3(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kw=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yg=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),w3=BigInt(1),dh=BigInt(2),Xg=(t,e)=>(t+e/dh)/e;function v3(t){const e=Kw,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),l=t*t*t%e,c=l*l*t%e,d=tn(c,n,e)*c%e,h=tn(d,n,e)*c%e,g=tn(h,dh,e)*l%e,f=tn(g,i,e)*g%e,p=tn(f,s,e)*f%e,m=tn(p,a,e)*p%e,y=tn(m,u,e)*m%e,w=tn(y,a,e)*p%e,b=tn(w,n,e)*c%e,A=tn(b,o,e)*f%e,E=tn(A,r,e)*l%e,_=tn(E,dh,e);if(!hh.eql(hh.sqr(_),t))throw new Error("Cannot find square root");return _}const hh=a3(Kw,void 0,void 0,{sqrt:v3}),np=b3({a:BigInt(0),b:BigInt(7),Fp:hh,n:Yg,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Yg,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-w3*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Xg(s*t,e),u=Xg(-r*t,e);let l=Lt(t-a*n-u*i,e),c=Lt(-a*r-u*s,e);const d=l>o,h=c>o;if(d&&(l=e-l),h&&(c=e-c),l>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:c}}}},dl);BigInt(0);np.ProjectivePoint;const E3=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:np},Symbol.toStringTag,{value:"Module"}));var Ql;const Br=(Ql=np)!==null&&Ql!==void 0?Ql:E3,em=BigInt("0xffffffffffffffff"),ma=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),_3=Br.CURVE.n,A3=_3/BigInt(2),x3={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var bu;(function(t){t[t.Mainnet=1]="Mainnet",t[t.Goerli=5]="Goerli",t[t.Sepolia=11155111]="Sepolia"})(bu||(bu={}));var Ce;(function(t){t.Chainstart="chainstart",t.Homestead="homestead",t.Dao="dao",t.TangerineWhistle="tangerineWhistle",t.SpuriousDragon="spuriousDragon",t.Byzantium="byzantium",t.Constantinople="constantinople",t.Petersburg="petersburg",t.Istanbul="istanbul",t.MuirGlacier="muirGlacier",t.Berlin="berlin",t.London="london",t.ArrowGlacier="arrowGlacier",t.GrayGlacier="grayGlacier",t.MergeForkIdTransition="mergeForkIdTransition",t.Merge="merge",t.Shanghai="shanghai",t.ShardingForkDev="shardingFork"})(Ce||(Ce={}));var tm;(function(t){t.ProofOfStake="pos",t.ProofOfWork="pow",t.ProofOfAuthority="poa"})(tm||(tm={}));var nm;(function(t){t.Ethash="ethash",t.Clique="clique",t.Casper="casper"})(nm||(nm={}));var wt;(function(t){t.PolygonMainnet="polygon-mainnet",t.PolygonMumbai="polygon-mumbai",t.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",t.ArbitrumOne="arbitrum-one",t.xDaiChain="x-dai-chain",t.OptimisticKovan="optimistic-kovan",t.OptimisticEthereum="optimistic-ethereum"})(wt||(wt={}));var ln;(function(t){t[t.Number=0]="Number",t[t.BigInt=1]="BigInt",t[t.Uint8Array=2]="Uint8Array",t[t.PrefixedHexString=3]="PrefixedHexString"})(ln||(ln={}));const Ww=t=>{if(typeof t!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof t}`);return Nf(t)?t.slice(2):t};function I3(t){return!t||t==="0x0"?"0x0000000000000000":Nf(t)?`0x${Ww(t).padStart(16,"0")}`:`0x${t.padStart(16,"0")}`}const Qw=function(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Received an invalid integer type: ${t}`);return`0x${t.toString(16)}`};function S3(t,e=!0){var n,r;const{name:i,config:s,difficulty:o,mixHash:a,gasLimit:u,coinbase:l,baseFeePerGas:c}=t;let{extraData:d,timestamp:h,nonce:g}=t;const f=Number(h),{chainId:p}=s;if(d===""&&(d="0x"),Nf(h)||(h=Qw(parseInt(h))),g.length!==18&&(g=I3(g)),s.eip155Block!==s.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const m={name:i,chainId:p,networkId:p,genesis:{timestamp:h,gasLimit:parseInt(u),difficulty:parseInt(o),nonce:g,extraData:d,mixHash:a,coinbase:l,baseFeePerGas:c},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:s.clique!==void 0?{type:"poa",algorithm:"clique",clique:{period:(n=s.clique.period)!==null&&n!==void 0?n:s.clique.blockperiodseconds,epoch:(r=s.clique.epoch)!==null&&r!==void 0?r:s.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},y={[Ce.Homestead]:{name:"homesteadBlock"},[Ce.Dao]:{name:"daoForkBlock"},[Ce.TangerineWhistle]:{name:"eip150Block"},[Ce.SpuriousDragon]:{name:"eip155Block"},[Ce.Byzantium]:{name:"byzantiumBlock"},[Ce.Constantinople]:{name:"constantinopleBlock"},[Ce.Petersburg]:{name:"petersburgBlock"},[Ce.Istanbul]:{name:"istanbulBlock"},[Ce.MuirGlacier]:{name:"muirGlacierBlock"},[Ce.Berlin]:{name:"berlinBlock"},[Ce.London]:{name:"londonBlock"},[Ce.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:e},[Ce.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[Ce.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},w=Object.keys(y).reduce((E,_)=>(E[y[_].name]=_,E),{}),b=Object.keys(s).filter(E=>w[E]!==void 0&&s[E]!==void 0&&s[E]!==null);if(m.hardforks=b.map(E=>({name:w[E],block:y[w[E]].isTimestamp===!0||typeof s[E]!="number"?null:s[E],timestamp:y[w[E]].isTimestamp===!0&&typeof s[E]=="number"?s[E]:void 0})).filter(E=>E.block!==null||E.timestamp!==void 0),m.hardforks.sort((E,_)=>{var R,x;return((R=E.block)!==null&&R!==void 0?R:1/0)-((x=_.block)!==null&&x!==void 0?x:1/0)}),m.hardforks.sort((E,_)=>{var R,x;return((R=E.timestamp)!==null&&R!==void 0?R:f)-((x=_.timestamp)!==null&&x!==void 0?x:f)}),s.terminalTotalDifficulty!==void 0){const E={name:Ce.Merge,ttd:s.terminalTotalDifficulty,block:null},_=m.hardforks.findIndex(R=>{var x;return((x=y[R.name])===null||x===void 0?void 0:x.postMerge)===!0});_!==-1?m.hardforks.splice(_,0,E):m.hardforks.push(E)}const A=m.hardforks.length>0?m.hardforks.slice(-1)[0]:void 0;return m.hardfork=A?.name,m.hardforks.unshift({name:Ce.Chainstart,block:0}),m}function T3(t,e,n){try{if(["config","difficulty","gasLimit","alloc"].some(r=>!(r in t)))throw new Error("Invalid format, expected geth genesis fields missing");return e!==void 0&&(t.name=e),S3(t,n)}catch(r){throw new Error(`Error parsing parameters file: ${r.message}`)}}function Zw(t){let e=t;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}const R3=function(t){const e=Qw(t);return De(`0x${Zw(e.slice(2))}`)},Le=function(t){var e;if(t==null)return new Uint8Array;if(t instanceof Uint8Array)return t;if(((e=t?.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||Array.isArray(t))return Uint8Array.from(t);if(typeof t=="string"){if(!iw(t))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${t}`);return De(Zw(Ww(t)))}if(typeof t=="number")return Le(Ye(t));if(typeof t=="bigint"){if(t<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${t}`);let n=t.toString(16);return n.length%2&&(n=`0${n}`),Le(`0x${n}`)}if(t.toArray)return Uint8Array.from(t.toArray());throw new Error("invalid type")};function ke(t){const e=pe(t);return BigInt(e==="0x"?0:e)}function B3(t){return Le(`0x${t.toString(16)}`)}const Jw=function(t){return new Uint8Array(t).fill(0)},P3=function(t,e,n){const r=Jw(e);return t.length<e?(r.set(t,e-t.length),r):t.subarray(-e)};function rp(t){if(!oi(t)){const e=`This method only supports Uint8Array but input was: ${t}`;throw new Error(e)}}const rm=function(t,e){return rp(t),P3(t,e)};function k3(t){let e=t[0];for(;t.length>0&&e.toString()==="0";)t=t.slice(1),e=t[0];return t}const wu=function(t){return rp(t),k3(t)},$e=t=>`0x${t.toString(16)}`;function we(t){return wu(B3(t))}function O3(t,e){return t===BigInt(0)||t===BigInt(1)?t:e===void 0?t-BigInt(27):t-(e*BigInt(2)+BigInt(35))}function C3(t){return t===BigInt(0)||t===BigInt(1)}const ip=function(t,e,n,r,i){const s=O3(e,i);if(!C3(s))throw new Error("Invalid signature v value");return new Br.Signature(ke(n),ke(r)).addRecoveryBit(Number(s)).recoverPublicKey(t).toRawBytes(!1).slice(1)};function os(t,e){if(t===null)return null;if(t===void 0)return;if(typeof t=="string"&&!iw(t))throw new Error(`A string must be provided with a 0x-prefix, given: ${t}`);if(typeof t=="number"&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const n=Le(t);switch(e){case ln.Uint8Array:return n;case ln.BigInt:return ke(n);case ln.Number:{const r=ke(n);if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(r)}case ln.PrefixedHexString:return pe(n);default:throw new Error("unknown outputType")}}var bn={},im;function D3(){if(im)return bn;im=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.RLP=bn.utils=bn.decode=bn.encode=void 0;function t(y){if(Array.isArray(y)){const b=[];let A=0;for(let E=0;E<y.length;E++){const _=t(y[E]);b.push(_),A+=_.length}return c(r(A,192),...b)}const w=m(y);return w.length===1&&w[0]<128?w:c(r(w.length,128),w)}bn.encode=t;function e(y,w,b){if(b>y.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return y.slice(w,b)}function n(y){if(y[0]===0)throw new Error("invalid RLP: extra zeros");return u(a(y))}function r(y,w){if(y<56)return Uint8Array.from([y+w]);const b=h(y),A=b.length/2,E=h(w+55+A);return Uint8Array.from(l(E+b))}function i(y,w=!1){if(typeof y>"u"||y===null||y.length===0)return Uint8Array.from([]);const b=m(y),A=s(b);if(w)return A;if(A.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return A.data}bn.decode=i;function s(y){let w,b,A,E,_;const R=[],x=y[0];if(x<=127)return{data:y.slice(0,1),remainder:y.slice(1)};if(x<=183){if(w=x-127,x===128?A=Uint8Array.from([]):A=e(y,1,w),w===2&&A[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:A,remainder:y.slice(w)}}else if(x<=191){if(b=x-182,y.length-1<b)throw new Error("invalid RLP: not enough bytes for string length");if(w=n(e(y,1,b)),w<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return A=e(y,b,w+b),{data:A,remainder:y.slice(w+b)}}else if(x<=247){for(w=x-191,E=e(y,1,w);E.length;)_=s(E),R.push(_.data),E=_.remainder;return{data:R,remainder:y.slice(w)}}else{if(b=x-246,w=n(e(y,1,b)),w<56)throw new Error("invalid RLP: encoded list too short");const S=b+w;if(S>y.length)throw new Error("invalid RLP: total length is larger than the data");for(E=e(y,b,S);E.length;)_=s(E),R.push(_.data),E=_.remainder;return{data:R,remainder:y.slice(S)}}}const o=Array.from({length:256},(y,w)=>w.toString(16).padStart(2,"0"));function a(y){let w="";for(let b=0;b<y.length;b++)w+=o[y[b]];return w}function u(y){const w=Number.parseInt(y,16);if(Number.isNaN(w))throw new Error("Invalid byte sequence");return w}function l(y){if(typeof y!="string")throw new TypeError("hexToBytes: expected string, got "+typeof y);if(y.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const w=new Uint8Array(y.length/2);for(let b=0;b<w.length;b++){const A=b*2;w[b]=u(y.slice(A,A+2))}return w}function c(...y){if(y.length===1)return y[0];const w=y.reduce((A,E)=>A+E.length,0),b=new Uint8Array(w);for(let A=0,E=0;A<y.length;A++){const _=y[A];b.set(_,E),E+=_.length}return b}function d(y){return new TextEncoder().encode(y)}function h(y){if(y<0)throw new Error("Invalid integer as argument, must be unsigned!");const w=y.toString(16);return w.length%2?`0${w}`:w}function g(y){return y.length%2?`0${y}`:y}function f(y){return y.length>=2&&y[0]==="0"&&y[1]==="x"}function p(y){return typeof y!="string"?y:f(y)?y.slice(2):y}function m(y){if(y instanceof Uint8Array)return y;if(typeof y=="string")return f(y)?l(g(p(y))):d(y);if(typeof y=="number"||typeof y=="bigint")return y?l(h(y)):Uint8Array.from([]);if(y==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof y)}return bn.utils={bytesToHex:a,concatBytes:c,hexToBytes:l,utf8ToBytes:d},bn.RLP={encode:t,decode:i},bn}var dn=D3(),Zl={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var sm;function N3(){return sm||(sm=1,function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function n(){for(var x=0,S=new Array(256),T=0;T!=256;++T)x=T,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,S[T]=x;return typeof Int32Array<"u"?new Int32Array(S):S}var r=n();function i(x){var S=0,T=0,B=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)k[B]=x[B];for(B=0;B!=256;++B)for(T=x[B],S=256+B;S<4096;S+=256)T=k[S]=T>>>8^x[T&255];var N=[];for(B=1;B!=16;++B)N[B-1]=typeof Int32Array<"u"?k.subarray(B*256,B*256+256):k.slice(B*256,B*256+256);return N}var s=i(r),o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],d=s[5],h=s[6],g=s[7],f=s[8],p=s[9],m=s[10],y=s[11],w=s[12],b=s[13],A=s[14];function E(x,S){for(var T=S^-1,B=0,k=x.length;B<k;)T=T>>>8^r[(T^x.charCodeAt(B++))&255];return~T}function _(x,S){for(var T=S^-1,B=x.length-15,k=0;k<B;)T=A[x[k++]^T&255]^b[x[k++]^T>>8&255]^w[x[k++]^T>>16&255]^y[x[k++]^T>>>24]^m[x[k++]]^p[x[k++]]^f[x[k++]]^g[x[k++]]^h[x[k++]]^d[x[k++]]^c[x[k++]]^l[x[k++]]^u[x[k++]]^a[x[k++]]^o[x[k++]]^r[x[k++]];for(B+=15;k<B;)T=T>>>8^r[(T^x[k++])&255];return~T}function R(x,S){for(var T=S^-1,B=0,k=x.length,N=0,M=0;B<k;)N=x.charCodeAt(B++),N<128?T=T>>>8^r[(T^N)&255]:N<2048?(T=T>>>8^r[(T^(192|N>>6&31))&255],T=T>>>8^r[(T^(128|N&63))&255]):N>=55296&&N<57344?(N=(N&1023)+64,M=x.charCodeAt(B++)&1023,T=T>>>8^r[(T^(240|N>>8&7))&255],T=T>>>8^r[(T^(128|N>>2&63))&255],T=T>>>8^r[(T^(128|M>>6&15|(N&3)<<4))&255],T=T>>>8^r[(T^(128|M&63))&255]):(T=T>>>8^r[(T^(224|N>>12&15))&255],T=T>>>8^r[(T^(128|N>>6&63))&255],T=T>>>8^r[(T^(128|N&63))&255]);return~T}e.table=r,e.bstr=E,e.buf=_,e.str=R})}(Zl)),Zl}var M3=N3();const L3=Na(M3),$3={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},U3={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},F3={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},j3={name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},q3={name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},H3={name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},z3={name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},G3={name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},V3={name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},K3={name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},W3={name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},Q3={name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},Z3={name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},J3={name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},Y3={name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},X3={name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},eR={name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},tR={name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},nR={name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},rR={name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},iR={name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},sR={name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},oR={name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},aR={name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},cR={name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}},as={1153:j3,1559:q3,2315:H3,2537:z3,2565:G3,2718:V3,2929:K3,2930:W3,3198:Q3,3529:Z3,3540:J3,3541:Y3,3554:X3,3607:eR,3651:tR,3670:nR,3675:rR,3855:iR,3860:sR,4345:oR,4399:aR,5133:cR},uR={name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},lR={name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},dR={name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},hR={name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},fR={name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},pR={name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},gR={name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},mR={name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},yR={name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},bR={name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},wR={name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},vR={name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},ER={name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},_R={name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},AR={name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},xR={name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},IR={name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},SR={chainstart:uR,homestead:dR,dao:lR,tangerineWhistle:hR,spuriousDragon:fR,byzantium:pR,constantinople:gR,petersburg:mR,istanbul:yR,muirGlacier:bR,berlin:wR,london:vR,shanghai:ER,arrowGlacier:_R,grayGlacier:AR,mergeForkIdTransition:xR,merge:IR},{buf:TR}=L3;class Ze extends Ff{static custom(e,n={}){var r;const i=(r=n.baseChain)!==null&&r!==void 0?r:"mainnet",s=Object.assign({},Ze._getChainParams(i));if(s.name="custom-chain",typeof e!="string")return new Ze(Object.assign({chain:Object.assign(Object.assign({},s),e)},n));if(e===wt.PolygonMainnet)return Ze.custom({name:wt.PolygonMainnet,chainId:137,networkId:137},n);if(e===wt.PolygonMumbai)return Ze.custom({name:wt.PolygonMumbai,chainId:80001,networkId:80001},n);if(e===wt.ArbitrumRinkebyTestnet)return Ze.custom({name:wt.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},n);if(e===wt.ArbitrumOne)return Ze.custom({name:wt.ArbitrumOne,chainId:42161,networkId:42161},n);if(e===wt.xDaiChain)return Ze.custom({name:wt.xDaiChain,chainId:100,networkId:100},n);if(e===wt.OptimisticKovan)return Ze.custom({name:wt.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:Ce.Berlin},n));if(e===wt.OptimisticEthereum)return Ze.custom({name:wt.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:Ce.Berlin},n));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:n,eips:r,genesisHash:i,hardfork:s,mergeForkIdPostMerge:o}){var a;const u=T3(e,n,o),l=new Ze({chain:(a=u.name)!==null&&a!==void 0?a:"custom",customChains:[u],eips:r,hardfork:s??u.hardfork});return i!==void 0&&l.setForkHashes(i),l}static isSupportedChainId(e){return!!this._getInitializedChains().names[e.toString()]}static _getChainParams(e,n){let r=e;const i=this._getInitializedChains(n);if(typeof r=="number"||typeof r=="bigint"){if(r=r.toString(),i.names[r]){const s=i.names[r];return i[s]}throw new Error(`Chain with ID ${r} not supported`)}if(i[r]!==void 0)return i[r];throw new Error(`Chain with name ${r} not supported`)}constructor(e){var n,r;super(),this._eips=[],this._customChains=(n=e.customChains)!==null&&n!==void 0?n:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=(r=this._chainParams.defaultHardfork)!==null&&r!==void 0?r:Ce.Merge,this.HARDFORK_CHANGES=this.hardforks().map(i=>[i.name,SR[i.name]]),this._hardfork=this.DEFAULT_HARDFORK,e.hardfork!==void 0&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}setChain(e){if(typeof e=="number"||typeof e=="bigint"||typeof e=="string")this._chainParams=Ze._getChainParams(e,this._customChains);else if(typeof e=="object"){if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const n=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of n)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}else throw new Error("Wrong input format");for(const n of this.hardforks())if(n.block===void 0)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let n=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),n=!0);if(!n)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,n,r){const i=os(e,ln.BigInt),s=os(n,ln.BigInt),o=os(r,ln.Number),a=this.hardforks().filter(g=>g.block!==null||g.ttd!==null&&g.ttd!==void 0||g.timestamp!==void 0),u=a.findIndex(g=>g.ttd!==null&&g.ttd!==void 0);if(a.slice(u+1).findIndex(g=>g.ttd!==null&&g.ttd!==void 0)>=0)throw Error("More than one merge hardforks found with ttd specified");let c=a.findIndex(g=>g.block!==null&&g.block>i||o!==void 0&&Number(g.timestamp)>o);if(c===-1)c=a.length;else if(c===0)throw Error("Must have at least one hardfork at block 0");if(o===void 0){const g=a.slice(0,c).reverse().findIndex(f=>f.block!==null||f.ttd!==void 0);c-=g}if(c-=1,a[c].block===null&&a[c].timestamp===void 0)(s==null||BigInt(a[c].ttd)>s)&&(c-=1);else if(u>=0&&s!==void 0&&s!==null){if(c>=u&&BigInt(a[u].ttd)>s)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(c<u&&BigInt(a[u].ttd)<=s)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const d=c;for(;c<a.length-1&&!(a[c].block!==a[c+1].block||a[c].timestamp!==a[c+1].timestamp);c+=1);if(o){if(a.slice(0,d).reduce((p,m)=>{var y;return Math.max(Number((y=m.timestamp)!==null&&y!==void 0?y:"0"),p)},0)>o)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(a.slice(c+1).reduce((p,m)=>{var y;return Math.min(Number((y=m.timestamp)!==null&&y!==void 0?y:o),p)},o)<o)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return a[c].name}setHardforkByBlockNumber(e,n,r){const i=this.getHardforkByBlockNumber(e,n,r);return this.setHardfork(i),i}_getHardfork(e){const n=this.hardforks();for(const r of n)if(r.name===e)return r;return null}setEIPs(e=[]){for(const n of e){if(!(n in as))throw new Error(`${n} not supported`);const r=this.gteHardfork(as[n].minimumHardfork);if(!r)throw new Error(`${n} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${r}`);if(as[n].requiredEIPs!==void 0){for(const i of as[n].requiredEIPs)if(!(e.includes(i)||this.isActivatedEIP(i)))throw new Error(`${n} requires EIP ${i}, but is not included in the EIP list`)}}this._eips=e}param(e,n){let r;for(const i of this._eips)if(r=this.paramByEIP(e,n,i),r!==void 0)return r;return this.paramByHardfork(e,n,this._hardfork)}paramByHardfork(e,n,r){let i=null;for(const s of this.HARDFORK_CHANGES){if("eips"in s[1]){const o=s[1].eips;for(const a of o){const u=this.paramByEIP(e,n,a);i=typeof u=="bigint"?u:i}}else{if(s[1][e]===void 0)throw new Error(`Topic ${e} not defined`);s[1][e][n]!==void 0&&(i=s[1][e][n].v)}if(s[0]===r)break}return BigInt(i??0)}paramByEIP(e,n,r){if(!(r in as))throw new Error(`${r} not supported`);const i=as[r];if(!(e in i))throw new Error(`Topic ${e} not defined`);if(i[e][n]===void 0)return;const s=i[e][n].v;return BigInt(s)}paramByBlock(e,n,r,i,s){const o=this.getHardforkByBlockNumber(r,i,s);return this.paramByHardfork(e,n,o)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const n of this.HARDFORK_CHANGES){const r=n[1];if(this.gteHardfork(r.name)&&"eips"in r&&r.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,n){const r=os(n,ln.BigInt),i=e??this._hardfork,s=this.hardforkBlock(i);return typeof s=="bigint"&&s!==BigInt(0)&&r>=s}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,n){const r=e??this._hardfork,i=this.hardforks();let s=-1,o=-1,a=0;for(const u of i)u.name===r&&(s=a),u.name===n&&(o=a),a+=1;return s>=o&&o!==-1}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var n;const r=e??this._hardfork,i=(n=this._getHardfork(r))===null||n===void 0?void 0:n.block;return i==null?null:BigInt(i)}hardforkTimestamp(e){var n;const r=e??this._hardfork,i=(n=this._getHardfork(r))===null||n===void 0?void 0:n.timestamp;return i==null?null:BigInt(i)}eipBlock(e){for(const n of this.HARDFORK_CHANGES){const r=n[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock(typeof n[0]=="number"?String(n[0]):n[0])}return null}hardforkTTD(e){var n;const r=e??this._hardfork,i=(n=this._getHardfork(r))===null||n===void 0?void 0:n.ttd;return i==null?null:BigInt(i)}isHardforkBlock(e,n){const r=os(e,ln.BigInt),i=n??this._hardfork,s=this.hardforkBlock(i);return typeof s=="bigint"&&s!==BigInt(0)?s===r:!1}nextHardforkBlockOrTimestamp(e){var n,r,i;const s=(n=e)!==null&&n!==void 0?n:this._hardfork,o=this.hardforks();let a=o.findIndex(d=>d.name===s);if(s===Ce.Merge&&(a-=1),a<0)return null;let u=(r=o[a].timestamp)!==null&&r!==void 0?r:o[a].block;u=u!=null?Number(u):null;const l=o.slice(a+1).find(d=>{var h;let g=(h=d.timestamp)!==null&&h!==void 0?h:d.block;return g=g!=null?Number(g):null,d.name!==Ce.Merge&&g!==null&&g!==void 0&&g!==u});if(l===void 0)return null;const c=(i=l.timestamp)!==null&&i!==void 0?i:l.block;return c==null?null:BigInt(c)}nextHardforkBlock(e){var n;const r=(n=e)!==null&&n!==void 0?n:this._hardfork;let i=this.hardforkBlock(r);if(i===null&&r===Ce.Merge){const o=this.hardforks(),a=o.findIndex(u=>u.ttd!==null&&u.ttd!==void 0);if(a<0)throw Error("Merge hardfork should have been found");i=this.hardforkBlock(o[a-1].name)}return i===null?null:this.hardforks().reduce((o,a)=>{const u=BigInt(a.block===null||a.ttd!==void 0&&a.ttd!==null?0:a.block);return u>i&&o===null?u:o},null)}isNextHardforkBlock(e,n){const r=os(e,ln.BigInt),i=n??this._hardfork,s=this.nextHardforkBlock(i);return s===null?!1:s===r}_calcForkHash(e,n){let r=new Uint8Array,i=0;for(const a of this.hardforks()){const{block:u,timestamp:l,name:c}=a;let d=l??u;if(d=d!==null?Number(d):null,typeof d=="number"&&d!==0&&d!==i&&c!==Ce.Merge){const h=De(d.toString(16).padStart(16,"0"));r=Bt(r,h),i=d}if(a.name===e)break}const s=Bt(n,r);return pe(R3(TR(s)>>>0))}forkHash(e,n){const r=e??this._hardfork,i=this._getHardfork(r);if(i===null||i?.block===null&&i?.timestamp===void 0&&i?.ttd===void 0){const s="No fork hash calculation possible for future hardfork";throw new Error(s)}if(i?.forkHash!==null&&i?.forkHash!==void 0)return i.forkHash;if(!n)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(r,n)}hardforkForForkHash(e){const n=this.hardforks().filter(r=>r.forkHash===e);return n.length>=1?n[n.length-1]:null}setForkHashes(e){var n;for(const r of this.hardforks()){const i=(n=r.timestamp)!==null&&n!==void 0?n:r.block;(r.forkHash===null||r.forkHash===void 0)&&(i!=null||typeof r.ttd<"u")&&(r.forkHash=this.forkHash(r.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let n;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(n=r[1].consensus.type),r[0]===e)break;return n??this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let n;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(n=r[1].consensus.algorithm),r[0]===e)break;return n??this._chainParams.consensus.algorithm}consensusConfig(){var e;const n=this.hardfork();let r;for(const i of this.HARDFORK_CHANGES)if("consensus"in i[1]&&(r=i[1].consensus[i[1].consensus.algorithm]),i[0]===n)break;return(e=r??this._chainParams.consensus[this.consensusAlgorithm()])!==null&&e!==void 0?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const n={};for(const[i,s]of Object.entries(bu))n[s]=i.toLowerCase();const r={mainnet:U3,goerli:$3,sepolia:F3};if(e)for(const i of e){const{name:s}=i;n[i.chainId.toString()]=s,r[s]=i}return r.names=n,r}}var Gn;(function(t){t[t.EIP155ReplayProtection=155]="EIP155ReplayProtection",t[t.EIP1559FeeMarket=1559]="EIP1559FeeMarket",t[t.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",t[t.EIP2930AccessLists=2930]="EIP2930AccessLists"})(Gn||(Gn={}));function RR(t){if(t.length===0)return!0;const e=t[0];return!!Array.isArray(e)}function BR(t){return!RR(t)}class Is{constructor(e){if(e.length!==20)throw new Error("Invalid address length");this.buf=e}static zero(){return new Is(Jw(20))}equals(e){return rl(this.buf,e.buf)}isZero(){return this.equals(Is.zero())}toString(){return pe(this.buf)}toArray(){return this.buf}static publicToAddress(e,n=!1){let r=e;if(rp(r),n&&r.length!==64&&(r=Br.ProjectivePoint.fromHex(r).toRawBytes(!1).slice(1)),r.length!==64)throw new Error("Expected pubKey to be of length 64");return _t(r).slice(-20)}}const PR=(t,e)=>{const n=t.param("vm","maxInitCodeSize");if(n&&BigInt(e)>n)throw new Error(`the initcode size of this transaction is too large: it is ${e} while the max is ${t.param("vm","maxInitCodeSize")}`)},Yw=t=>{let e,n;if(BR(t)){e=t;const r=[];for(let i=0;i<t.length;i+=1){const s=t[i],o=Le(s.address),a=[];for(let u=0;u<s.storageKeys.length;u+=1)a.push(Le(s.storageKeys[u]));r.push([o,a])}n=r}else{n=t??[];const r=[];for(let i=0;i<n.length;i+=1){const s=n[i],o=pe(s[0]),a=[];for(let l=0;l<s[1].length;l+=1)a.push(pe(s[1][l]));const u={address:o,storageKeys:a};r.push(u)}e=r}return{AccessListJSON:e,accessList:n}},Xw=t=>{for(let e=0;e<t.length;e+=1){const n=t[e],r=n[0],i=n[1];if(n[2]!==void 0)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(r.length!==20)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let s=0;s<i.length;s+=1)if(i[s].length!==32)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},ev=t=>{const e=[];for(let n=0;n<t.length;n+=1){const r=t[n],i={address:pe(rm(r[0],20)),storageKeys:[]},s=r&&r[1];for(let o=0;o<s.length;o+=1){const a=s[o];i.storageKeys.push(pe(rm(a,32)))}e.push(i)}return e},tv=(t,e)=>{const n=e.param("gasPrices","accessListStorageKeyCost"),r=e.param("gasPrices","accessListAddressCost");let i=0;for(let o=0;o<t.length;o+=1){const u=t[o][1];i+=u.length}return t.length*Number(r)+i*Number(n)};class qs{constructor(e,n){var r,i;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=bu.Mainnet,this.DEFAULT_HARDFORK=Ce.Merge;const{nonce:s,gasLimit:o,to:a,value:u,data:l,v:c,r:d,s:h,type:g}=e;this._type=Number(ke(Le(g))),this.txOptions=n;const f=Le(a===""?"0x":a),p=Le(c===""?"0x":c),m=Le(d===""?"0x":d),y=Le(h===""?"0x":h);this.nonce=ke(Le(s===""?"0x":s)),this.gasLimit=ke(Le(o===""?"0x":o)),this.to=f.length>0?new Is(f):void 0,this.value=ke(Le(u===""?"0x":u)),this.data=Le(l===""?"0x":l),this.v=p.length>0?ke(p):void 0,this.r=m.length>0?ke(m):void 0,this.s=y.length>0?ke(y):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const w=this.to===void 0||this.to===null,b=(r=n.allowUnlimitedInitCodeSize)!==null&&r!==void 0?r:!1,A=(i=n.common)!==null&&i!==void 0?i:this._getCommon();w&&A.isActivatedEIP(3860)&&!b&&PR(A,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const n=[];return this.getBaseFee()>this.gasLimit&&n.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&n.push("Invalid Signature"),e?n:n.length===0}_validateYParity(){const{v:e}=this;if(e!==void 0&&e!==BigInt(0)&&e!==BigInt(1)){const n=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(n)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==void 0&&e>A3){const n=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(n)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let n=this.getDataFee();if(e&&(n+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const r=this.common.param("gasPrices","txCreation");r&&(n+=r)}return n}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),n=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let i=0;i<this.data.length;i+=1)this.data[i]===0?r+=e:r+=n;if((this.to===void 0||this.to===null)&&this.common.isActivatedEIP(3860)){const i=BigInt(Math.ceil(this.data.length/32)),s=this.common.param("gasPrices","initCodeWordCost")*i;r+=s}return r}toCreationAddress(){return this.to===void 0||this.to.buf.length===0}isSigned(){const{v:e,r:n,s:r}=this;return!(e===void 0||n===void 0||r===void 0)}verifySignature(){try{const e=this.getSenderPublicKey();return wu(e).length!==0}catch{return!1}}getSenderAddress(){return new Is(Is.publicToAddress(this.getSenderPublicKey()))}sign(e){if(e.length!==32){const u=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(u)}let n=!1;this.type===0&&this.common.gteHardfork("spuriousDragon")&&!this.supports(Gn.EIP155ReplayProtection)&&(this.activeCapabilities.push(Gn.EIP155ReplayProtection),n=!0);const r=this.getMessageToSign(!0),{v:i,r:s,s:o}=this._ecsign(r,e),a=this._processSignature(i,s,o);if(n){const u=this.activeCapabilities.indexOf(Gn.EIP155ReplayProtection);u>-1&&this.activeCapabilities.splice(u,1)}return a}_getCommon(e,n){var r,i,s,o;if(n!==void 0){const a=ke(Le(n));if(e){if(e.chainId()!==a){const u=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(u)}return e.copy()}return Ze.isSupportedChainId(a)?new Ze({chain:a,hardfork:this.DEFAULT_HARDFORK}):Ze.custom({name:"custom-chain",networkId:a,chainId:a},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if(e?.copy&&typeof e?.copy=="function")return e.copy();if(e){const a=typeof e.hardfork=="function"?e.hardfork():e.hardfork;return Ze.custom({name:"custom-chain",networkId:e.networkId?e.networkId():(i=BigInt((r=e.customChain)===null||r===void 0?void 0:r.networkId))!==null&&i!==void 0?i:void 0,chainId:e.chainId?e.chainId():(o=BigInt((s=e.customChain)===null||s===void 0?void 0:s.chainId))!==null&&o!==void 0?o:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:a||this.DEFAULT_HARDFORK})}return new Ze({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,n=256,r=!1){for(const[i,s]of Object.entries(e))switch(n){case 64:if(r){if(s!==void 0&&s>=em){const o=this._errorMsg(`${i} cannot equal or exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(o)}}else if(s!==void 0&&s>em){const o=this._errorMsg(`${i} cannot exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(o)}break;case 256:if(r){if(s!==void 0&&s>=ma){const o=this._errorMsg(`${i} cannot equal or exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(o)}}else if(s!==void 0&&s>ma){const o=this._errorMsg(`${i} cannot exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(o)}break;default:{const o=this._errorMsg("unimplemented bits value");throw new Error(o)}}}static _validateNotArray(e){const n=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,i]of Object.entries(e))if(n.includes(r)&&Array.isArray(i))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?pe(this.hash()):"not available (unsigned)"}catch{e="error"}let n="";try{n=this.isSigned().toString()}catch{e="error"}let r="";try{r=this.common.hardfork()}catch{r="error"}let i=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return i+=`signed=${n} hf=${r}`,i}_ecsign(e,n,r){const i=Br.sign(e,n),s=i.toCompactRawBytes(),o=s.subarray(0,32),a=s.subarray(32,64),u=r===void 0?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(r)*BigInt(2);return{r:o,s:a,v:u}}static fromSerializedTx(e,n={}){}static fromTxData(e,n={}){}}const fh=2,Jl=De(fh.toString(16).padStart(2,"0"));class _i extends qs{static fromTxData(e,n={}){return new _i(e,n)}static fromSerializedTx(e,n={}){if(!rl(e.subarray(0,1),Jl))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${fh}, received: ${pe(e.subarray(0,1))}`);const r=dn.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return _i.fromValuesArray(r,n)}static fromValuesArray(e,n={}){if(e.length!==9&&e.length!==12)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,i,s,o,a,u,l,c,d,h,g,f]=e;return this._validateNotArray({chainId:r,v:h}),Mf({nonce:i,maxPriorityFeePerGas:s,maxFeePerGas:o,gasLimit:a,value:l,v:h,r:g,s:f}),new _i({chainId:ke(r),nonce:i,maxPriorityFeePerGas:s,maxFeePerGas:o,gasLimit:a,to:u,value:l,data:c,accessList:d??[],v:h!==void 0?ke(h):void 0,r:g,s:f},n)}constructor(e,n={}){var r;super(Object.assign(Object.assign({},e),{type:fh}),n),this.DEFAULT_HARDFORK="london";const{chainId:i,accessList:s,maxFeePerGas:o,maxPriorityFeePerGas:a}=e;if(this.common=this._getCommon(n.common,i),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const u=Yw(s??[]);if(this.accessList=u.accessList,this.AccessListJSON=u.AccessListJSON,Xw(this.accessList),this.maxFeePerGas=ke(Le(o===""?"0x":o)),this.maxPriorityFeePerGas=ke(Le(a===""?"0x":a)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),qs._validateNotArray(e),this.gasLimit*this.maxFeePerGas>ma){const c=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(c)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const c=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(c)}this._validateYParity(),this._validateHighS(),((r=n?.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(tv(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const n=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,s=(n<r?n:r)+e;return this.gasLimit*s+this.value}raw(){return[we(this.chainId),we(this.nonce),we(this.maxPriorityFeePerGas),we(this.maxFeePerGas),we(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),we(this.value),this.data,this.accessList,this.v!==void 0?we(this.v):Uint8Array.from([]),this.r!==void 0?we(this.r):Uint8Array.from([]),this.s!==void 0?we(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Bt(Jl,dn.RLP.encode(e))}getMessageToSign(e=!0){const n=this.raw().slice(0,9),r=Bt(Jl,dn.RLP.encode(n));return e?_t(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=_t(this.serialize())),this.cache.hash):_t(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const s=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(s)}const e=this.getMessageToVerifySignature(),{v:n,r,s:i}=this;this._validateHighS();try{return ip(e,n+BigInt(27),we(r),we(i))}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,n,r){const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return _i.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:ke(n),s:ke(r)},i)}toJSON(){const e=ev(this.accessList);return{chainId:$e(this.chainId),nonce:$e(this.nonce),maxPriorityFeePerGas:$e(this.maxPriorityFeePerGas),maxFeePerGas:$e(this.maxFeePerGas),gasLimit:$e(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:$e(this.value),data:pe(this.data),accessList:e,v:this.v!==void 0?$e(this.v):void 0,r:this.r!==void 0?$e(this.r):void 0,s:this.s!==void 0?$e(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const ph=1,Yl=De(ph.toString(16).padStart(2,"0"));class Ai extends qs{static fromTxData(e,n={}){return new Ai(e,n)}static fromSerializedTx(e,n={}){if(!rl(e.subarray(0,1),Yl))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${ph}, received: ${pe(e.subarray(0,1))}`);const r=dn.RLP.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return Ai.fromValuesArray(r,n)}static fromValuesArray(e,n={}){if(e.length!==8&&e.length!==11)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,i,s,o,a,u,l,c,d,h,g]=e;this._validateNotArray({chainId:r,v:d}),Mf({nonce:i,gasPrice:s,gasLimit:o,value:u,v:d,r:h,s:g});const f=[];return new Ai({chainId:ke(r),nonce:i,gasPrice:s,gasLimit:o,to:a,value:u,data:l,accessList:c??f,v:d!==void 0?ke(d):void 0,r:h,s:g},n)}constructor(e,n={}){var r;super(Object.assign(Object.assign({},e),{type:ph}),n),this.DEFAULT_HARDFORK="berlin";const{chainId:i,accessList:s,gasPrice:o}=e;if(this.common=this._getCommon(n.common,i),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const a=Yw(s??[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,Xw(this.accessList),this.gasPrice=ke(Le(o===""?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),qs._validateNotArray(e),this.gasPrice*this.gasLimit>ma){const l=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(l)}this._validateYParity(),this._validateHighS(),((r=n?.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(tv(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[we(this.chainId),we(this.nonce),we(this.gasPrice),we(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),we(this.value),this.data,this.accessList,this.v!==void 0?we(this.v):Uint8Array.from([]),this.r!==void 0?we(this.r):Uint8Array.from([]),this.s!==void 0?we(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Bt(Yl,dn.RLP.encode(e))}getMessageToSign(e=!0){const n=this.raw().slice(0,8),r=Bt(Yl,dn.RLP.encode(n));return e?_t(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=_t(this.serialize())),this.cache.hash):_t(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const s=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(s)}const e=this.getMessageToVerifySignature(),{v:n,r,s:i}=this;this._validateHighS();try{return ip(e,n+BigInt(27),we(r),we(i))}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,n,r){const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Ai.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:ke(n),s:ke(r)},i)}toJSON(){const e=ev(this.accessList);return{chainId:$e(this.chainId),nonce:$e(this.nonce),gasPrice:$e(this.gasPrice),gasLimit:$e(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:$e(this.value),data:pe(this.data),accessList:e,v:this.v!==void 0?$e(this.v):void 0,r:this.r!==void 0?$e(this.r):void 0,s:this.s!==void 0?$e(this.s):void 0}}errorStr(){var e,n;let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${(n=(e=this.accessList)===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0}`,r}_errorMsg(e){return`${e} (${this.errorStr()})`}}const kR=0;function om(t,e){const n=Number(t),r=Number(e)*2;return n===r+35||n===r+36}class Wr extends qs{static fromTxData(e,n={}){return new Wr(e,n)}static fromSerializedTx(e,n={}){const r=dn.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,n)}static fromValuesArray(e,n={}){if(e.length!==6&&e.length!==9)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,i,s,o,a,u,l,c,d]=e;return Mf({nonce:r,gasPrice:i,gasLimit:s,value:a,v:l,r:c,s:d}),new Wr({nonce:r,gasPrice:i,gasLimit:s,to:o,value:a,data:u,v:l,r:c,s:d},n)}constructor(e,n={}){var r;if(super(Object.assign(Object.assign({},e),{type:kR}),n),this.common=this._validateTxV(this.v,n.common),this.gasPrice=ke(Le(e.gasPrice===""?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>ma){const s=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(s)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),qs._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?om(this.v,this.common.chainId())&&this.activeCapabilities.push(Gn.EIP155ReplayProtection):this.activeCapabilities.push(Gn.EIP155ReplayProtection)),((r=n?.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}raw(){return[we(this.nonce),we(this.gasPrice),we(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),we(this.value),this.data,this.v!==void 0?we(this.v):Uint8Array.from([]),this.r!==void 0?we(this.r):Uint8Array.from([]),this.s!==void 0?we(this.s):Uint8Array.from([])]}serialize(){return dn.RLP.encode(this.raw())}_getMessageToSign(){const e=[we(this.nonce),we(this.gasPrice),we(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),we(this.value),this.data];return this.supports(Gn.EIP155ReplayProtection)&&(e.push(Le(this.common.chainId())),e.push(wu(Le(0))),e.push(wu(Le(0)))),e}getMessageToSign(e=!0){const n=this._getMessageToSign();return e?_t(dn.RLP.encode(n)):n}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=_t(dn.RLP.encode(this.raw()))),this.cache.hash):_t(dn.RLP.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const n=this._errorMsg("This transaction is not signed");throw new Error(n)}const e=this._getMessageToSign();return _t(dn.RLP.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:n,r,s:i}=this;this._validateHighS();try{return ip(e,n,we(r),we(i),this.supports(Gn.EIP155ReplayProtection)?this.common.chainId():void 0)}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,n,r){let i=e;this.supports(Gn.EIP155ReplayProtection)&&(i+=this.common.chainId()*BigInt(2)+BigInt(8));const s=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Wr.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:i,r:ke(n),s:ke(r)},s)}toJSON(){return{nonce:$e(this.nonce),gasPrice:$e(this.gasPrice),gasLimit:$e(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:$e(this.value),data:pe(this.data),v:this.v!==void 0?$e(this.v):void 0,r:this.r!==void 0?$e(this.r):void 0,s:this.s!==void 0?$e(this.s):void 0}}_validateTxV(e,n){let r;const i=e!==void 0?Number(e):void 0;if(i!==void 0&&i<37&&i!==27&&i!==28)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${i}`);if(i!==void 0&&i!==0&&(!n||n.gteHardfork("spuriousDragon"))&&i!==27&&i!==28)if(n){if(!om(BigInt(i),n.chainId()))throw new Error(`Incompatible EIP155-based V ${i} and chain id ${n.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let s;(i-35)%2===0?s=35:s=36,r=BigInt(i-s)/BigInt(2)}return this._getCommon(n,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const Xl=new Map;class Ki{constructor(){}static typeToInt(e){return Number(ke(Le(e)))}static registerTransactionType(e,n){const r=Ki.typeToInt(e);Xl.set(r,n)}static fromTxData(e,n={}){if(!("type"in e)||e.type===void 0)return Wr.fromTxData(e,n);const r=Ki.typeToInt(e.type);if(r===0)return Wr.fromTxData(e,n);if(r===1)return Ai.fromTxData(e,n);if(r===2)return _i.fromTxData(e,n);const i=Xl.get(r);if(i?.fromTxData)return i.fromTxData(e,n);throw new Error(`Tx instantiation with type ${r} not supported`)}static fromSerializedData(e,n={}){if(e[0]<=127)switch(e[0]){case 1:return Ai.fromSerializedTx(e,n);case 2:return _i.fromSerializedTx(e,n);default:{const r=Xl.get(Number(e[0]));if(r?.fromSerializedTx)return r.fromSerializedTx(e,n);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}else return Wr.fromSerializedTx(e,n)}static fromBlockBodyData(e,n={}){if(oi(e))return this.fromSerializedData(e,n);if(Array.isArray(e))return Wr.fromValuesArray(e,n);throw new Error("Cannot decode transaction: unknown type input")}}var fl=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const Xs=(t,e)=>{let n;if(!e&&typeof t=="string"&&xe(t)&&t.length!==66)throw new bg;try{n=oi(t)?t:Jn(t)}catch{throw new J2}if(!e&&n.byteLength!==32)throw new bg;return n},sp=(t,e=!1)=>{const n=xe(t)?t:kn(t),r=De(n),i=De(lw(`Ethereum Signed Message:
${r.byteLength}`)),s=e?r:Bt(i,r);return Xt(s)},OR=(t,e)=>{const n=Xs(e),r=Br.sign(t.substring(2),n),i=r.toCompactRawBytes(),s=r.r.toString(16).padStart(64,"0"),o=r.s.toString(16).padStart(64,"0"),a=r.recovery+27;return{messageHash:t,v:Ye(a),r:`0x${s}`,s:`0x${o}`,signature:`${pe(i)}${a.toString(16)}`}},nv=(t,e)=>{const n=sp(t),{messageHash:r,v:i,r:s,s:o,signature:a}=OR(n,e);return{message:t,messageHash:r,v:i,r:s,s:o,signature:a}},CR=(t,e)=>fl(void 0,void 0,void 0,function*(){const n=t.sign(De(e));if(L(n.v)||L(n.r)||L(n.s))throw new eh("Signer Error");const r=n.validate(!0);if(r.length>0){let o="Signer Error ";for(const a of r)o+=`${o} ${a}.`;throw new eh(o)}const i=pe(n.serialize()),s=Xt(i);return{messageHash:pe(n.getMessageToSign(!0)),v:`0x${n.v.toString(16)}`,r:`0x${n.r.toString(16).padStart(64,"0")}`,s:`0x${n.s.toString(16).padStart(64,"0")}`,rawTransaction:i,transactionHash:pe(s)}}),DR=t=>{if(L(t))throw new px;const e=Ki.fromSerializedData(De(t));return Xn(e.getSenderAddress().toString())},gh=(t,e,n,r,i)=>{if(typeof t=="object"){const d=`${t.r}${t.s.slice(2)}${t.v.slice(2)}`;return gh(t.messageHash,d,n)}if(typeof e=="string"&&typeof n=="string"&&!L(r)){const d=`${n}${r.slice(2)}${e.slice(2)}`;return gh(t,d,i)}if(L(e))throw new Y2("signature string undefined");const s=130,o=n?t:sp(t);let a=parseInt(e.substring(s),16);a>26&&(a-=27);const u=Br.Signature.fromCompact(e.slice(2,s)).addRecoveryBit(a).recoverPublicKey(o.replace("0x","")).toRawBytes(!1),l=Xt(u.subarray(1));return Xn(`0x${l.slice(-40)}`)},pl=t=>{const e=Xs(t),n=Br.getPublicKey(e,!1),i=Xt(n.slice(1)).slice(-40);return Xn(`0x${i}`)},NR=(t,e)=>{const n=Xs(t);return`0x${pe(Br.getPublicKey(n,e)).slice(4)}`},rv=(t,e,n)=>fl(void 0,void 0,void 0,function*(){var r,i,s,o,a,u,l;const c=Xs(t);let d;if(n?.salt?d=typeof n.salt=="string"?De(n.salt):n.salt:d=fa(32),!(Df(e)||oi(e)))throw new tx;const h=typeof e=="string"?De(kn(e)):e;let g;if(n?.iv){if(g=typeof n.iv=="string"?De(n.iv):n.iv,g.length!==16)throw new nx}else g=fa(16);const f=(r=n?.kdf)!==null&&r!==void 0?r:"scrypt";let p,m;if(f==="pbkdf2"){if(m={dklen:(i=n?.dklen)!==null&&i!==void 0?i:32,salt:pe(d).replace("0x",""),c:(s=n?.c)!==null&&s!==void 0?s:262144,prf:"hmac-sha256"},m.c<1e3)throw new rx;p=$w(h,d,m.c,m.dklen,"sha256")}else if(f==="scrypt")m={n:(o=n?.n)!==null&&o!==void 0?o:8192,r:(a=n?.r)!==null&&a!==void 0?a:8,p:(u=n?.p)!==null&&u!==void 0?u:1,dklen:(l=n?.dklen)!==null&&l!==void 0?l:32,salt:pe(d).replace("0x","")},p=Uw(h,d,m.n,m.p,m.r,m.dklen);else throw new Ab;const y=yield Qf(c,p.slice(0,16),g,"aes-128-ctr"),w=pe(y).slice(2),b=Xt(Bt(p.slice(16,32),y)).replace("0x","");return{version:3,id:zf(),address:pl(c).toLowerCase().replace("0x",""),crypto:{ciphertext:w,cipherparams:{iv:pe(g).replace("0x","")},cipher:"aes-128-ctr",kdf:f,kdfparams:m,mac:b}}}),op=(t,e)=>{const n=Xs(t,e);return{address:pl(n),privateKey:pe(n),signTransaction:r=>{throw new eh("Do not have network access to sign the transaction")},sign:r=>nv(typeof r=="string"?r:JSON.stringify(r),n),encrypt:(r,i)=>fl(void 0,void 0,void 0,function*(){return rv(n,r,i)})}},MR=()=>{const t=Br.utils.randomPrivateKey();return op(`${pe(t)}`)},LR=(t,e,n)=>fl(void 0,void 0,void 0,function*(){const r=typeof t=="object"?t:JSON.parse(n?t.toLowerCase():t);if(ee.validateJSONSchema(x3,r),r.version!==3)throw new ex;const i=typeof e=="string"?De(kn(e)):e;ee.validate(["bytes"],[i]);let s;if(r.crypto.kdf==="scrypt"){const l=r.crypto.kdfparams,c=typeof l.salt=="string"?De(l.salt):l.salt;s=Uw(i,c,l.n,l.p,l.r,l.dklen)}else if(r.crypto.kdf==="pbkdf2"){const l=r.crypto.kdfparams,c=typeof l.salt=="string"?De(l.salt):l.salt;s=$w(i,c,l.c,l.dklen,"sha256")}else throw new Ab;const o=De(r.crypto.ciphertext);if(Xt(Bt(s.slice(16,32),o)).replace("0x","")!==r.crypto.mac)throw new X2;const u=yield kT(De(r.crypto.ciphertext),s.slice(0,16),De(r.crypto.cipherparams.iv));return op(u)});var am=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const $R=1e3;class UR{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map(e=>e.payload)}add(e){const n=zi(e),r=new pu;return this._requests.set(n.id,{payload:n,promise:r}),r}execute(e){return am(this,void 0,void 0,function*(){var n;if(this.requests.length===0)return Promise.resolve([]);const r=new pu({timeout:(n=e?.timeout)!==null&&n!==void 0?n:$R,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(r).catch(i=>r.reject(i)),r.catch(i=>{i instanceof xb&&this._abortAllRequests("Batch request timeout"),r.reject(i)}),r})}_processBatchRequest(e){return am(this,void 0,void 0,function*(){var n,r;const i=yield this._requestManager.sendBatch([...this._requests.values()].map(a=>a.payload));if(i.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new zn(i,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${i.length}`);const s=this.requests.map(a=>a.id).map(Number).sort((a,u)=>a-u),o=i.map(a=>a.id).map(Number).sort((a,u)=>a-u);if(JSON.stringify(s)!==JSON.stringify(o))throw this._abortAllRequests("Invalid batch response"),new zn(i,`Batch request mismatch the results. Requests: [${s.join()}], Responses: [${o.join()}]`);for(const a of i)Zr(a)?(n=this._requests.get(a.id))===null||n===void 0||n.promise.resolve(a.result):Jr(a)&&((r=this._requests.get(a.id))===null||r===void 0||r.promise.reject(a.error));e.resolve(i)})}_abortAllRequests(e){for(const{promise:n}of this._requests.values())n.reject(new lx(e))}}var FR=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class qt extends AT{constructor(e){var n;if(super(),this.providers=Ci.providers,te(e)||typeof e=="string"&&e.trim()!==""||gu(e)){this._requestManager=new Ci(e),this._subscriptionManager=new mu(this._requestManager,{});return}const{config:r,provider:i,requestManager:s,subscriptionManager:o,registeredSubscriptions:a,accountProvider:u,wallet:l,requestManagerMiddleware:c}=e;this.setConfig(r??{}),this._requestManager=s??new Ci(i,(n=r?.enableExperimentalFeatures)===null||n===void 0?void 0:n.useSubscriptionWhenCheckingBlockTimeout,c),o?this._subscriptionManager=o:this._subscriptionManager=new mu(this.requestManager,a??{}),u&&(this._accountProvider=u),l&&(this._wallet=l)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:(e=this.subscriptionManager)===null||e===void 0?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...n){const r=new e(...n,this.getContextObject());return this.on(Gi.CONFIG_CHANGE,i=>{r.setConfig({[i.name]:i.newValue})}),this[e.name]=r,r}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(Gi.CONFIG_CHANGE,n=>{this.setConfig({[n.name]:n.newValue})})}registerPlugin(e){if(this[e.pluginNamespace]!==void 0)throw new dx(e.pluginNamespace);const n={[e.pluginNamespace]:e};n[e.pluginNamespace].link(this),Object.assign(this,n)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return qt.givenProvider}setProvider(e){return this.provider=e,!0}setRequestManagerMiddleware(e){this.requestManager.setMiddleware(e)}get BatchRequest(){return UR.bind(void 0,this._requestManager)}extend(e){var n;return e.property&&!this[e.property]&&(this[e.property]={}),(n=e.methods)===null||n===void 0||n.forEach(r=>{const i=(...s)=>FR(this,void 0,void 0,function*(){return this.requestManager.send({method:r.call,params:s})});e.property?this[e.property][r.name]=i:this[r.name]=i}),this}}qt.providers=Ci.providers;class Ve{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const n=this._iban.slice(4),r=Ve._parseInt(n,36),i=da(r,40);return Xn(i)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},Ve.isIndirect(e)||Ve.isDirect(e))this._iban=e;else throw new Error("Invalid IBAN was provided")}static isDirect(e){return e.length===34||e.length===35}isDirect(){return Ve.isDirect(this._iban)}static isIndirect(e){return e.length===20}isIndirect(){return Ve.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&Ve._mod9710(Ve._iso13616Prepare(e))===1}isValid(){return Ve.isValid(this._iban)}static fromBban(e){const n="XE",i=`0${(98-this._mod9710(this._iso13616Prepare(`${n}00${e}`))).toString()}`.slice(-2);return new Ve(`${n}${i}${e}`)}static createIndirect(e){return Ve.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!Yt(e))throw new Rf(e);const r=BigInt(Da(e)).toString(36),i=da(r,15);return Ve.fromBban(i.toUpperCase())}static toIban(e){return Ve.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}Ve._iso13616Prepare=t=>{const r=t.toUpperCase();return`${r.slice(4)}${r.slice(0,4)}`.split("").map(s=>{const o=s.charCodeAt(0);return o>=65&&o<=90?o-65+10:s}).join("")};Ve._parseInt=(t,e)=>[...t].reduce((n,r)=>BigInt(parseInt(r,e))+BigInt(e)*n,BigInt(0));Ve._mod9710=t=>{let e=t,n;for(;e.length>2;)n=e.slice(0,9),e=`${(parseInt(n,10)%97).toString()}${e.slice(n.length)}`;return parseInt(e,10)%97};Ve.toAddress=t=>new Ve(t).toAddress();var ed=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})},iv;class sv extends ul{constructor(e){super(),this[iv]="Promise",this._promise=new Promise(e)}then(e,n){return ed(this,void 0,void 0,function*(){return this._promise.then(e,n)})}catch(e){return ed(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return ed(this,void 0,void 0,function*(){return this._promise.finally(e)})}on(e,n){return super.on(e,n),this}once(e,n){return super.once(e,n),this}}iv=Symbol.toStringTag;var td={},cm;function jR(){return cm||(cm=1,function(t,e){if(t.setImmediate)return;var n=1,r={},i=!1,s=t.document,o;function a(w){typeof w!="function"&&(w=new Function(""+w));for(var b=new Array(arguments.length-1),A=0;A<b.length;A++)b[A]=arguments[A+1];var E={callback:w,args:b};return r[n]=E,o(n),n++}function u(w){delete r[w]}function l(w){var b=w.callback,A=w.args;switch(A.length){case 0:b();break;case 1:b(A[0]);break;case 2:b(A[0],A[1]);break;case 3:b(A[0],A[1],A[2]);break;default:b.apply(e,A);break}}function c(w){if(i)setTimeout(c,0,w);else{var b=r[w];if(b){i=!0;try{l(b)}finally{u(w),i=!1}}}}function d(){o=function(w){process.nextTick(function(){c(w)})}}function h(){if(t.postMessage&&!t.importScripts){var w=!0,b=t.onmessage;return t.onmessage=function(){w=!1},t.postMessage("","*"),t.onmessage=b,w}}function g(){var w="setImmediate$"+Math.random()+"$",b=function(A){A.source===t&&typeof A.data=="string"&&A.data.indexOf(w)===0&&c(+A.data.slice(w.length))};t.addEventListener?t.addEventListener("message",b,!1):t.attachEvent("onmessage",b),o=function(A){t.postMessage(w+A,"*")}}function f(){var w=new MessageChannel;w.port1.onmessage=function(b){var A=b.data;c(A)},o=function(b){w.port2.postMessage(b)}}function p(){var w=s.documentElement;o=function(b){var A=s.createElement("script");A.onreadystatechange=function(){c(b),A.onreadystatechange=null,w.removeChild(A),A=null},w.appendChild(A)}}function m(){o=function(w){setTimeout(c,0,w)}}var y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,{}.toString.call(t.process)==="[object process]"?d():h()?g():t.MessageChannel?f():s&&"onreadystatechange"in s.createElement("script")?p():m(),y.setImmediate=a,y.clearImmediate=u}(typeof self>"u"?typeof un>"u"?td:un:self)),td}jR();var se=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function qR(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_protocolVersion",params:[]})})}function ov(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_syncing",params:[]})})}function HR(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_coinbase",params:[]})})}function zR(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_mining",params:[]})})}function GR(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_hashrate",params:[]})})}function VR(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_gasPrice",params:[]})})}function KR(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_maxPriorityFeePerGas",params:[]})})}function WR(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_accounts",params:[]})})}function QR(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_blockNumber",params:[]})})}function ZR(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getBalance",params:[e,n]})})}function JR(t,e,n,r){return se(this,void 0,void 0,function*(){return ee.validate(["address","hex","blockNumberOrTag"],[e,n,r]),t.send({method:"eth_getStorageAt",params:[e,n,r]})})}function YR(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getTransactionCount",params:[e,n]})})}function XR(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["bytes32"],[e]),t.send({method:"eth_getBlockTransactionCountByHash",params:[e]})})}function eB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["blockNumberOrTag"],[e]),t.send({method:"eth_getBlockTransactionCountByNumber",params:[e]})})}function tB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["bytes32"],[e]),t.send({method:"eth_getUncleCountByBlockHash",params:[e]})})}function nB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["blockNumberOrTag"],[e]),t.send({method:"eth_getUncleCountByBlockNumber",params:[e]})})}function rB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["address","blockNumberOrTag"],[e,n]),t.send({method:"eth_getCode",params:[e,n]})})}function iB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["address","hex"],[e,n]),t.send({method:"eth_sign",params:[e,n]})})}function sB(t,e){return se(this,void 0,void 0,function*(){return t.send({method:"eth_signTransaction",params:[e]})})}function oB(t,e){return se(this,void 0,void 0,function*(){return t.send({method:"eth_sendTransaction",params:[e]})})}function av(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["hex"],[e]),t.send({method:"eth_sendRawTransaction",params:[e]})})}function aB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_call",params:[e,n]})})}function cB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_estimateGas",params:[e,n]})})}function uB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["bytes32","bool"],[e,n]),t.send({method:"eth_getBlockByHash",params:[e,n]})})}function cv(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["blockNumberOrTag","bool"],[e,n]),t.send({method:"eth_getBlockByNumber",params:[e,n]})})}function lB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["bytes32"],[e]),t.send({method:"eth_getTransactionByHash",params:[e]})})}function dB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["bytes32","hex"],[e,n]),t.send({method:"eth_getTransactionByBlockHashAndIndex",params:[e,n]})})}function hB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["blockNumberOrTag","hex"],[e,n]),t.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[e,n]})})}function fB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["bytes32"],[e]),t.send({method:"eth_getTransactionReceipt",params:[e]})})}function pB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["bytes32","hex"],[e,n]),t.send({method:"eth_getUncleByBlockHashAndIndex",params:[e,n]})})}function gB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["blockNumberOrTag","hex"],[e,n]),t.send({method:"eth_getUncleByBlockNumberAndIndex",params:[e,n]})})}function mB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["filter"],[e]),t.send({method:"eth_newFilter",params:[e]})})}function yB(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_newBlockFilter",params:[]})})}function bB(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_newPendingTransactionFilter",params:[]})})}function wB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["hex"],[e]),t.send({method:"eth_uninstallFilter",params:[e]})})}function vB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["hex"],[e]),t.send({method:"eth_getFilterChanges",params:[e]})})}function EB(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["hex"],[e]),t.send({method:"eth_getFilterLogs",params:[e]})})}function _B(t,e){return se(this,void 0,void 0,function*(){return ee.validate(["filter"],[e]),t.send({method:"eth_getLogs",params:[e]})})}function AB(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_getWork",params:[]})})}function xB(t,e,n,r){return se(this,void 0,void 0,function*(){return ee.validate(["bytes8","bytes32","bytes32"],[e,n,r]),t.send({method:"eth_submitWork",params:[e,n,r]})})}function IB(t,e,n,r){return se(this,void 0,void 0,function*(){ee.validate(["hex","blockNumberOrTag"],[e,n]);for(const i of r)ee.validate(["number"],[i]);return t.send({method:"eth_feeHistory",params:[e,n,r]})})}function SB(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_pendingTransactions",params:[]})})}function TB(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_requestAccounts",params:[]})})}function RB(t){return se(this,void 0,void 0,function*(){return t.send({method:"eth_chainId",params:[]})})}function BB(t,e,n,r){return se(this,void 0,void 0,function*(){return ee.validate(["address","bytes32[]","blockNumberOrTag"],[e,n,r]),t.send({method:"eth_getProof",params:[e,n,r]})})}function PB(t){return se(this,void 0,void 0,function*(){return t.send({method:"web3_clientVersion",params:[]})})}function kB(t,e,n){return se(this,void 0,void 0,function*(){return ee.validate(["blockNumberOrTag"],[n]),t.send({method:"eth_createAccessList",params:[e,n]})})}function OB(t,e,n,r=!1){return se(this,void 0,void 0,function*(){return ee.validate(["address"],[e]),t.send({method:`eth_signTypedData${r?"":"_v4"}`,params:[e,n]})})}var ap=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function CB(t){return ap(this,void 0,void 0,function*(){return t.send({method:"net_version",params:[]})})}function DB(t){return ap(this,void 0,void 0,function*(){return t.send({method:"net_peerCount",params:[]})})}function NB(t){return ap(this,void 0,void 0,function*(){return t.send({method:"net_listening",params:[]})})}var Pr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const MB=t=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_listAccounts",params:[]})}),LB=(t,e)=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_newAccount",params:[e]})}),$B=(t,e,n,r)=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_unlockAccount",params:[e,n,r]})}),UB=(t,e)=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_lockAccount",params:[e]})}),FB=(t,e,n)=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_importRawKey",params:[e,n]})}),jB=(t,e,n)=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_sendTransaction",params:[e,n]})}),qB=(t,e,n)=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_signTransaction",params:[e,n]})}),HB=(t,e,n,r)=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_sign",params:[e,n,r]})}),zB=(t,e,n)=>Pr(void 0,void 0,void 0,function*(){return t.send({method:"personal_ecRecover",params:[e,n]})}),um={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},lm={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},dm={type:"object",properties:{gasPrice:{type:"null"}}},tc=(t,e,n)=>{try{ee.validateJSONSchema(t,e)}catch(r){throw r instanceof Ds?new $x(r.errors,n):r}},GB=t=>{var e,n;const r=t;if(!L(r.type)){let s;switch(r.type){case"0x0":s=um;break;case"0x1":s=lm;break;case"0x2":s=dm;break;default:return F({format:"uint"},r.type,oe)}return tc(s,r,r.type),F({format:"uint"},r.type,oe)}if(!L(r.maxFeePerGas)||!L(r.maxPriorityFeePerGas))return tc(dm,r,"0x2"),"0x2";if(!L(r.accessList))return tc(lm,r,"0x1"),"0x1";const i=(e=r.hardfork)!==null&&e!==void 0?e:(n=r.common)===null||n===void 0?void 0:n.hardfork;if(!L(i)){const s=Object.keys(Lo).indexOf(i);if(s>=Object.keys(Lo).indexOf("london"))return L(r.gasPrice)?"0x2":"0x0";if(s===Object.keys(Lo).indexOf("berlin"))return"0x0"}if(!L(r.gasPrice))return tc(um,r,"0x0"),"0x0"},VB=(t,e)=>{var n;return((n=e?.transactionTypeParser)!==null&&n!==void 0?n:GB)(t)},KB=t=>t[0]>127?"0x0":Ir(t[0]),WB={type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}},cp={type:"array",items:Object.assign({},WB)},QB={type:"object",properties:{accessList:Object.assign({},cp),gasUsed:{type:"string"}}},hm={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},fm={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},ZB={type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}},uv={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},cp),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},hm),hardfork:Object.assign({},fm),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},ZB),baseChain:Object.assign({},hm),hardfork:Object.assign({},fm)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},mh={type:"object",properties:Object.assign(Object.assign({},uv.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},cp),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},lv={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},vu={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},mh)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},lv)},withdrawalsRoot:{format:"bytes32"}}},JB={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},lv)},withdrawalsRoot:{format:"bytes32"}}},eo={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},YB={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},to={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},eo)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},XB={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},eP={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},tP={type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}},nP={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},tP)}}};function Gt(t,e=At,n={transactionSchema:mh,fillInputAndData:!1}){var r,i;let s=ai({},t);if(L(t?.common)||(s.common=Object.assign({},t.common),L((r=t.common)===null||r===void 0?void 0:r.customChain)||(s.common.customChain=Object.assign({},t.common.customChain))),s=F((i=n.transactionSchema)!==null&&i!==void 0?i:mh,s,e),!L(s.data)&&!L(s.input)&&Ir(s.data)!==Ir(s.input))throw new Rb({data:pe(s.data),input:pe(s.input)});return n.fillInputAndData&&(L(s.data)?L(s.input)||(s.data=s.input):s.input=s.data),L(s.gasLimit)||(s.gas=s.gasLimit,delete s.gasLimit),s}function rP(t,e,n={fillInputAndData:!1}){return{raw:F({format:"bytes"},t,e),tx:Gt(Object.assign(Object.assign({},Ki.fromSerializedData(De(t)).toJSON()),{hash:pe(Ls(De(t))),type:KB(De(t))}),e,{fillInputAndData:n.fillInputAndData,transactionSchema:n.transactionSchema})}}var up=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function lp(t,e){return up(this,void 0,void 0,function*(){const n=yield CB(t.requestManager);return F({format:"uint"},n,e)})}function iP(t,e){return up(this,void 0,void 0,function*(){const n=yield DB(t.requestManager);return F({format:"uint"},n,e)})}const sP=t=>up(void 0,void 0,void 0,function*(){return NB(t.requestManager)});var nd=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class dv extends qt{getId(e=this.defaultReturnFormat){return nd(this,void 0,void 0,function*(){return lp(this,e)})}getPeerCount(e=this.defaultReturnFormat){return nd(this,void 0,void 0,function*(){return iP(this,e)})}isListening(){return nd(this,void 0,void 0,function*(){return sP(this)})}}const Hs="ALLEVENTS",yh={name:Hs,signature:"",type:"event",inputs:[]},gl={bytes:_r.HEX,number:hn.NUMBER};var hv=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function oP(t,e,n){return hv(this,void 0,void 0,function*(){var r,i,s,o;const a=yield jv(e,e.defaultBlock,!1,oe);if(L(a.baseFeePerGas))throw new Dx;let u;if(L(t.gasPrice)&&BigInt(a.baseFeePerGas)===BigInt(0)&&(u=yield wp(e,n)),!L(t.gasPrice)||!L(u)){const l=F({format:"uint"},(r=t.gasPrice)!==null&&r!==void 0?r:u,n);return{maxPriorityFeePerGas:l,maxFeePerGas:l}}return{maxPriorityFeePerGas:F({format:"uint"},(i=t.maxPriorityFeePerGas)!==null&&i!==void 0?i:e.defaultMaxPriorityFeePerGas,n),maxFeePerGas:F({format:"uint"},(s=t.maxFeePerGas)!==null&&s!==void 0?s:BigInt(a.baseFeePerGas)*BigInt(2)+BigInt((o=t.maxPriorityFeePerGas)!==null&&o!==void 0?o:e.defaultMaxPriorityFeePerGas),n)}})}function fv(t,e,n){return hv(this,void 0,void 0,function*(){const r=pv(t,e);if(!L(r)){if(r.startsWith("-"))throw new _g(r);if(Number(r)<0||Number(r)>127)throw new _g(r);if(L(t.gasPrice)&&(r==="0x0"||r==="0x1"))return{gasPrice:yield wp(e,n),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if(r==="0x2")return Object.assign({gasPrice:void 0},yield oP(t,e,n))}})}var dp=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const bh=(t,e,n,r)=>{if(n!==void 0&&t in n&&n[t]!==void 0){if(typeof n[t]=="string"&&Yt(n[t]))return n[t];if(!xe(n[t])&&cw(n[t])){if(e.wallet){const i=e.wallet.get(F({format:"uint"},n[t],gl));if(!L(i))return i.address;throw new Ag}throw new Ag}else throw t==="from"?new gx(n.from):new mx(n.to)}if(t==="from"){if(!L(r))return pl(r);if(!L(e.defaultAccount))return e.defaultAccount}},aP=(t,e,...n)=>dp(void 0,[t,e,...n],void 0,function*(r,i,s=r.defaultReturnFormat){if(L(i))throw new Cx;return Hv(r,i,r.defaultBlock,s)}),pv=(t,e)=>{const n=VB(t,e);if(!L(n))return n;if(!L(e.defaultTransactionType))return F({format:"uint"},e.defaultTransactionType,oe)};function cP(t){return dp(this,void 0,void 0,function*(){var e,n;let r=F(uv,t.transaction,t.web3Context.defaultReturnFormat);if(L(r.from)&&(r.from=bh("from",t.web3Context,void 0,t.privateKey)),L(r.nonce)&&(r.nonce=yield aP(t.web3Context,r.from,oe)),L(r.value)&&(r.value="0x0"),L(r.data))L(r.input)?r.input="0x":r.input.startsWith("0x")||(r.input=`0x${r.input}`);else{if(!L(r.input)&&r.data!==r.input)throw new Rb({data:pe(r.data),input:pe(r.input)});r.data.startsWith("0x")||(r.data=`0x${r.data}`)}if(L(r.common)){if(t.web3Context.defaultCommon){const i=t.web3Context.defaultCommon,s=i.customChain.chainId,o=i.customChain.networkId,a=i.customChain.name;r.common=Object.assign(Object.assign({},i),{customChain:{chainId:s,networkId:o,name:a}})}L(r.chain)&&(r.chain=t.web3Context.defaultChain),L(r.hardfork)&&(r.hardfork=t.web3Context.defaultHardfork)}if(L(r.chainId)&&L((e=r.common)===null||e===void 0?void 0:e.customChain.chainId)&&(r.chainId=yield Gv(t.web3Context,oe)),L(r.networkId)&&(r.networkId=(n=t.web3Context.defaultNetworkId)!==null&&n!==void 0?n:yield lp(t.web3Context,oe)),L(r.gasLimit)&&!L(r.gas)&&(r.gasLimit=r.gas),r.type=pv(r,t.web3Context),L(r.accessList)&&(r.type==="0x1"||r.type==="0x2")&&(r.accessList=[]),t.fillGasPrice&&(r=Object.assign(Object.assign({},r),yield fv(r,t.web3Context,oe))),L(r.gas)&&L(r.gasLimit)&&t.fillGasLimit){const i=yield _p(t.web3Context,r,"latest",oe);r=Object.assign(Object.assign({},r),{gas:F({format:"uint"},i,oe)})}return r})}const uP=t=>dp(void 0,void 0,void 0,function*(){var e;return((e=t.web3Context.transactionBuilder)!==null&&e!==void 0?e:cP)(Object.assign(Object.assign({},t),{transaction:t.transaction}))});var hp=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function wh(t,e,n){const r=t.transactionPollingInterval,[i,s]=_w(()=>hp(this,void 0,void 0,function*(){let a;try{a=yield vp(t,gl)}catch(l){console.warn("An error happen while trying to get the block number",l);return}const u=a-e;if(u>=t.transactionBlockTimeout)return new kb({starterBlockNumber:e,numberOfBlocks:u,transactionHash:n})}),r);return[s,{clean:()=>{clearInterval(i)}}]}function lP(t,e,n){return hp(this,void 0,void 0,function*(){var r;let i=!0,s,o;function a(l,c){c&&console.warn("error happened at subscription. So revert to polling...",c),o.clean(),i=!1;const[d,h]=wh(t,e,n);o.clean=h.clean,d.catch(g=>l(g))}try{s=yield(r=t.subscriptionManager)===null||r===void 0?void 0:r.subscribe("newHeads"),o={clean:()=>{var l;s.id&&((l=t.subscriptionManager)===null||l===void 0||l.removeSubscription(s).then(()=>{}).catch(()=>{}))}}}catch{return wh(t,e,n)}return[new Promise((l,c)=>{try{s.on("data",d=>{if(i=!1,!d?.number)return;const h=Number(BigInt(d.number)-BigInt(e));h>=t.transactionBlockTimeout&&c(new kb({starterBlockNumber:e,numberOfBlocks:h,transactionHash:n}))}),s.on("error",d=>{a(c,d)})}catch(d){a(c,d)}setTimeout(()=>{i&&a(c)},t.blockHeaderTimeout*1e3)}),o]})}function gv(t,e){return hp(this,void 0,void 0,function*(){var n,r;const{provider:i}=t.requestManager;let s;const o=yield vp(t,gl);return!((r=(n=i).supportsSubscriptions)===null||r===void 0)&&r.call(n)&&t.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?s=yield lP(t,o,e):s=wh(t,o,e),s})}var dP=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function vh(t,e,n){return dP(this,void 0,void 0,function*(){const[r,i]=Hf(t.transactionSendTimeout,new Nx({numberOfSeconds:t.transactionSendTimeout/1e3,transactionHash:n})),[s,o]=yield gv(t,n);try{return yield Promise.race([e(),i,s])}finally{clearTimeout(r),o.clean()}})}var pm=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function mv(t,e,n,r){return pm(this,void 0,void 0,function*(){var i;const s=(i=t.transactionReceiptPollingInterval)!==null&&i!==void 0?i:t.transactionPollingInterval,[o,a]=qf(()=>pm(this,void 0,void 0,function*(){try{return(r??qv)(t,e,n)}catch(h){console.warn("An error happen while trying to get the transaction receipt",h);return}}),s),[u,l]=Hf(t.transactionPollingTimeout,new Pb({numberOfSeconds:t.transactionPollingTimeout/1e3,transactionHash:e})),[c,d]=yield gv(t,e);try{return yield Promise.race([o,l,c])}finally{u&&clearTimeout(u),a&&clearInterval(a),d.clean()}})}var hP=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const Sc=({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})=>{var s;let o=1;const a=setInterval(()=>{hP(void 0,void 0,void 0,function*(){if(o>=t.transactionConfirmationBlocks){clearInterval(a);return}const u=yield cv(t.requestManager,Ye(BigInt(e.blockNumber)+BigInt(o)),!1);u?.hash&&(o+=1,n.emit("confirmation",{confirmations:F({format:"uint"},o,i),receipt:F(r??to,e,i),latestBlockHash:F({format:"bytes32"},u.hash,i)}))})},(s=t.transactionReceiptPollingInterval)!==null&&s!==void 0?s:t.transactionPollingInterval)};var gm=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const fP=({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})=>{let s=!0,o;setImmediate(()=>{var a;(a=t.subscriptionManager)===null||a===void 0||a.subscribe("newHeads").then(u=>{u.on("data",l=>gm(void 0,void 0,void 0,function*(){var c;if(s=!1,!l?.number||o===l?.parentHash)return;o=l?.parentHash;const d=BigInt(l.number)-BigInt(e.blockNumber)+BigInt(1);n.emit("confirmation",{confirmations:F({format:"uint"},d,i),receipt:F(r??to,e,i),latestBlockHash:F({format:"bytes32"},l.parentHash,i)}),d>=t.transactionConfirmationBlocks&&(yield(c=t.subscriptionManager)===null||c===void 0?void 0:c.removeSubscription(u))})),u.on("error",()=>gm(void 0,void 0,void 0,function*(){var l;yield(l=t.subscriptionManager)===null||l===void 0?void 0:l.removeSubscription(u),s=!1,Sc({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})}))}).catch(()=>{s=!1,Sc({web3Context:t,transactionReceipt:e,customTransactionReceiptSchema:r,transactionPromiEvent:n,returnFormat:i})})}),setTimeout(()=>{s&&Sc({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,returnFormat:i})},t.blockHeaderTimeout*1e3)};function pP(t,e,n,r,i,s){if(L(n)||L(n.blockHash))throw new Mx({receipt:n,blockHash:F({format:"bytes32"},n?.blockHash,i),transactionHash:F({format:"bytes32"},r,i)});if(!n.blockNumber)throw new Lx({receipt:n});e.emit("confirmation",{confirmations:F({format:"uint"},1,i),receipt:F(s??to,n,i),latestBlockHash:F({format:"bytes32"},n.blockHash,i)});const o=t.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?fP({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:s,returnFormat:i}):Sc({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:s,returnFormat:i})}const ml=t=>!te(t)&&typeof t=="object"&&!te(t.type)&&t.type==="error",fp=t=>!te(t)&&typeof t=="object"&&!te(t.type)&&t.type==="event",yl=t=>!te(t)&&typeof t=="object"&&!te(t.type)&&t.type==="function",gP=t=>!te(t)&&typeof t=="object"&&!te(t.type)&&t.type==="constructor",mP=t=>typeof t=="object"&&typeof t.components>"u"&&typeof t.name>"u",yv=t=>t.includes("[]")?{type:"tuple[]",name:t.slice(0,-2)}:{type:"tuple",name:t},bv=t=>{const e=[];for(const n of Object.keys(t)){const r=t[n];typeof r=="object"?e.push(Object.assign(Object.assign({},yv(n)),{components:bv(r)})):e.push({name:n,type:t[n]})}return e},Eh=(t,e)=>{const n=[];return e.forEach(r=>{if(typeof r.components=="object"){if(!r.type.startsWith("tuple"))throw new ge(`Invalid value given "${r.type}". Error: components found but type is not tuple.`);const i=r.type.indexOf("["),s=i>=0?r.type.substring(i):"",o=Eh(t,r.components);n.push(`(${o.join(",")})${s}`)}else n.push(r.type)}),n},vr=t=>{var e,n,r,i;return ml(t)||fp(t)||yl(t)?!((e=t.name)===null||e===void 0)&&e.includes("(")?t.name:`${(n=t.name)!==null&&n!==void 0?n:""}(${Eh(!1,(r=t.inputs)!==null&&r!==void 0?r:[]).join(",")})`:`(${Eh(!1,(i=t.inputs)!==null&&i!==void 0?i:[]).join(",")})`},yP=t=>{if(typeof t!="string"&&!ml(t))throw new ge("Invalid parameter value in encodeErrorSignature");let e;return t&&(typeof t=="function"||typeof t=="object")?e=vr(t):e=t,Xt(e)},pp=t=>{if(typeof t!="string"&&!fp(t))throw new ge("Invalid parameter value in encodeEventSignature");let e;return t&&(typeof t=="function"||typeof t=="object")?e=vr(t):e=t,Xt(e)};function gp(t,e){return t.exec(e)?.groups}var wv=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,vv=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Ev=/^\(.+?\).*?$/,bP=Object.defineProperty,wP=(t,e,n)=>e in t?bP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,go=(t,e,n)=>(wP(t,typeof e!="symbol"?e+"":e,n),n),vP="abitype",EP="0.7.1",Ft=class extends Error{constructor(e,n={}){const r=n.cause instanceof Ft?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof Ft&&n.cause.docsPath||n.docsPath,s=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...r?[`Details: ${r}`]:[],`Version: ${vP}@${EP}`].join(`
`);super(s),go(this,"details"),go(this,"docsPath"),go(this,"metaMessages"),go(this,"shortMessage"),go(this,"name","AbiTypeError"),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=e}},_v=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function Av(t){return _v.test(t)}function _P(t){return gp(_v,t)}var mm=new Set(["memory","indexed","storage","calldata"]),AP=new Set(["calldata","memory","storage"]);function xP(t,e){return e?`${e}:${t}`:t}var rd=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),IP=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,SP=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,TP=/^u?int$/;function Eu(t,e){const n=xP(t,e?.type);if(rd.has(n))return rd.get(n);const r=Ev.test(t),i=gp(r?SP:IP,t);if(!i)throw new Ft("Invalid ABI parameter.",{details:t});if(i.name&&BP(i.name))throw new Ft("Invalid ABI parameter.",{details:t,metaMessages:[`"${i.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const s=i.name?{name:i.name}:{},o=i.modifier==="indexed"?{indexed:!0}:{},a=e?.structs??{};let u,l={};if(r){u="tuple";const d=bs(i.type),h=[],g=d.length;for(let f=0;f<g;f++)h.push(Eu(d[f],{structs:a}));l={components:h}}else if(i.type in a)u="tuple",l={components:a[i.type]};else if(TP.test(i.type))u=`${i.type}256`;else if(u=i.type,e?.type!=="struct"&&!xv(u))throw new Ft("Unknown type.",{metaMessages:[`Type "${u}" is not a valid ABI type.`]});if(i.modifier){if(!e?.modifiers?.has?.(i.modifier))throw new Ft("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${i.modifier}" not allowed${e?.type?` in "${e.type}" type`:""}.`]});if(AP.has(i.modifier)&&!PP(u,!!i.array))throw new Ft("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${i.modifier}" not allowed${e?.type?` in "${e.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i.modifier}" was given.`]})}const c={type:`${u}${i.array??""}`,...s,...o,...l};return rd.set(n,c),c}function bs(t,e=[],n="",r=0){if(t===""){if(n==="")return e;if(r!==0)throw new Ft("Unbalanced parentheses.",{metaMessages:[`"${n.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`});return[...e,n.trim()]}const i=t.length;for(let s=0;s<i;s++){const o=t[s],a=t.slice(s+1);switch(o){case",":return r===0?bs(a,[...e,n.trim()]):bs(a,e,`${n}${o}`,r);case"(":return bs(a,e,`${n}${o}`,r+1);case")":return bs(a,e,`${n}${o}`,r-1);default:return bs(a,e,`${n}${o}`,r)}}return[]}function xv(t){return t==="address"||t==="bool"||t==="function"||t==="string"||wv.test(t)||vv.test(t)}var RP=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function BP(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||wv.test(t)||vv.test(t)||RP.test(t)}function PP(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function kP(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!Av(a))continue;const u=_P(a);if(!u)throw new Ft("Invalid struct signature.",{details:a});const l=u.properties.split(";"),c=[],d=l.length;for(let h=0;h<d;h++){const f=l[h].trim();if(!f)continue;const p=Eu(f,{type:"struct"});c.push(p)}if(!c.length)throw new Ft("Invalid struct signature.",{details:a,metaMessages:["No properties exist."]});e[u.name]=c}const r={},i=Object.entries(e),s=i.length;for(let o=0;o<s;o++){const[a,u]=i[o];r[a]=Iv(u,e)}return r}var OP=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function Iv(t,e,n=new Set){const r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];if(Ev.test(o.type))r.push(o);else{const u=gp(OP,o.type);if(!u?.type)throw new Ft("Invalid ABI parameter.",{details:JSON.stringify(o,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:l,type:c}=u;if(c in e){if(n.has(c))throw new Ft("Circular reference detected.",{metaMessages:[`Struct "${c}" is a circular reference.`]});r.push({...o,type:`tuple${l??""}`,components:Iv(e[c]??[],e,new Set([...n,c]))})}else if(xv(c))r.push(o);else throw new Ft("Unknown type.",{metaMessages:[`Type "${c}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]})}}return r}function CP(t){let e;if(typeof t=="string")e=Eu(t,{modifiers:mm});else{const n=kP(t),r=t.length;for(let i=0;i<r;i++){const s=t[i];if(!Av(s)){e=Eu(s,{modifiers:mm,structs:n});break}}}if(!e)throw new Ft("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(t,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return e}const je=32;function _h(t=0){var e;if(((e=globalThis.Buffer)===null||e===void 0?void 0:e.alloc)!==void 0){const n=globalThis.Buffer.alloc(t);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}return new Uint8Array(t)}function Sv(t){var e,n;return Object.assign(Object.assign({},t),{name:(e=t.name)!==null&&e!==void 0?e:"",components:(n=t.components)===null||n===void 0?void 0:n.map(r=>Sv(r))})}function DP(t){return!te(t)&&typeof t=="object"&&!te(t.type)&&typeof t.type=="string"}function Tv(t){return t.map(e=>{var n;if(DP(e))return e;if(typeof e=="string")return Sv(CP(e.replace(/tuple/,"")));if(mP(e)){const r=Object.keys(e)[0],i=yv(r);return i.name=(n=i.name)!==null&&n!==void 0?n:"",Object.assign(Object.assign({},i),{components:bv(e[r])})}throw new ge("Invalid abi")})}function mp(t){const e=t.type.lastIndexOf("["),n=t.type.substring(0,e),r=t.type.substring(e);let i=-1;if(r!=="[]"&&(i=Number(r.slice(1,-1)),isNaN(i)))throw new ge("Invalid fixed array size",{size:r});return{param:{type:n,name:"",components:t.components},size:i}}function _u(t){var e,n;return t.type==="string"||t.type==="bytes"||t.type.endsWith("[]")?!0:t.type==="tuple"?(n=(e=t.components)===null||e===void 0?void 0:e.some(_u))!==null&&n!==void 0?n:!1:t.type.endsWith("]")?_u(mp(t).param):!1}const Rv=20,Bv=je-Rv;function NP(t,e){if(typeof e!="string")throw new ge("address type expects string as input type",{value:e,name:t.name,type:t.type});let n=e.toLowerCase();if(n.startsWith("0x")||(n=`0x${n}`),!Yt(n))throw new ge("provided input is not valid address",{value:e,name:t.name,type:t.type});const r=Xi(n),i=_h(je);return i.set(r,Bv),{dynamic:!1,encoded:i}}function MP(t,e){const n=e.subarray(Bv,je);if(n.length!==Rv)throw new ge("Invalid decoding input, not enough bytes to decode address",{bytes:e});const r=Rr(n);return{result:Xn(r),encoded:e.subarray(je),consumed:je}}const ri=new Map;let nc=BigInt(256);for(let t=8;t<=256;t+=8)ri.set(`uint${t}`,{min:BigInt(0),max:nc-BigInt(1)}),ri.set(`int${t}`,{min:-nc/BigInt(2),max:nc/BigInt(2)-BigInt(1)}),nc*=BigInt(256);ri.set("int",ri.get("int256"));ri.set("uint",ri.get("uint256"));const Pv=BigInt(1)<<BigInt(256);function LP(t,e=je){let n;return t<0?n=(Pv+t).toString(16):n=t.toString(16),n=Ms(n,e*2),Xi(n)}function $P(t,e){const n=Rr(t),r=BigInt(n);return r<=e?r:r-Pv}function Fa(t,e){let n;try{n=vi(e)}catch{throw new ge("provided input is not number value",{type:t.type,value:e,name:t.name})}const r=ri.get(t.type);if(!r)throw new ge("provided abi contains invalid number datatype",{type:t.type});if(n<r.min)throw new ge("provided input is less then minimum for given type",{type:t.type,value:e,name:t.name,minimum:r.min.toString()});if(n>r.max)throw new ge("provided input is greater then maximum for given type",{type:t.type,value:e,name:t.name,maximum:r.max.toString()});return{dynamic:!1,encoded:LP(n)}}function zs(t,e){if(e.length<je)throw new ge("Not enough bytes left to decode",{param:t,bytesLeft:e.length});const n=e.subarray(0,je),r=ri.get(t.type);if(!r)throw new ge("provided abi contains invalid number datatype",{type:t.type});const i=$P(n,r.max);if(i<r.min)throw new ge("decoded value is less then minimum for given type",{type:t.type,value:i,name:t.name,minimum:r.min.toString()});if(i>r.max)throw new ge("decoded value is greater then maximum for given type",{type:t.type,value:i,name:t.name,maximum:r.max.toString()});return{result:i,encoded:e.subarray(je),consumed:je}}function UP(t,e){let n;try{n=fw(e)}catch(r){if(r instanceof Bf)throw new ge("provided input is not valid boolean value",{type:t.type,value:e,name:t.name})}return Fa({type:"uint8",name:""},Number(n))}function FP(t,e){const n=zs({type:"uint8",name:""},e);if(n.result>1||n.result<0)throw new ge("Invalid boolean value encoded",{boolBytes:e.subarray(0,je),numberResult:n});return{result:n.result===BigInt(1),encoded:n.encoded,consumed:je}}const jP=32;function kv(t,e){if(typeof e=="string"&&e.length%2!==0&&(e+="0"),!si(e))throw new ge("provided input is not valid bytes value",{type:t.type,value:e,name:t.name});const n=Jn(e),[,r]=t.type.split("bytes");if(r){if(Number(r)>jP||Number(r)<1)throw new ge("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:t.type});if(Number(r)<n.length)throw new ge("provided input size is different than type size",{type:t.type,value:e,name:t.name});const o=_h(je);return o.set(n),{dynamic:!1,encoded:o}}const i=Math.ceil(n.length/je),s=_h(je+i*je);return s.set(Fa({type:"uint32",name:""},n.length).encoded),s.set(n,je),{dynamic:!0,encoded:s}}function Ov(t,e){const[,n]=t.type.split("bytes");let r=Number(n),i=e,s=1,o=0;if(!r){const a=zs({type:"uint32",name:""},i);r=Number(a.result),o+=a.consumed,i=a.encoded,s=Math.ceil(r/je)}if(r>e.length)throw new ge("there is not enough data to decode",{type:t.type,encoded:e,size:r});return{result:pe(i.subarray(0,r)),encoded:i.subarray(s*je),consumed:o+s*je}}function qP(t,e){if(typeof e!="string")throw new ge("invalid input, should be string",{input:e});const n=Uf(e);return kv({type:"bytes",name:""},n)}function HP(t,e){const n=Ov({type:"bytes"},e);return{result:sl(n.result),encoded:n.encoded,consumed:n.consumed}}function Cv(t){let e=0,n=0;const r=[],i=[];for(const s of t)s.dynamic?e+=je:e+=s.encoded.length;for(const s of t)s.dynamic?(r.push(Fa({type:"uint256",name:""},e+n)),i.push(s),n+=s.encoded.length):r.push(s);return Bt(...r.map(s=>s.encoded),...i.map(s=>s.encoded))}function zP(t,e){if(!Array.isArray(e))throw new ge("Expected value to be array",{abi:t,values:e});const{size:n,param:r}=mp(t),i=e.map(a=>Ah(r,a)),s=n===-1,o=i.length>0&&i[0].dynamic;if(!s&&e.length!==n)throw new ge("Given arguments count doesn't match array length",{arrayLength:n,argumentsLength:e.length});if(s||o){const a=Cv(i);if(s){const u=Fa({type:"uint256",name:""},i.length).encoded;return{dynamic:!0,encoded:i.length>0?Bt(u,a):u}}return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Bt(...i.map(a=>a.encoded))}}function GP(t,e){let{size:n,param:r}=mp(t);const i=n===-1;let s=0;const o=[];let a=e;if(i){const l=zs({type:"uint32",name:""},e);n=Number(l.result),s=l.consumed,a=l.encoded}if(_u(r)){for(let l=0;l<n;l+=1){const c=zs({type:"uint32",name:""},a.subarray(l*je));s+=c.consumed;const d=Au(r,a.subarray(Number(c.result)));s+=d.consumed,o.push(d.result)}return{result:o,encoded:a.subarray(s),consumed:s}}for(let l=0;l<n;l+=1){const c=Au(r,e.subarray(s));s+=c.consumed,o.push(c.result)}return{result:o,encoded:e.subarray(s),consumed:s}}function Ah(t,e){if(t.type==="string")return qP(t,e);if(t.type==="bool")return UP(t,e);if(t.type==="address")return NP(t,e);if(t.type==="tuple")return yp(t,e);if(t.type.endsWith("]"))return zP(t,e);if(t.type.startsWith("bytes"))return kv(t,e);if(t.type.startsWith("uint")||t.type.startsWith("int"))return Fa(t,e);throw new ge("Unsupported",{param:t,value:e})}function Au(t,e){if(t.type==="string")return HP(t,e);if(t.type==="bool")return FP(t,e);if(t.type==="address")return MP(t,e);if(t.type==="tuple")return Dv(t,e);if(t.type.endsWith("]"))return GP(t,e);if(t.type.startsWith("bytes"))return Ov(t,e);if(t.type.startsWith("uint")||t.type.startsWith("int"))return zs(t,e);throw new ge("Unsupported",{param:t,bytes:e})}function yp(t,e){var n,r,i;let s=!1;if(!Array.isArray(e)&&typeof e!="object")throw new ge("param must be either Array or Object",{param:t,input:e});const o=e,a=[];for(let u=0;u<((r=(n=t.components)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0);u+=1){const l=t.components[u];let c;if(Array.isArray(o)){if(u>=o.length)throw new ge("input param length missmatch",{param:t,input:e});c=Ah(l,o[u])}else{const d=o[(i=l.name)!==null&&i!==void 0?i:""];if(d==null)throw new ge("missing input defined in abi",{param:t,input:e,paramName:l.name});c=Ah(l,d)}c.dynamic&&(s=!0),a.push(c)}return s?{dynamic:!0,encoded:Cv(a)}:{dynamic:!1,encoded:Bt(...a.map(u=>u.encoded))}}function Dv(t,e){const n={__length__:0};let r=0;if(!t.components)return{result:n,encoded:e,consumed:r};let i=0;for(const[s,o]of t.components.entries()){let a;if(_u(o)){const u=zs({type:"uint32",name:""},e.subarray(r));a=Au(o,e.subarray(Number(u.result))),r+=u.consumed,i+=a.consumed}else a=Au(o,e.subarray(r)),r+=a.consumed;n.__length__+=1,n[s]=a.result,o.name&&o.name!==""&&(n[o.name]=a.result)}return{encoded:e.subarray(r+i),result:n,consumed:r+i}}function VP(t,e,n){const r=Tv(t),i=Xi(e);return Dv({components:r},i).result}function Nv(t){const e=[];return t.forEach(n=>{if(Array.isArray(n)){const r=Nv(n);e.push({type:"tuple",components:r,name:""})}else e.push({type:Ir(n,!0)})}),e}function bl(t,e){if(t?.length!==e.length)throw new ge("Invalid number of values received for given ABI",{expected:t?.length,received:e.length});const n=Tv(t);return Rr(yp({type:"tuple",name:"",components:n},e).encoded)}function KP(t){try{const e=Nv(t);return Rr(yp({type:"tuple",name:"",components:e},t).encoded)}catch{throw new ge("Could not infer types from given params",{params:t})}}const xh=(t,e)=>bl([t],[e]),Mv=(t,e,n)=>{try{if(t.length>0&&(!e||e==="0x"||e==="0X"))throw new ge("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return VP(t,`0x${e.replace(/0x/i,"")}`,n)}catch(r){throw new ge(`Parameter decoding error: ${r.message}`,{internalErr:r})}},Ni=(t,e)=>Mv(t,e,!1),Lv=(t,e)=>Ni([t],e)[0],ya=t=>{if(typeof t!="string"&&!yl(t))throw new ge("Invalid parameter value in encodeFunctionSignature");let e;return t&&(typeof t=="function"||typeof t=="object")?e=vr(t):e=t,Xt(e).slice(0,10)},WP=(t,e)=>{var n;if(!yl(t))throw new ge("Invalid parameter value in encodeFunctionCall");return`${ya(t)}${bl((n=t.inputs)!==null&&n!==void 0?n:[],e??[]).replace("0x","")}`},Ih=(t,e,n=!0)=>{const r=n&&e&&e.length>=10&&e.startsWith("0x")?e.slice(10):e;if(!t.inputs)throw new xt("No inputs found in the ABI");const i=Ni([...t.inputs],r);return Object.assign(Object.assign({},i),{__method__:vr(t)})},QP=(t,e)=>{if(t.type==="constructor")return e;if(!e)return null;const n=e.length>=2?e.slice(2):e;if(!t.outputs)return null;const r=Ni([...t.outputs],n);return r.__length__===1?r[0]:r},ZP=["bool","string","int","uint","address","fixed","ufixed"],JP=(t,e)=>t==="string"?e:Lv(t,e),$v=(t,e,n)=>{const r=Array.isArray(n)?n:[n],i={},s={};for(const[h,g]of t.entries())g.indexed?i[h]=g:s[h]=g;const o=e?Mv(Object.values(s),e,!0):{__length__:0},a=r.length-Object.keys(i).length,u=Object.values(i).map((h,g)=>ZP.some(f=>h.type.startsWith(f))?JP(h.type,r[g+a]):r[g+a]),l={__length__:0};let c=0,d=0;for(const[h,g]of t.entries())l[h]=g.type==="string"?"":void 0,i[h]&&(l[h]=u[c],c+=1),s[h]&&(l[h]=o[String(d)],d+=1),g.name&&(l[g.name]=l[h]),l.__length__+=1;return l},Tc=(t,e)=>{if(e?.data){let n,r,i;try{const s=e.data.slice(0,10),o=t.find(a=>yP(a).startsWith(s));o?.inputs?(n=o.name,r=vr(o),i=Ni([...o.inputs],e.data.substring(10))):e.data.startsWith("0x08c379a0")?(n="Error",r="Error(string)",i=Ni([{name:"message",type:"string"}],e.data.substring(10))):e.data.startsWith("0x4e487b71")?(n="Panic",r="Panic(uint256)",i=Ni([{name:"code",type:"uint256"}],e.data.substring(10))):console.error("No matching error abi found for error data",e.data)}catch(s){console.error(s)}n&&e.setDecodedProperties(n,r,i)}};var YP=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const XP=(t,e)=>{var n,r,i,s,o;if(t instanceof ki&&t.cause instanceof Zu){if(e!==void 0){const a=e.filter(u=>ml(u));return Tc(a,t.cause),{reason:t.cause.message,signature:(n=t.cause.data)===null||n===void 0?void 0:n.slice(0,10),data:(r=t.cause.data)===null||r===void 0?void 0:r.substring(10),customErrorName:t.cause.errorName,customErrorDecodedSignature:t.cause.errorSignature,customErrorArguments:t.cause.errorArgs}}return{reason:t.cause.message,signature:(i=t.cause.data)===null||i===void 0?void 0:i.slice(0,10),data:(s=t.cause.data)===null||s===void 0?void 0:s.substring(10)}}if(t instanceof Ju&&!Array.isArray((o=t.cause)===null||o===void 0?void 0:o.errors)&&t.cause!==void 0)return t.cause.message;throw t};function Uv(t,e,n){return YP(this,arguments,void 0,function*(r,i,s,o=r.defaultReturnFormat){try{yield Ep(r,i,r.defaultBlock,o);return}catch(a){return XP(a,s)}})}var ek=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function id(t,e,n,r,i,s){return ek(this,void 0,void 0,function*(){let o=s;o===void 0&&t.handleRevert&&e!==void 0&&(o=yield Uv(t,e,i));let a;if(o===void 0)a=new Sb(n);else if(typeof o=="string")a=new Yc(o,void 0,n);else if(o.customErrorName!==void 0&&o.customErrorDecodedSignature!==void 0&&o.customErrorArguments!==void 0){const u=o;a=new Ib(u.reason,u.customErrorName,u.customErrorDecodedSignature,u.customErrorArguments,u.signature,n,u.data)}else a=new Yc(o.reason,o.signature,n,o.data);return a})}const bp=(t,e,n,r=At)=>{var i,s,o,a,u,l;let c=Object.assign({},t);const d=F(eo,e,r);if([Hs,"allEvents"].includes(c.name)){const g=n.find(f=>f.signature===e.topics[0]);g?c=g:c={anonymous:!0}}if(c.inputs=(s=(i=c.inputs)!==null&&i!==void 0?i:t.inputs)!==null&&s!==void 0?s:[],!c.anonymous){let g=0;((o=c.inputs)!==null&&o!==void 0?o:[]).forEach(f=>{f.indexed&&(g+=1)}),g>0&&e?.topics&&e?.topics.length!==g+1&&(c=Object.assign(Object.assign({},c),{anonymous:!0,inputs:[]}))}const h=c.anonymous?e.topics:((a=e.topics)!==null&&a!==void 0?a:[]).slice(1);return Object.assign(Object.assign({},d),{returnValues:$v([...(u=c.inputs)!==null&&u!==void 0?u:[]],e.data,h),event:c.name,signature:!c.anonymous&&((l=e.topics)===null||l===void 0?void 0:l.length)>0&&e.topics[0]?e.topics[0]:void 0,raw:{data:e.data,topics:e.topics}})};var ui=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class Fv{constructor({options:e,web3Context:n,promiEvent:r,returnFormat:i}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=n,this.promiEvent=r,this.returnFormat=i}getReceiptWithEvents(e){var n,r;const i=Object.assign({},e??{});if(!((n=this.options)===null||n===void 0)&&n.contractAbi&&i.logs&&i.logs.length>0){i.events={};for(const s of i.logs){const o=bp(yh,s,(r=this.options)===null||r===void 0?void 0:r.contractAbi,this.returnFormat);o.event&&(i.events[o.event]=o)}}return i}checkRevertBeforeSending(e){return ui(this,void 0,void 0,function*(){if(this.options.checkRevertBeforeSending!==!1){let n=e;L(e.data)&&L(e.input)&&L(e.gas)&&(n=Object.assign(Object.assign({},e),{gas:21e3}));const r=yield Uv(this.web3Context,n,this.options.contractAbi);if(r!==void 0)throw yield id(this.web3Context,e,void 0,void 0,this.options.contractAbi,r)}})}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){return ui(this,arguments,void 0,function*({transactionFormatted:n,transaction:r}){var i;let s=n;return!this.web3Context.config.ignoreGasPricing&&!(!((i=this.options)===null||i===void 0)&&i.ignoreGasPricing)&&L(n.gasPrice)&&(L(r.maxPriorityFeePerGas)||L(r.maxFeePerGas))&&(s=Object.assign(Object.assign({},n),yield fv(n,this.web3Context,oe))),s})}signAndSend(e){return ui(this,arguments,void 0,function*({wallet:n,tx:r}){if(n){const i=yield n.signTransaction(r);return vh(this.web3Context,()=>ui(this,void 0,void 0,function*(){return av(this.web3Context.requestManager,i.rawTransaction)}),i.transactionHash)}return vh(this.web3Context,()=>ui(this,void 0,void 0,function*(){return oB(this.web3Context.requestManager,r)}))})}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){return ui(this,arguments,void 0,function*({error:n,tx:r}){var i;let s=n;return s instanceof ki&&this.web3Context.handleRevert&&(s=yield id(this.web3Context,r,void 0,void 0,(i=this.options)===null||i===void 0?void 0:i.contractAbi)),(s instanceof Ju||s instanceof ki||s instanceof Ib||s instanceof Sb||s instanceof Yc||s instanceof Pb)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",s),s})}emitConfirmation({receipt:e,transactionHash:n,customTransactionReceiptSchema:r}){this.promiEvent.listenerCount("confirmation")>0&&pP(this.web3Context,this.promiEvent,e,n,this.returnFormat,r)}handleResolve(e){return ui(this,arguments,void 0,function*({receipt:n,tx:r}){var i,s,o;if(!((i=this.options)===null||i===void 0)&&i.transactionResolver)return(s=this.options)===null||s===void 0?void 0:s.transactionResolver(n);if(n.status===BigInt(0)){const a=yield id(this.web3Context,r,n,void 0,(o=this.options)===null||o===void 0?void 0:o.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",a),a}else return n})}}var Se=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})},tk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const nk=t=>Se(void 0,void 0,void 0,function*(){return ov(t.requestManager)});function rk(t,e){return Se(this,void 0,void 0,function*(){const n=yield GR(t.requestManager);return F({format:"uint"},n,e??t.defaultReturnFormat)})}function wp(t,e){return Se(this,void 0,void 0,function*(){const n=yield VR(t.requestManager);return F({format:"uint"},n,e??t.defaultReturnFormat)})}function ik(t,e){return Se(this,void 0,void 0,function*(){const n=yield KR(t.requestManager);return F({format:"uint"},n,e??t.defaultReturnFormat)})}function vp(t,e){return Se(this,void 0,void 0,function*(){const n=yield QR(t.requestManager);return F({format:"uint"},n,e??t.defaultReturnFormat)})}function sk(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultBlock,s){const o=at(i)?i:F({format:"uint"},i,oe),a=yield ZR(n.requestManager,r,o);return F({format:"uint"},a,s??n.defaultReturnFormat)})}function ok(t,e,n){return Se(this,arguments,void 0,function*(r,i,s,o=r.defaultBlock,a){const u=F({format:"uint"},s,oe),l=at(o)?o:F({format:"uint"},o,oe),c=yield JR(r.requestManager,i,u,l);return F({format:"bytes"},c,a??r.defaultReturnFormat)})}function ak(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultBlock,s){const o=at(i)?i:F({format:"uint"},i,oe),a=yield rB(n.requestManager,r,o);return F({format:"bytes"},a,s??n.defaultReturnFormat)})}function jv(t){return Se(this,arguments,void 0,function*(e,n=e.defaultBlock,r=!1,i){var s;let o;if(si(n)){const u=F({format:"bytes32"},n,oe);o=yield uB(e.requestManager,u,r)}else{const u=at(n)?n:F({format:"uint"},n,oe);o=yield cv(e.requestManager,u,r)}const a=F(vu,o,i??e.defaultReturnFormat);return L(a)?a:Object.assign(Object.assign({},a),{transactions:(s=a.transactions)!==null&&s!==void 0?s:[]})})}function ck(t){return Se(this,arguments,void 0,function*(e,n=e.defaultBlock,r){let i;if(si(n)){const s=F({format:"bytes32"},n,oe);i=yield XR(e.requestManager,s)}else{const s=at(n)?n:F({format:"uint"},n,oe);i=yield eB(e.requestManager,s)}return F({format:"uint"},i,r??e.defaultReturnFormat)})}function uk(t){return Se(this,arguments,void 0,function*(e,n=e.defaultBlock,r){let i;if(si(n)){const s=F({format:"bytes32"},n,oe);i=yield tB(e.requestManager,s)}else{const s=at(n)?n:F({format:"uint"},n,oe);i=yield nB(e.requestManager,s)}return F({format:"uint"},i,r??e.defaultReturnFormat)})}function lk(t){return Se(this,arguments,void 0,function*(e,n=e.defaultBlock,r,i){const s=F({format:"uint"},r,oe);let o;if(si(n)){const a=F({format:"bytes32"},n,oe);o=yield pB(e.requestManager,a,s)}else{const a=at(n)?n:F({format:"uint"},n,oe);o=yield gB(e.requestManager,a,s)}return F(vu,o,i??e.defaultReturnFormat)})}function dk(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultReturnFormat){const s=F({format:"bytes32"},r,At),o=yield lB(n.requestManager,s);return L(o)?o:Gt(o,i,{transactionSchema:n.config.customTransactionSchema,fillInputAndData:!0})})}function hk(t,e){return Se(this,void 0,void 0,function*(){return(yield SB(t.requestManager)).map(r=>Gt(r,e??t.defaultReturnFormat,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0}))})}function fk(t){return Se(this,arguments,void 0,function*(e,n=e.defaultBlock,r,i){const s=F({format:"uint"},r,oe);let o;if(si(n)){const a=F({format:"bytes32"},n,oe);o=yield dB(e.requestManager,a,s)}else{const a=at(n)?n:F({format:"uint"},n,oe);o=yield hB(e.requestManager,a,s)}return L(o)?o:Gt(o,i??e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})})}function qv(t,e,n){return Se(this,void 0,void 0,function*(){const r=F({format:"bytes32"},e,At);let i;try{i=yield fB(t.requestManager,r)}catch(s){if(typeof s=="object"&&!L(s)&&"message"in s&&s.message==="transaction indexing is in progress")console.warn("Transaction indexing is in progress.");else throw s}return L(i)?i:F(to,i,n??t.defaultReturnFormat)})}function Hv(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultBlock,s){const o=at(i)?i:F({format:"uint"},i,oe),a=yield YR(n.requestManager,r,o);return F({format:"uint"},a,s??n.defaultReturnFormat)})}function ba(t,e,n,r={checkRevertBeforeSending:!0},i){const s=new sv((o,a)=>{setImmediate(()=>{Se(this,void 0,void 0,function*(){const u=new Fv({web3Context:t,promiEvent:s,options:r,returnFormat:n});let l=Object.assign({},e);L(i)||(l=yield i.processTransaction(l));let c=Gt(Object.assign(Object.assign({},l),{from:bh("from",t,l),to:bh("to",t,l)}),oe,{transactionSchema:t.config.customTransactionSchema});try{c=yield u.populateGasPrice({transaction:l,transactionFormatted:c}),yield u.checkRevertBeforeSending(c),u.emitSending(c);let d;t.wallet&&!L(c.from)&&(d=t.wallet.get(c.from));const h=yield u.signAndSend({wallet:d,tx:c}),g=F({format:"bytes32"},h,n??t.defaultReturnFormat);u.emitSent(c),u.emitTransactionHash(g);const f=yield mv(t,h,n??t.defaultReturnFormat),p=u.getReceiptWithEvents(F(to,f,n??t.defaultReturnFormat));u.emitReceipt(p),o(yield u.handleResolve({receipt:p,tx:c})),u.emitConfirmation({receipt:p,transactionHash:h})}catch(d){a(yield u.handleError({error:d,tx:c}))}})})});return s}function pk(t,e,n,r={checkRevertBeforeSending:!0}){const i=new sv((s,o)=>{setImmediate(()=>{Se(this,void 0,void 0,function*(){const a=new Fv({web3Context:t,promiEvent:i,options:r,returnFormat:n}),u=F({format:"bytes"},e,oe),l=Ki.fromSerializedData(Jn(De(u))),c=Object.assign(Object.assign({},l.toJSON()),{from:l.getSenderAddress().toString()});try{const{v:d,r:h,s:g}=c,f=tk(c,["v","r","s"]);yield a.checkRevertBeforeSending(f),a.emitSending(u);const p=yield vh(t,()=>Se(this,void 0,void 0,function*(){return av(t.requestManager,u)}));a.emitSent(u);const m=F({format:"bytes32"},p,n??t.defaultReturnFormat);a.emitTransactionHash(m);const y=yield mv(t,p,n??t.defaultReturnFormat),w=a.getReceiptWithEvents(F(to,y,n??t.defaultReturnFormat));a.emitReceipt(w),s(yield a.handleResolve({receipt:w,tx:c})),a.emitConfirmation({receipt:w,transactionHash:p})}catch(d){o(yield a.handleError({error:d,tx:c}))}})})});return i}function gk(t,e,n){return Se(this,arguments,void 0,function*(r,i,s,o=r.defaultReturnFormat){var a;const u=F({format:"bytes"},i,At);if(!((a=r.wallet)===null||a===void 0)&&a.get(s)){const d=r.wallet.get(s).sign(u);return F(XB,d,o)}if(typeof s=="number")throw new fx(i,'RPC method "eth_sign" does not support index signatures');const l=yield iB(r.requestManager,s,u);return F({format:"bytes"},l,o)})}function mk(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultReturnFormat){const s=yield sB(n.requestManager,Gt(r,oe,{transactionSchema:n.config.customTransactionSchema}));return Df(s)?rP(s,i,{fillInputAndData:!0}):{raw:F({format:"bytes"},s.raw,i),tx:Gt(s.tx,i,{transactionSchema:n.config.customTransactionSchema,fillInputAndData:!0})}})}function Ep(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultBlock,s=n.defaultReturnFormat){const o=at(i)?i:F({format:"uint"},i,oe),a=yield aB(n.requestManager,Gt(r,oe,{transactionSchema:n.config.customTransactionSchema}),o);return F({format:"bytes"},a,s)})}function _p(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultBlock,s){const o=Gt(r,oe,{transactionSchema:n.config.customTransactionSchema}),a=at(i)?i:F({format:"uint"},i,oe),u=yield cB(n.requestManager,o,a);return F({format:"uint"},u,s??n.defaultReturnFormat)})}function zv(t,e,n){return Se(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:i}=e;L(r)||(typeof r=="number"||typeof r=="bigint")&&(r=Ye(r)),L(i)||(typeof i=="number"||typeof i=="bigint")&&(i=Ye(i));const s=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r});return(yield _B(t.requestManager,s)).map(u=>typeof u=="string"?u:F(eo,u,n??t.defaultReturnFormat))})}function Gv(t,e){return Se(this,void 0,void 0,function*(){const n=yield RB(t.requestManager);return F({format:"uint"},n,e??t.defaultReturnFormat)})}function yk(t,e,n){return Se(this,arguments,void 0,function*(r,i,s,o=r.defaultBlock,a){const u=s.map(d=>F({format:"bytes"},d,oe)),l=at(o)?o:F({format:"uint"},o,oe),c=yield BB(r.requestManager,i,u,l);return F(nP,c,a??r.defaultReturnFormat)})}function bk(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultBlock,s,o){const a=F({format:"uint"},r,oe),u=at(i)?i:F({format:"uint"},i,oe),l=F({type:"array",items:{format:"uint"}},s,gl),c=yield IB(n.requestManager,a,u,l);return F(eP,c,o??n.defaultReturnFormat)})}function Vv(t,e){return Se(this,arguments,void 0,function*(n,r,i=n.defaultBlock,s){const o=at(i)?i:F({format:"uint"},i,oe),a=yield kB(n.requestManager,Gt(r,oe,{transactionSchema:n.config.customTransactionSchema}),o);return F(QB,a,s??n.defaultReturnFormat)})}function wk(t,e,n,r,i){return Se(this,void 0,void 0,function*(){const s=yield OB(t.requestManager,e,n,r);return F({format:"bytes"},s,i??t.defaultReturnFormat)})}var no=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};function vk(t,e){return no(this,void 0,void 0,function*(){const n=yield bB(t.requestManager);return F({format:"uint"},n,e??t.defaultReturnFormat)})}function Ek(t,e,n){return no(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:i}=e;L(r)||(typeof r=="number"||typeof r=="bigint")&&(r=Ye(r)),L(i)||(typeof i=="number"||typeof i=="bigint")&&(i=Ye(i));const s=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r}),o=yield mB(t.requestManager,s);return F({format:"uint"},o,n??t.defaultReturnFormat)})}function _k(t,e){return no(this,void 0,void 0,function*(){const n=yield yB(t.requestManager);return F({format:"uint"},n,e??t.defaultReturnFormat)})}function Ak(t,e){return no(this,void 0,void 0,function*(){return yield wB(t.requestManager,Ye(e))})}function xk(t,e,n){return no(this,void 0,void 0,function*(){return(yield vB(t.requestManager,Ye(e))).map(s=>typeof s=="string"?s:F(eo,s,n??t.defaultReturnFormat))})}function Ik(t,e,n){return no(this,void 0,void 0,function*(){return(yield EB(t.requestManager,Ye(e))).map(s=>typeof s=="string"?s:F(eo,s,n??t.defaultReturnFormat))})}class Kv extends La{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return F(eo,e,super.returnFormat)}}class ym extends La{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return F({format:"string"},e,super.returnFormat)}}class xu extends La{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return F(JB,e,super.returnFormat)}}class Wv extends La{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if(typeof e=="boolean")this.emit("changed",e);else{const n=Object.fromEntries(Object.entries(e?.status||e).map(([r,i])=>[r.charAt(0).toLowerCase()+r.substring(1),i]));this.emit("changed",e.syncing),this.emit("data",F(YB,n,super.returnFormat))}}}var ce=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const Sh={logs:Kv,newPendingTransactions:ym,newHeads:xu,syncing:Wv,pendingTransactions:ym,newBlockHeaders:xu};class wl extends qt{constructor(e){if(typeof e=="string"||gu(e)){super({provider:e,registeredSubscriptions:Sh});return}if(e.registeredSubscriptions){super(e);return}super(Object.assign(Object.assign({},e),{registeredSubscriptions:Sh})),this.getFeeData=this.calculateFeeData}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return ce(this,void 0,void 0,function*(){return qR(this.requestManager)})}isSyncing(){return ce(this,void 0,void 0,function*(){return ov(this.requestManager)})}getCoinbase(){return ce(this,void 0,void 0,function*(){return HR(this.requestManager)})}isMining(){return ce(this,void 0,void 0,function*(){return zR(this.requestManager)})}getHashrate(e){return ce(this,void 0,void 0,function*(){var n;return e===void 0&&(e=(n=this.defaultReturnFormat)!==null&&n!==void 0?n:At),this.getHashRate(e)})}getHashRate(){return ce(this,arguments,void 0,function*(e=this.defaultReturnFormat){return rk(this,e)})}getGasPrice(){return ce(this,arguments,void 0,function*(e=this.defaultReturnFormat){return wp(this,e)})}getMaxPriorityFeePerGas(){return ce(this,arguments,void 0,function*(e=this.defaultReturnFormat){return ik(this,e)})}calculateFeeData(){return ce(this,arguments,void 0,function*(e=BigInt(2),n=il.Gwei){var r;const i=yield this.getBlock(void 0,!1),s=(r=i?.baseFeePerGas)!==null&&r!==void 0?r:void 0;let o;try{o=yield this.getGasPrice()}catch{}let a;try{a=yield this.getMaxPriorityFeePerGas()}catch{}let u;if(s){a=a??n;let l;typeof e=="number"?l=BigInt(Math.floor(e*1e3))/BigInt(1e3):l=e,u=s*l+a}return{gasPrice:o,maxFeePerGas:u,maxPriorityFeePerGas:a,baseFeePerGas:s}})}getAccounts(){return ce(this,void 0,void 0,function*(){var e;return((e=yield WR(this.requestManager))!==null&&e!==void 0?e:[]).map(r=>Xn(r))})}getBlockNumber(){return ce(this,arguments,void 0,function*(e=this.defaultReturnFormat){return vp(this,e)})}getBalance(e){return ce(this,arguments,void 0,function*(n,r=this.defaultBlock,i=this.defaultReturnFormat){return sk(this,n,r,i)})}getStorageAt(e,n){return ce(this,arguments,void 0,function*(r,i,s=this.defaultBlock,o=this.defaultReturnFormat){return ok(this,r,i,s,o)})}getCode(e){return ce(this,arguments,void 0,function*(n,r=this.defaultBlock,i=this.defaultReturnFormat){return ak(this,n,r,i)})}getBlock(){return ce(this,arguments,void 0,function*(e=this.defaultBlock,n=!1,r=this.defaultReturnFormat){return jv(this,e,n,r)})}getBlockTransactionCount(){return ce(this,arguments,void 0,function*(e=this.defaultBlock,n=this.defaultReturnFormat){return ck(this,e,n)})}getBlockUncleCount(){return ce(this,arguments,void 0,function*(e=this.defaultBlock,n=this.defaultReturnFormat){return uk(this,e,n)})}getUncle(){return ce(this,arguments,void 0,function*(e=this.defaultBlock,n,r=this.defaultReturnFormat){return lk(this,e,n,r)})}getTransaction(e){return ce(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){const i=yield dk(this,n,r);if(!i)throw new Eg;return i})}getPendingTransactions(){return ce(this,arguments,void 0,function*(e=this.defaultReturnFormat){return hk(this,e)})}getTransactionFromBlock(){return ce(this,arguments,void 0,function*(e=this.defaultBlock,n,r=this.defaultReturnFormat){return fk(this,e,n,r)})}getTransactionReceipt(e){return ce(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){const i=yield qv(this,n,r);if(!i)throw new Eg;return i})}getTransactionCount(e){return ce(this,arguments,void 0,function*(n,r=this.defaultBlock,i=this.defaultReturnFormat){return Hv(this,n,r,i)})}sendTransaction(e,n=this.defaultReturnFormat,r){return ba(this,e,n,r,this.transactionMiddleware)}sendSignedTransaction(e,n=this.defaultReturnFormat,r){return pk(this,e,n,r)}sign(e,n){return ce(this,arguments,void 0,function*(r,i,s=this.defaultReturnFormat){return gk(this,r,i,s)})}signTransaction(e){return ce(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return mk(this,n,r)})}call(e){return ce(this,arguments,void 0,function*(n,r=this.defaultBlock,i=this.defaultReturnFormat){return Ep(this,n,r,i)})}estimateGas(e){return ce(this,arguments,void 0,function*(n,r=this.defaultBlock,i=this.defaultReturnFormat){return _p(this,n,r,i)})}getPastLogs(e){return ce(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return zv(this,n,r)})}getWork(){return ce(this,void 0,void 0,function*(){return AB(this.requestManager)})}submitWork(e,n,r){return ce(this,void 0,void 0,function*(){return xB(this.requestManager,e,n,r)})}requestAccounts(){return ce(this,void 0,void 0,function*(){return TB(this.requestManager)})}getChainId(){return ce(this,arguments,void 0,function*(e=this.defaultReturnFormat){return Gv(this,e)})}getNodeInfo(){return ce(this,void 0,void 0,function*(){return PB(this.requestManager)})}getProof(e,n){return ce(this,arguments,void 0,function*(r,i,s=this.defaultBlock,o=this.defaultReturnFormat){return yk(this,r,i,s,o)})}getFeeHistory(e){return ce(this,arguments,void 0,function*(n,r=this.defaultBlock,i,s=this.defaultReturnFormat){return bk(this,n,r,i,s)})}createAccessList(e){return ce(this,arguments,void 0,function*(n,r=this.defaultBlock,i=this.defaultReturnFormat){return Vv(this,n,r,i)})}signTypedData(e,n,r,i){return ce(this,void 0,void 0,function*(){var s;return r===void 0&&(r=!1),i===void 0&&(i=(s=this.defaultReturnFormat)!==null&&s!==void 0?s:At),wk(this,e,n,r,i)})}subscribe(e,n,r){return ce(this,void 0,void 0,function*(){var i,s;r===void 0&&(r=(i=this.defaultReturnFormat)!==null&&i!==void 0?i:At);const o=yield(s=this.subscriptionManager)===null||s===void 0?void 0:s.subscribe(e,n,r);return o instanceof Kv&&e==="logs"&&typeof n=="object"&&!te(n.fromBlock)&&Number.isFinite(Number(n.fromBlock))&&setImmediate(()=>{this.getPastLogs(n).then(a=>{for(const u of a)o._processSubscriptionResult(u)}).catch(a=>{o._processSubscriptionError(a)})}),o})}static shouldClearSubscription({sub:e}){return!(e instanceof Wv)}clearSubscriptions(e=!1){var n;return(n=this.subscriptionManager)===null||n===void 0?void 0:n.unsubscribe(e?wl.shouldClearSubscription:void 0)}createNewPendingTransactionFilter(){return ce(this,arguments,void 0,function*(e=this.defaultReturnFormat){return vk(this,e)})}createNewFilter(e){return ce(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return Ek(this,n,r)})}createNewBlockFilter(){return ce(this,arguments,void 0,function*(e=this.defaultReturnFormat){return _k(this,e)})}uninstallFilter(e){return ce(this,void 0,void 0,function*(){return Ak(this,e)})}getFilterChanges(e){return ce(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return xk(this,n,r)})}getFilterLogs(e){return ce(this,arguments,void 0,function*(n,r=this.defaultReturnFormat){return Ik(this,n,r)})}}const Sk=t=>{if(!L(t.common)){if(L(t.common.customChain))throw new yx;if(L(t.common.customChain.chainId))throw new bx;if(!L(t.chainId)&&t.chainId!==t.common.customChain.chainId)throw new wx({txChainId:t.chainId,customChainId:t.common.customChain.chainId})}},Tk=t=>{if(!L(t.common)&&!L(t.chain)&&!L(t.hardfork))throw new _x;if(!L(t.chain)&&L(t.hardfork)||!L(t.hardfork)&&L(t.chain))throw new Ax({chain:t.chain,hardfork:t.hardfork})},Rk=t=>{if(!L(t.common)&&!L(t.common.baseChain)&&!L(t.chain)&&t.chain!==t.common.baseChain)throw new vx({txChain:t.chain,baseChain:t.common.baseChain})},Bk=t=>{if(!L(t.common)&&!L(t.common.hardfork)&&!L(t.hardfork)&&t.hardfork!==t.common.hardfork)throw new Ex({txHardfork:t.hardfork,commonHardfork:t.common.hardfork})},bm=t=>{if(L(t.gas)||!xr(t.gas)||L(t.gasPrice)||!xr(t.gasPrice))throw new Rx({gas:t.gas,gasPrice:t.gasPrice});if(!L(t.maxFeePerGas)||!L(t.maxPriorityFeePerGas))throw new Tb({maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas})},wm=t=>{if(!L(t.gasPrice)&&t.type==="0x2")throw new Px(t.gasPrice);if(t.type==="0x0"||t.type==="0x1")throw new Tb({maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas});if(L(t.maxFeePerGas)||!xr(t.maxFeePerGas)||L(t.maxPriorityFeePerGas)||!xr(t.maxPriorityFeePerGas))throw new Bx({maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas})},Pk=t=>{const e=!L(t.gas)||!L(t.gasLimit),n=e&&!L(t.gasPrice),r=e&&!L(t.maxPriorityFeePerGas)&&!L(t.maxFeePerGas);if(!n&&!r)throw new Ix({gas:t.gas,gasPrice:t.gasPrice,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas});if(n&&r)throw new Tx({gas:t.gas,gasPrice:t.gasPrice,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas});(n?bm:wm)(t),(!L(t.type)&&t.type>"0x1"?wm:bm)(t)},kk=(t,e,n={transactionSchema:void 0})=>{if(!L(e)){e(t);return}if(typeof t!="object"||L(t))throw new kx(t);Sk(t),Tk(t),Rk(t),Bk(t);const r=Gt(t,oe,{transactionSchema:n.transactionSchema});if(Pk(r),L(r.nonce)||L(r.chainId)||r.nonce.startsWith("-")||r.chainId.startsWith("-"))throw new Ox({nonce:t.nonce,chainId:t.chainId})};var Ok=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const Ck=t=>{var e,n;return Object.assign(Object.assign({},t),{nonce:t.nonce,gasPrice:t.gasPrice,gasLimit:(e=t.gasLimit)!==null&&e!==void 0?e:t.gas,to:t.to,value:t.value,data:(n=t.data)!==null&&n!==void 0?n:t.input,type:t.type,chainId:t.chainId,accessList:t.accessList,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas})},Dk=(t,e)=>{var n,r,i,s,o,a,u,l,c,d,h,g,f,p,m,y,w,b;const A=!L(t.chain)&&!L(t.hardfork)||!L(t.common);let E;if(!A)e.defaultCommon?(E=Object.assign({},e.defaultCommon),L(E.hardfork)&&(E.hardfork=(n=t.hardfork)!==null&&n!==void 0?n:e.defaultHardfork),L(E.baseChain)&&(E.baseChain=e.defaultChain)):E=Ze.custom({name:"custom-network",chainId:jt(t.chainId),networkId:L(t.networkId)?void 0:jt(t.networkId),defaultHardfork:(r=t.hardfork)!==null&&r!==void 0?r:e.defaultHardfork},{baseChain:e.defaultChain});else{const _=(a=(o=(s=(i=t?.common)===null||i===void 0?void 0:i.customChain)===null||s===void 0?void 0:s.name)!==null&&o!==void 0?o:t.chain)!==null&&a!==void 0?a:"custom-network",R=jt((c=(l=(u=t?.common)===null||u===void 0?void 0:u.customChain)===null||l===void 0?void 0:l.chainId)!==null&&c!==void 0?c:t?.chainId),x=jt((g=(h=(d=t?.common)===null||d===void 0?void 0:d.customChain)===null||h===void 0?void 0:h.networkId)!==null&&g!==void 0?g:t?.networkId),S=(m=(p=(f=t?.common)===null||f===void 0?void 0:f.hardfork)!==null&&p!==void 0?p:t?.hardfork)!==null&&m!==void 0?m:e.defaultHardfork,T=(b=(w=(y=t.common)===null||y===void 0?void 0:y.baseChain)!==null&&w!==void 0?w:t.chain)!==null&&b!==void 0?b:e.defaultChain;R&&x&&_&&(E=Ze.custom({name:_,chainId:R,networkId:x,defaultHardfork:S},{baseChain:T}))}return{common:E}},Nk=(t,e,n,...r)=>Ok(void 0,[t,e,n,...r],void 0,function*(i,s,o,a=!1,u=!0){const l=yield uP({transaction:i,web3Context:s,privateKey:o,fillGasPrice:a,fillGasLimit:u}),c=Gt(l,oe,{transactionSchema:s.config.customTransactionSchema});return kk(c,void 0,{transactionSchema:s.config.customTransactionSchema}),Ki.fromTxData(Ck(c),Dk(c,s))}),vm=({address:t},e,n)=>{var r,i;const s=n?.topics,o=(r=n?.filter)!==null&&r!==void 0?r:{},a={};if(te(n?.fromBlock)||(a.fromBlock=F(vu.properties.number,n?.fromBlock,{number:hn.HEX,bytes:_r.HEX})),te(n?.toBlock)||(a.toBlock=F(vu.properties.number,n?.toBlock,{number:hn.HEX,bytes:_r.HEX})),s&&Array.isArray(s))a.topics=[...s];else if(a.topics=[],e&&!e.anonymous&&![Hs,"allEvents"].includes(e.name)&&a.topics.push((i=e.signature)!==null&&i!==void 0?i:pp(vr(e))),![Hs,"allEvents"].includes(e.name)&&e.inputs)for(const u of e.inputs){if(!u.indexed)continue;const l=o[u.name];if(!l){a.topics.push(null);continue}Array.isArray(l)?a.topics.push(l.map(c=>xh(u.type,c))):u.type==="string"?a.topics.push(Ls(l)):a.topics.push(xh(u.type,l))}return a.topics.length||delete a.topics,t&&(a.address=t.toLowerCase()),a},Fo=(t,e,n)=>{const r=Array.isArray(t.inputs)?t.inputs.length:0;if(t.inputs&&r!==e.length)throw new xt(`The number of arguments is not matching the methods required number. You need to pass ${r} arguments.`);let i;if(t.inputs?i=bl(Array.isArray(t.inputs)?t.inputs:[],e).replace("0x",""):i=KP(e).replace("0x",""),gP(t)){if(!n)throw new xt("The contract has no contract data option set. This is necessary to append the constructor parameters.");return n.startsWith("0x")?`${n}${i}`:`0x${n}${i}`}return`${ya(t)}${i}`};class Qv extends La{constructor(e,n){super(e,n),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return bp(this.abi,e,this.jsonInterface,super.returnFormat)}}Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));const vl=(t,e,n,r)=>{var i,s;const o={};return(!te(t.data)||r==="both")&&(o.data=Fo(e,n,(i=t.data)!==null&&i!==void 0?i:t.input)),(!te(t.input)||r==="both")&&(o.input=Fo(e,n,(s=t.input)!==null&&s!==void 0?s:t.data)),te(o.input)&&te(o.data)&&(o[r]=Fo(e,n)),{data:o.data,input:o.input}},Th=({abi:t,params:e,options:n,contractOptions:r})=>{var i,s,o;if(!((o=(s=(i=n?.input)!==null&&i!==void 0?i:n?.data)!==null&&s!==void 0?s:r.input)!==null&&o!==void 0?o:r.data)&&!n?.to&&!r.address)throw new xt("Contract address not specified");if(!n?.from&&!r.from)throw new xt('Contract "from" address not specified');let u=ai({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const l=vl(u,t,e,n?.dataInputFill);return u=Object.assign(Object.assign({},u),{data:l.data,input:l.input}),u},Mk=({abi:t,params:e,options:n,contractOptions:r})=>{if(!n?.to&&!r.address)throw new xt("Contract address not specified");let i=ai({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const s=vl(i,t,e,n?.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i},Lk=({abi:t,params:e,options:n,contractOptions:r})=>{let i=ai({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,data:r.data},n);const s=vl(i,t,e,n?.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i},Em=t=>typeof t=="object"&&!te(t)&&Object.keys(t).length!==0&&!Kr(t),$k=({abi:t,params:e,options:n,contractOptions:r})=>{if(!n?.to&&!r.address)throw new xt("Contract address not specified");if(!n?.from&&!r.from)throw new xt('Contract "from" address not specified');let i=ai({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const s=vl(i,t,e,n?.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i};var Uk=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class Fk{_contractMethodDeploySend(e){const n={transactionResolver:r=>{if(r.status===BigInt(0))throw new xt("code couldn't be stored",r);const i=this.parent.clone();return i.options.address=r.contractAddress,i},contractAbi:this.parent.options.jsonInterface,checkRevertBeforeSending:!1};return L(this.parent.getTransactionMiddleware())?ba(this.parent,e,this.parent.defaultReturnFormat,n):ba(this.parent,e,this.parent.defaultReturnFormat,n,this.parent.getTransactionMiddleware())}constructor(e,n){this.parent=e,this.deployOptions=n;const{args:r,abi:i,contractOptions:s,deployData:o}=this.calculateDeployParams();this.args=r,this.constructorAbi=i,this.contractOptions=s,this.deployData=o}send(e){const n=Object.assign({},e),r=this.populateTransaction(n);return this._contractMethodDeploySend(r)}populateTransaction(e){var n,r;const i=Object.assign(Object.assign({},this.contractOptions),{from:(r=(n=this.contractOptions.from)!==null&&n!==void 0?n:this.parent.defaultAccount)!==null&&r!==void 0?r:void 0}),s=Th({abi:this.constructorAbi,params:this.args,options:Object.assign(Object.assign({},e),{dataInputFill:this.parent.contractDataInputFill}),contractOptions:i});return s.dataInputFill&&delete s.dataInputFill,s}calculateDeployParams(){var e,n,r,i,s,o;let a=this.parent.options.jsonInterface.find(g=>g.type==="constructor");a||(a={type:"constructor",stateMutability:""});const u=F({format:"bytes"},(n=(e=this.deployOptions)===null||e===void 0?void 0:e.input)!==null&&n!==void 0?n:this.parent.options.input,At),l=F({format:"bytes"},(i=(r=this.deployOptions)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:this.parent.options.data,At);if((!u||u.trim()==="0x")&&(!l||l.trim()==="0x"))throw new xt("contract creation without any data provided.");const c=(o=(s=this.deployOptions)===null||s===void 0?void 0:s.arguments)!==null&&o!==void 0?o:[],d=Object.assign(Object.assign({},this.parent.options),{input:u,data:l});return{args:c,abi:a,contractOptions:d,deployData:u??l}}estimateGas(e){return Uk(this,arguments,void 0,function*(n,r=this.parent.defaultReturnFormat){const i=Object.assign({},n);return this.parent.contractMethodEstimateGas({abi:this.constructorAbi,params:this.args,returnFormat:r,options:i,contractOptions:this.contractOptions})})}encodeABI(){return Fo(this.constructorAbi,this.args,F({format:"bytes"},this.deployData,this.parent.defaultReturnFormat))}decodeData(e){return Object.assign(Object.assign({},Ih(this.constructorAbi,e.replace(this.deployData,""),!1)),{__method__:this.constructorAbi.type})}}var jk=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class qk extends mu{constructor(e,n){super(e.requestManager,e.registeredSubscriptions),this.parentContract=n}subscribe(e,n){const r=Object.create(null,{subscribe:{get:()=>super.subscribe}});return jk(this,arguments,void 0,function*(i,s,o=At){return r.subscribe.call(this,i,s??this.parentContract.options,o)})}}var li=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const Hk={logs:Qv,newHeads:xu,newBlockHeaders:xu};class Mi extends qt{get subscriptionManager(){return this._subscriptionManager}constructor(e,n,r,i,s){var o,a,u;const l=Kr(n)?n:Kr(r)?r:void 0;let c;Em(n)?c=n:Em(r)?c=r:c=i;let d;if(typeof n=="object"&&"provider"in n?d=n.provider:typeof r=="object"&&"provider"in r?d=r.provider:typeof i=="object"&&"provider"in i?d=i.provider:d=Mi.givenProvider,super(Object.assign(Object.assign({},c),{provider:d,registeredSubscriptions:Hk})),this.syncWithContext=!1,this._functions={},this._subscriptionManager=new qk(super.subscriptionManager,this),c?.wallet&&(this._wallet=c.wallet),c?.accountProvider&&(this._accountProvider=c.accountProvider),!L(l)&&!L(l.data)&&!L(l.input)&&this.config.contractDataInputFill!=="both")throw new ax({data:l.data,input:l.input});this._overloadedMethodAbis=new Map;const h=mr(i)?i:mr(r)?r:s??this.defaultReturnFormat,g=typeof n=="string"?n:void 0;this.config.contractDataInputFill=(o=l?.dataInputFill)!==null&&o!==void 0?o:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,h),this.defaultReturnFormat!==h&&(this.defaultReturnFormat=h),L(g)||this._parseAndSetAddress(g,h),this.options={address:g,jsonInterface:this._jsonInterface,gas:(a=l?.gas)!==null&&a!==void 0?a:l?.gasLimit,gasPrice:l?.gasPrice,from:l?.from,input:l?.input,data:l?.data},this.syncWithContext=(u=l?.syncWithContext)!==null&&u!==void 0?u:!1,c instanceof qt&&this.subscribeToContextEvents(c),Object.defineProperty(this.options,"address",{set:f=>this._parseAndSetAddress(f,h),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:f=>this._parseAndSetJsonInterface(f,h),get:()=>this._jsonInterface}),c instanceof qt&&c.on(Gi.CONFIG_CHANGE,f=>{this.setConfig({[f.name]:f.newValue})})}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}get events(){return this._events}get methods(){return this._methods}clone(){let e;return this.options.address?e=new Mi([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):e=new Mi([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){return new Fk(this,e)}getPastEvents(e,n,r){return li(this,void 0,void 0,function*(){var i;const s=typeof e=="string"?e:Hs,o=typeof e!="string"&&!mr(e)?e:mr(n)?{}:n,a=mr(e)?e:mr(n)?n:r??this.defaultReturnFormat,u=s==="allEvents"||s===Hs?yh:this._jsonInterface.find(y=>"name"in y&&y.name===s);if(!u)throw new xt(`Event ${String(s)} not found.`);const{fromBlock:l,toBlock:c,topics:d,address:h}=vm(this.options,u,o??{}),g=yield zv(this,{fromBlock:l,toBlock:c,topics:d,address:h},a),f=g?g.map(y=>typeof y=="string"?y:bp(u,y,this._jsonInterface,a)):[],p=(i=o?.filter)!==null&&i!==void 0?i:{},m=Object.keys(p);return m.length>0?f.filter(y=>typeof y=="string"?!0:m.every(w=>{var b;if(Array.isArray(p[w]))return p[w].some(E=>String(y.returnValues[w]).toUpperCase()===String(E).toUpperCase());const A=(b=u.inputs)===null||b===void 0?void 0:b.filter(E=>E.name===w)[0];return A?.indexed&&A.type==="string"&&Ls(p[w])===String(y.returnValues[w])?!0:String(y.returnValues[w]).toUpperCase()===String(p[w]).toUpperCase()})):f})}_parseAndSetAddress(e,n=this.defaultReturnFormat){this._address=e&&Xn(F({format:"address"},e,n))}decodeMethodData(e){const n=e.slice(0,10),i=this._jsonInterface.filter(s=>s.type!=="error").find(s=>n===ya(vr(s)));if(!i)throw new xt(`The ABI for the provided method signature ${n} was not found.`);return Ih(i,e)}_parseAndSetJsonInterface(e,n=this.defaultReturnFormat){var r,i;this._functions={},this._methods={},this._events={};let s=[];const o=e.filter(u=>u.type!=="error"),a=e.filter(u=>ml(u));for(const u of o){const l=Object.assign(Object.assign({},u),{signature:""});if(yl(l)){const c=vr(l),d=ya(c);l.methodNameWithInputs=c,l.signature=d,l.constant=l.stateMutability==="view"||l.stateMutability==="pure"||l.constant,l.payable=l.stateMutability==="payable"||l.payable,this._overloadedMethodAbis.set(l.name,[...(r=this._overloadedMethodAbis.get(l.name))!==null&&r!==void 0?r:[],l]);const h=(i=this._overloadedMethodAbis.get(l.name))!==null&&i!==void 0?i:[],g=this._createContractMethod(h,a),f=this._createContractMethod(h,a,!0);this._functions[c]={signature:d,method:f},this._methods[l.name]=g,this._methods[c]=f,this._methods[d]=f}else if(fp(l)){const c=vr(l),d=pp(c),h=this._createContractEvent(l,n);l.signature=d,(!(c in this._events)||l.name==="bound")&&(this._events[c]=h),this._events[l.name]=h,this._events[d]=h}s=[...s,l]}this._events.allEvents=this._createContractEvent(yh,n),this._jsonInterface=[...s],this._errorsInterface=a}_getAbiParams(e,n){var r;try{return Uo((r=e.inputs)!==null&&r!==void 0?r:[],n)}catch(i){throw new xt(`Invalid parameters for method ${e.name}: ${i.message}`)}}_createContractMethod(e,n,r=!1){const i=e[e.length-1];return(...s)=>{var o,a,u;let l;const c=(a=r?(o=this._overloadedMethodAbis.get(i.name))===null||o===void 0?void 0:o.filter(p=>p.signature===i.signature):this._overloadedMethodAbis.get(i.name))!==null&&a!==void 0?a:[];let d=c[0];const h=n,g=c.filter(p=>{var m;return((m=p.inputs)!==null&&m!==void 0?m:[]).length===s.length});if(c.length===1||g.length===0)l=this._getAbiParams(d,s),ee.validate((u=i.inputs)!==null&&u!==void 0?u:[],l);else{const p=[],m=[];for(const y of g)try{l=this._getAbiParams(y,s),ee.validate(y.inputs,l),m.push(y)}catch(w){p.push(w)}if(m.length===1?[d]=m:m.length>1&&([d]=m,console.warn(`Multiple methods found that is compatible with the given inputs.
	Found ${m.length} compatible methods: ${JSON.stringify(m.map(y=>`${y.methodNameWithInputs} (signature: ${y.signature})`))} 
	The first one will be used: ${d.methodNameWithInputs}`)),p.length===g.length)throw new Ds(p)}const f={arguments:l,call:(p,m)=>li(this,void 0,void 0,function*(){return this._contractMethodCall(d,l,h,p,m)}),send:p=>this._contractMethodSend(d,l,h,p),populateTransaction:(p,m)=>{var y,w;let b=m??this.options;b=Object.assign(Object.assign({},b),{input:void 0,from:(w=(y=b?.from)!==null&&y!==void 0?y:this.defaultAccount)!==null&&w!==void 0?w:void 0});const A=Th({abi:i,params:s,options:Object.assign(Object.assign({},p),{dataInputFill:this.config.contractDataInputFill}),contractOptions:b});return A.dataInputFill&&delete A.dataInputFill,A},estimateGas:(p,...m)=>li(this,[p,...m],void 0,function*(y,w=this.defaultReturnFormat){return this.contractMethodEstimateGas({abi:d,params:l,returnFormat:w,options:y})}),encodeABI:()=>Fo(d,l),decodeData:p=>Ih(d,p),createAccessList:(p,m)=>li(this,void 0,void 0,function*(){return this._contractMethodCreateAccessList(d,l,h,p,m)})};return d.stateMutability==="payable",f}}_contractMethodCall(e,n,r,i,s){return li(this,void 0,void 0,function*(){var o;const a=Mk({abi:e,params:n,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{const u=yield Ep(this,a,s,this.defaultReturnFormat);return QP(e,u)}catch(u){throw u instanceof ki&&Tc(r,u.cause),u}})}_contractMethodCreateAccessList(e,n,r,i,s){return li(this,void 0,void 0,function*(){var o;const a=$k({abi:e,params:n,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{return Vv(this,a,s,this.defaultReturnFormat)}catch(u){throw u instanceof ki&&Tc(r,u.cause),u}})}_contractMethodSend(e,n,r,i,s){var o,a;let u=s??this.options;u=Object.assign(Object.assign({},u),{input:void 0,from:(a=(o=u.from)!==null&&o!==void 0?o:this.defaultAccount)!==null&&a!==void 0?a:void 0});const l=Th({abi:e,params:n,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:u}),c=L(this.transactionMiddleware)?ba(this,l,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface}):ba(this,l,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface},this.transactionMiddleware);return c.on("error",d=>{d instanceof ki&&Tc(r,d.cause)}),c}contractMethodEstimateGas(e){return li(this,arguments,void 0,function*({abi:n,params:r,returnFormat:i,options:s,contractOptions:o}){const a=Lk({abi:n,params:r,options:Object.assign(Object.assign({},s),{dataInputFill:this.config.contractDataInputFill}),contractOptions:o??this.options});return _p(this,a,br.LATEST,i??this.defaultReturnFormat)})}_createContractEvent(e,n=this.defaultReturnFormat){return(...r)=>{var i;const{topics:s,fromBlock:o}=vm(this.options,e,r[0]),a=new Qv({address:this.options.address,topics:s,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:n});return L(o)||this.getPastEvents(e.name,{fromBlock:o,topics:s},n).then(u=>{u&&u.forEach(l=>a.emit("data",l))}).catch(u=>{a.emit("error",new pr("Failed to get past events.",u))}),(i=this.subscriptionManager)===null||i===void 0||i.addSubscription(a).catch(u=>{a.emit("error",new pr("Failed to subscribe.",u))}),a}}subscribeToContextEvents(e){const n=this;this.context=e,n.syncWithContext&&e.on(Gi.CONFIG_CHANGE,r=>{n.setConfig({[r.name]:r.newValue})})}}const _m={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},cs={setAddr:"addr",addr:"addr",pubkey:"pubkey",contenthash:"contenthash",text:"text",name:"name"},Iu={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},zk={"0x1":"main","0x5":"goerli"},Gk=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],Vk=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"setAddr",outputs:[],stateMutability:"nonpayable",type:"function"}];var Kk="AEkU4AngDVgB0QKRAQYBOwDqATEAnwDbAIUApABsAOAAbwCRAEYAiQBPAHYAPgA+ACsANwAlAGMAHwAvACsAJQAWAC8AGwAiACIALwAUACsAEQAiAAsAGwARABcAGAA6ACkALAAsADUAFgAsABEAHQAhAA8AGwAdABUAFgAZAA0ADQAXABAAGQAUABIEqgYJAR4UFjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqfu75wzbIM8IuykDsRQ7APcta6MAoX0YABcEJdcWAR0AuRnNBPoJIEw3CZcJiB4bVllM44NCABMADAAVAA5rVAAhAA4AR+4V2D3zOVjKleYuChAdX01YPewAEwAMABUADmsgXECXAMPrABsAOQzFABsVW6n7Adq4HB0FWwXiAtCfAsSwCkwcpGUUcxptTPUAuw1nAuEACy00iRfJkQKBewETGwC9DWcC4QALLQFIUCWRTAoDLfsFMgnXaRetAddDAEkrEncCMRYhAusnuTdrADnhAfUlAMcOy7UBG2OBALEFAAUAitNJBRvDHwcXAKgn0QGhKy0DmwBnAQoZPu03dAQYFwCqAccCIQDTKxJzOvNQsAWQOncnNUgF+icFWQVYr7gFaTtdQhI6WEGXe5NmX6H4CxMDxQcl8XcjBKNLAlNTAnUbqycBj6OlNVsDRRcEg2EJANEGqz8vIwcpAjldAGsBYR9xAIMdGQCVAUm3ACdpFwGvxQM3LSFDUwFvWQZlAmUA8UkXAykBBQBJQQCrAF0AcwArtQYH8+8ZjX8ACSEAKQCzG0cB0QHbBwsxl3iB6AAKABEANAA9ADgzd3nTwBBfEFwBTQlMbDoVCwKsD6YL5REVDNEqy9PYADSpB+sDUwfrA1MDUwfrB+sDUwfrA1MDUwNTA1McCvAa08AQXw9IBG0FjgWLBNYIgyZJEYEHKAjSVA10HhxHA0UA/CMlSRw7kzMLJUJMDE0DB/w2QmynfTgDRzGrVPWQogPLMk85bAEecRKgACoPcxw1tU5+ekdxoApLT661f0liTmcCvjqoP/gKIQmTb7t3TgY9EBcnoRDzDC8BsQE3DelL1ATtBjcExR95GRUPyZWYCKEt2QzpJt8unYBWI/EqfwXpS/A82QtJUWQPVQthCd86X4FKAx0BCSKHCtkNNQhpEO8KxWcN4RFBBzUD0UmWAKEG/QsNHTEVsSYMYqgLBTlzBvca8guLJqsTJXr4Bc8aHQZJASUa+wDLLuOFrFotXBhPWwX/CyEjwxSkUBwNIUCzeEQaFwcRJaUCjUNsSoNRMh6PIfI8OQ1iLg9ReAfxPAEZSwt9PJpGp0UKEc4+iT1EIkVMKAQxeywrJ4cJyw+BDLV8bgFVCR0JrQxtEy0REzfBCDUHFSmXICcRCB1GkWCWBPObA+8TzQMHBTsJPQcPA7EcKRMqFSUFCYEg0wLvNtEurwKLVnwBEwXHDyEf2xBMR9wO5QiXAmEDfyXnACkVHQATIpcIP18AW4/UUwEuxwjDamgjcANjFONdEW8HjQ5TB6McLxW7HN1wxF4HhgQon6sJVwFxCZUBWwTfCAU1V4ycID1nT4tUGJcgXUE7XfgCLQxhFZtEuYd0AocPZxIXATEBbwc1DP0CcxHpEWcQkQjnhgA1sTP0OiEESyF/IA0KIwNLbMoLIyb1DPRlAZ8SXgMINDl36menYLIgF/kHFTLBQVwh7QuOT8kMmBq9GD5UKhngB7sD7xrvJ+ZBUwX7A58POkkz6gS5C2UIhwk7AEUOnxMH0xhmCm2MzAEthwGzlQNTjX8Ca4sGMwcHAGMHgwV14QAZAqMInwABAMsDUwA1AqkHmQAVAIE9ATkDIysBHeECiwOPCC3HAZErAe8lBBe/DBEA8zNuRgLDrQKAZmaeBdlUAooCRTEBSSEEAUpDTQOrbd0A1wBHBg/bQwERp0bHFt8/AdtrJwDDAPcAATEHAT0ByQHvaQCzAVsLLQmer7EBSeUlAH8AEWcB0wKFANkAMQB77QFPAEkFVfUFzwJLRQENLRQnU10BtwMbAS8BCQB1BseJocUDGwRpB88CEBcV3QLvKgexAyLbE8lCwQK92lEAMhIKNAq1CrQfX/NcLwItbj1MAAofpD7DP0oFTTtPO1Q7TztUO087VDtPO1Q7TztUA5O73rveCmhfQWHnDKIN0ETEOkUT12BNYC4TxC2zFL0VyiVSGTkauCcBJeBVBQ8ALc9mLAgoNHEXuAA7KWSDPWOCHiwKRxzjU41U9C0XAK1LnjOrDagbEUQ8BUN16WImFgoKHgJkfQJiPldJq1c3HAKh8wJolAJmBQKfgDgXBwJmNwJmIgRqBHsDfw8Dfo45AjlzEzl+Oh8fAmwZAjIyOAYCbcMCbarrhi9jQScBYwDaAN0ARgEHlAyJAPoHvgAJsQJ3KwJ2njsCeUc/Ani2GVjXRapG0wJ8OwJ6xAJ9BQJ87AVVBRxH/Eh5XyAAJxFJVEpXERNKyALQ/QLQyEsjA4hLA4fiRMGRLgLynVz/AwOqS8pMKSHLTUhNqwKLOwKK1L0XAxk/YwGzAo4zAo5YPJN9Ao7VAo5YdFGwUzEGUtBUgQKT9wKTCADlABhVGlWrVcwCLBcpkYIy3XhiRTc1ApebAu+uWB2kAFUhApaLApZ4mAClWahaBX1JADcClrEClkpcQFzNApnHAplgXMZdAxUCnJc5vjqZApwSAp+XAp60hgAZCy0mCwKd7QKejgCxOWEwYesCns8CoGoBpQKemxsCnkqhY8RkIyEnAierAiZ6AqD3AqBIAqLZAqHAAqYrAqXKAqf7AHkCp+5oeGit/0VqGGrNAqzfAqyqAq1jAqz+AlcZAlXYArHd0wMfSmyTArK5CQKy5BNs3G1fbURbAyXJArZYNztujAMpQQK4WgK5QxECuSZzcDJw3QK9FQK71nCSAzINAr6Ecf4DM20CvhZzHnNLAsPHAsMAc350RzFBdNwDPKMDPJYDPbsCxXgCxkMCxgyFAshlTQLIQALJSwLJKgJkmQLdznh1XXiqeSFLzAMYn2b+AmHwGe+VIHsHXo5etw0Cz2cCz2grR0/O7w+bAMKpAs9vASXmA04OfkcBAtwjAtuGAtJLA1JYA1NbAP0DVYiAhTvHEulcQYIYgs+CyoOJAtrDAtnahAyERac4A4ahACsDZAqGbVX1AFEC32EC3rRvcwLiK+0QAfMsIwH0lwHyzoMC6+8C6Wx1Aur1AurgAPVDAbUC7oUC65iWppb/Au47A4XcmHVw3HGdAvL/AGUDjhKZjwL3DwORagOSgwL3lAL51QL4YpoYmqe3M5saA51/Av72ARcANZ8Yn68DBYkDpmYDptUAzcEDBmahhKIBBQMMRQELARsHaQZdtWMBALcEZ7sNhx6vCQATcTUAHwMvEkkDhXsBXyMdAIzrAB0A5p8Dm40IswYbn8EApwURu+kdPT4WeAVoNz5AK0IhQrRfcRFfvACWxQUyAJBMGZu5OyZgMhG6zw4vGMYYicn2BVcFWAVXBVgFYwVYBVcFWAVXBVgFVwVYBVcFWEYVCNeFZwICAgpkXukrBMkDsQYvu7sAuwSnuwDnQCkWsgVGPmk+cEI/QrZfdTdf6ABYETOrAIz+zGvL/KbnRno9JiMEKxYnNjV+bd9qwfEZwixpAWvXbjAXBV8FasnBybgIz0lbAAAACnxefYu+ADM/gQADFtEG5a0jBQCMwwsDAQ0A5WUdPSQfSkKxQrxBOCNfJ2A2JzgjCcE9CkQ/Qz54PoE+cD5xAolCvElCO1/LTk9qTQosa1QvagtuH1/gMzobCWebCmIjKzwdJkKrQrwrzAHL/F/JDh8uCQgJIn6d32o6LUoXyavJrAllwcvMCmBBXw/lEKMRAJONHUVCJRupbTnOOAozP0M+cEI/HAcKHUxHbFssLVrhvBIKfe0dK0I/HF0ISgkOM1RDQjcEO0OcLAqBGy1CPxv1CFMiIxgwMQAFj2HwXgpxZMlgC2AtI25DYBk5AhseYLMGAmsQZU5gTREBZOdgFWCVYH1gs2BLYJFoFhcGtQ7cVam8WgtDFqsBuyvNwQIfFQAcAx4BeQJsLzCVUoABigq4RxoA5CN0jgrKDaZN6gGbAoecTwVAXwD39wkANBZXDAulDCQfuq9HAE8MNAAVE58rggh6AtILS2URGwDYTgZ1BAoeWgAxALa4AZonCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cKAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4AZonLTsOzgKQGHtQu1jIdHKO16WbDvWZFT0b7AEpEFwSBg8bAccJOhCTBRArDDYLABEAs84BAgCkAOEAmIIABWtXLwAUAFsbxi5sdioNwRACOyQz0+EcHgsbfQJ7Ls6hHATBCqrxbAA3OS0Opge7CQAQOi7OERkAfavaHA+7GkcczaF3HgE9Kl8cAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvC7OoSoJPA67BZgBG2sKD4sa4QHDARELuxY7AKALOxC7BBige9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewAHuwG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOwAuuwLrDlaouwAeuwJVICp/AAG7AALjAAg7FTwVuwAbuwG9KOClWw6/xAD0AGj7L7ZtvgNIo7vIqDsDAbuVJ0sAAlsACrsEAOfdGbsIGnsIoQUK/3AA37unuxjbGruji3lyBvupm4MAErsGGwsBvAAAhgBtuwYAC7unOwEaO7oIoZzKAbsL7QfAqTsA4XsBvwAA5QAVuwAG+wAJuwBpiwAauwAOuwIYu45pFfsAAVsADmsALkseAAa7ABe7CCEADUoBwgC3ryYBwAAAtAAOmwG+J+QAsloAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAAFDsAEWsAD4sADesADbsAGQsGFhsAFTsAbpsWswG7ALoAEzsDAGkrCgDhSwACOwAEUgAXewUbAAbQABi7AAv7AF+7AGv7AOSLAbsAF3YBvAABcguhAAVKHgF7KFIAOUUA/gcNDHIAKCpwAaQFCF4BvF4jDAkHb0tsXyqJHzwUYi02A6EKtAHYABYC0QNuAXZyR1IUIQNPAhU+ASwGA3NGvHtSekAAKQAxAfsAUwrbAHuQLAErAHblDREyRgFKAFcFAAFQAQeKzAB4OwQgpQBaANYVAJVoNx+LAM1rsQDP1BYIwnVzGxhWHQnRAYiQqyJTU01IEjzCifkAfxw3QCkr4BGXTwByASksMClCGQ8DMFUE98XuAEtl3ABqAnECPxF6Osd4LjXVBgUAEBsdCggMKgQfHSlOU04IuboAChLNACYAARoAhgCJAI41AO4AtADgAJ08ALsAqwCmAKEA8gCfANMAnADrAQwBBwDAAHkAWgDLAM0BBwDXAOsAiACiATUA4wDYANUDAQcqM9TU1NS2wNzN0M5DMhcBTQFXL0cBVQFkAWMBVgFHS0NFaA0BThUHCAMyNgwHACINJCYpLDg6Oj09PT4/DkAeUVFRUVNTUlMpVFVXVlYcXWFhYGJhI2ZocG9ycnJycnJ0dHR0dHR0dHR0dHZ2d3Z1WwBA7ABFAJYAdAAuAGLyAIoAUwBTADMCc+kAh//y8gBgAI/sAJsASwBeAGD5+aoAgQCBAGUAUgCtAB4AsgB/AjwCPwD4AOMA+gD6AOQA+wDlAOUA5ADiACkCdwFNATwBOgFQAToBOgE6ATUBNAE0ATQBGAFUDwArCAAATRcKFgMVFg4AigCSAKIASwBkGAItAHAAaQCRAxIDJCoDHkE+RykAiwJLAMMCUwKgALoCkgKSApICkgKSApIChwKSApICkgKSApICkgKRApEClAKcApMCkgKSApACkAKQApACjgKRAnEB0AKTApsCkgKSApEWeQsA+gUDpwJdAjYXAVAQNQLeEQorEwFKNxNNkQF3pDwBZVkA/wM9RwEAAJMpHhiPagApYABpAC4AiQOUzIvwroRaBborDsIRAZ3VdCoLBCMxbAEzWmwBsgDdfoB/foB+gYKCfoOGhH6FiIaAh4KIgol+in6LfoyKjX6Ofo+CkH6RfpJ+k36Ug5WIloKXftoC2WzhAtdsAIJsJGygAINsbARCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAlmZsAKMDh2wAtGYBBWwAyVFsbADPbAIMbAD2WmwA9gEZAPYA9AD0APUA9AN8XmzUhCNlvwD2APQA9AD1APQcbGwAiVpsAPYAiQEZAPYAiQLsAPYAiQN8XmzUhCNlvxxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN8XmzUhCNlvxxsbACJWmwBGQD2AIkA9gCJAuwA9gCJA3xebNSEI2W/HGwCQwE2bAJKATlsAkvBbGwCV2xsA54C7AOeA54DnwOfA58DnwN8XmzUhCNlvxxsbACJWmwBGQOeAIkDngCJAuwDngCJA3xebNSEI2W/HGwEN2wAiQQ4AIkGjTFtIC9s1m4DJmwA/QDGWgJsbABVWv4UMgJsbACJAmwAVAEAuV5sAmxebGwAiV5sAmxebD3YAEls1gJsbEZFNiJ9FGVAe8xvEZKvxVfKZszAVTBzYBH2d1iyUXEHH7twNw7eZF5JJRHI5EgaRr5D20/3dfONrFLSq5qSrrgd2CEUq722WBQ/LzpA+bx1oREI5xy4BDSZNun0ZWORUJqInZSyMaioyvfSI0l5uFDzbWaQ28/zdB0hwR4OQZ0/jn9ALSLNikjFYGfqR389qtFlhD3a6KdIh97rhZYpywuLc7o8ql5/X8KCbPU3L/QlmCowhRXhsGDvg6wUNprA9bM/49uxlAj7ZVy3ouEY/BgFXBNyK0TLrSjZWeJm/T4nz6QGLT3cJNtWRZVZTvIdtaxMMJRHgig9+S11LjBh7Inr06ykoch1U097Rw0hvgmOrydQyaWcEQDg0RavuMuT0zYabUZl1e33HNSK1oNUCS03eh+9C2EvF3fq9h+XBaAMFuoWeZf+mfZgL4HzyiKDIUtfNU4oFu0aE9qt3VA3U4D3fOSrAcYVnjG3cSkp1vhXZnp3JQm4JknKdBitO2NVnGCYQwU3YMWHWB87NEd+4AHuOKI8BSIH92reW0pfs+kWCTJxDCbRjFv8Cfc4/DSBYJScJYTeAEgg9wTEvcwd/QuHRHqGzAQ4fXf5FUI1lPrO+fvEcPl4JInM1z9AtBT2bL4QYEREe7KiSnnxTwtmAFjn8lqT3mND8qTktX2F16Ae9cakqJ6/pEQsHURqyqWlRMCzKXRKfCHT7sYHWx9/T/ugYTFY6iVN3Btm58ATJR5alYZybKMWojwOw3HbFn23NFyeLl7+Er82RchyYuBoGQ3j7SAWNxiYvp5U+Fq/DEzB9cG5DlJWsqkosRze92OVlCtQEYo1S1lF72Z8xWc4ld/+fFcfTEDTFb9d8tJGQ75dpJEvcWyGmGBiTbiWDdGOcw93Dmxq5ISUrmasygONfHLvhgo83HQZenbdBtSzBkvYrCEQ/xEDMhMZsN6gqplx5jGG9mSQLhM81UEdEeJ59sdNJDAFy/gPyJoKlwPZgB/MkC/kICLiCB8va+nCdO2ry4aDfkmPFpF/H/SGQ3LJ6aAv9dtJ8DniHtLOckZix0BVb0iR5V3LAp521LBSIi6AtV7r2ZB/hQEvAw54EFNOQcFnl1xGUIc67tqK1INNwD2n/RbwgzO9h45LM6VMuN8V1ZNIQ6t+Xy3lTqyVCD5kqLy/t3/b8MLbgDg8JIWDkSZ+LrGhhr+gYpH+pr1TnCUnZPjpUdw6bSL6MWVXoDDciQDWECwU2e6VEpfrcOBbrSOijqGkEIoJPbpmeJLkcwbvA0yWIixQVjo0HnYh7fji+Dfdq1mtV1lG2Zz9R7eFMHS+FK7nybutu2fwzDpFldO2pZBshsHJWaltn3PWOoGJpCT2jE8EHOuC6FkejNWcfsWCqNqMLP9xTwcWArj2EiiI7D+EaDi7/2cqHL1gPiF6C/J7aUo7RQqogPZ11WqbyP97nsoMxPOC78wZMF7B1Y0g7JNXJV/nN1m4xx8hbqWz07KSaqr5hE4icB326DMR/vUKX9LoNjle/ZWtbUhrTAcsdgrLlG5Ne8aiR0bS/2ZhpNOVVxavWIZsEM/rd68EB4vjbbD13NkMK1qvMk74vGbSkL7ULO0sZ9R6APSCo6KH+Xn98wEdw1bCPAnDTaBsD6sidAGN58uiH4a3ovG1KyZAu2XtyGgF/vgWKGxw9R1lfAVcfuYE71DHuxtTzfGZnHaDpDGWmfEq0N4GawE7yIkaoz8jcmVmzJe1ydM8q0p08YIxFcY1YcqQc1djWBEoNETDFcgk5waRftEJasPREkrV++N/TOKkERF1fCLrXS8DFGYGRBeECMQRNEs0ES3FzUtXCcNxpYEM3Uei6XodZruXUIRnn+UXf2b/r7n1vQutoi6WoIbW7svDNWBbUWcDUc7F9SJK3bvSy9KIqhgyJHoW2Kpvv0J4ob14HFXGWWVsYXJzjwxS+SADShTgCRjhoDgjAYRGxwJ1Vonw+cpnCKhz8NQPrb0SFxHIRbmG95Q2hlC4mDxvPBRbkFa60cvWakd7f0kVBxxktzZ9agPJEWyA63RSHYVqt8cPrs2uFJ3rS3k9ETGKn5+A6F9IOrdZHfT1biEyUJKEvwzuscwshGCBJvd16TrefW03xVnJf4xvs72PdxrMidjJO8EiWyN/VWyB3fv9kc34YIuZTFtXGo9DuG3H1Uka5FgBMwDPEvRcSabi3WakNQkXFecJlFk6buLVk5YHpuKWTw6oF632FPPSVIVl5hgUAeHhj0t/sw/PEEvThLQDDFE34eCg/rLOyXT3r+L98oRKrlTO0MdALYQ3rRQqC7d822dJPGxF1K4J2TtfPSMFaCAg0n0NGk9yiaKKOJD1v2aBX9HUOIawjjfvwCmjHZJTR62R9c9x33JnBjWrN4QYEOmehy0oZMP9XM9Zyi6TYoe07PaLceRXcCWZiY/imRUWW6+mci7+wMxSdwMdbXckXtvhJH8sc4iQcTwm7yp+3f7CaesTTQB2qkgeXh+wFiSMXfMlH7Yil0OoZ2QTtRLTip2O0cLZ4SstqWHZ6H+8A2kZXhpm0kPbL9dUanTOvziqIUh6Ambwa3WrCb2eWbuCN3L1hgWUmjRC3JoL3dBhR3imSQI8xuCMfsszlji7cSShNSYdqCXPxEVwbqO9i5B6hf93YI7aeyI8jxgcVXK0I/klbvhSXjkjOIwZgPdVwmsFW7HGPLUAvDRuKm+itybRg7c8+Yqqjg824Qf+/NxsBSUNAK9KCoJpauFqK0XQULrWYj4FnxeKDuvr54iokpi+D57e6Y1zxRJJdsHnDR3JyraCUufHBRTKODWBVzthjm4k3/Hv+Q990XDVR+KW+TcJX045LW86EKhz/97aqj89A8ZvTk1//tczosU90loIPVaHuWegJU3wP//7XHcO7c0yQM2jM/IhQKrf8hiObHWiWDZManF8Uf/HzbmDfC2wT//aiZ4hGTv/xzgKwdb1sD6cGEkceow0s3b89/zg+3plyRm0HlZi886j5wUwFhdHiDTaBidZRo5cx/tMeLyguOATbzq17ydhzbrpxunuHx6lbFGiO97gsd4dk//7iCIo+Ew+hG2so5kvv+ITG4c1fzHPtu1Xn5QfUnqY3/uByVmB7gmnE/E+5zdm+6nDmoews5fr+NzThdSHzK4bBQOL9c4O8OI0xLSqjJ4lbniLJg1aFpQRLwaSMZmpkC9e/j6FOVrTQ6a/a4alGgfrl2ZL1sbHUQ3DOI7ntq9diHFfm3t1mul3rdJEJCHnlW/hlQntipMrpeMs7fUr6wK370D7VbXH0DUHzdYfRg/6Z11Ult1sffJS+heHbco15Sxy3+rDnPesqH1lajk0yu02hPUvEUqvcUXWXL7Ad0wNGMx5gOle4XJxq/r/YY0xdco2wRSEGwcT7YADlBrHc9ZbvzOL0QwyWCWWChB9Obg800v7tyBWaNvdwz+fL7Ph9i2irEeJkRgOzeEDw+JiD/V93vH9FgMEoFIJMoIuogmicZohf94SBuPn6hXaV9jP4VVVA/bu+Wg8S88GLtmEPSNRLdtlXx2XL/nuM8nKkhnlnjaropiKKLIH94pLIASci0pDBfj9Hi5BfaTSXQg5+PMjQX91Ktk4MOqK1K99l4BRPv5+vNovGZ3IxQv8ICvjV4/diThpoaM8uvd3D9d/DE477w3yAbW3IDm2i73pZ9aEj38JqS6h/s8/xgmUIVcuq2JTgefAyuoafzQxAuRASeg3NtG3ach/JEkyuX+JDt2PnDZTShUhyHHG3ttBg/6lhAchGjLJBtopj4e01MlCp2yqQRTr4sBBXru+lKaoanwYX8y2aWCJiR3KnhCOkYVFSvsO0oDRujUFOEptiNDTYrJoUbvOyvl4AhC9h3wORiTXK1MrpMfnvdnndnR/HRVSusMBgIxwrLdn3vq1VcncPiD0SquTx/kNmxeFyCT4uXVUd9AL+rSGmuq7OOCzDKeVPjiNWVaoP5KOFqYq5Xcuf/xW9S+u9eIq9GAtZWtQlgkRecjRtvG1NR4WXXpn+pwsTBTIy079Ikg8rSef1aVapIFcXCd6C2wHVjLXR+N0tw4Taw6x6H90BFRgNrtlq2up6hHKuV3inM5RJaQWZHd84e6RsKkk9po3dk9by54tpPw7cBkFas/G+GbHwuG+AwP55BZyXILTHCIVrPpXHEaUPYfL6nphJP1Rc10xG4UaCeY4IHCwuur8xmSQDgY4aVwhzWhjbtSHG8JO6P2i2nC9/0Bfx0zk6dYQq3aw7k5vIObD7SEKrxhz0fQ0+YTOfHW23CBNeZci1qNsUDhoeqmfyP6PvjoEjHk8QbrFyQVZPHVWijnb8YCM65iYNoEbvnchStZ/9cKg5Vd45j8KnB6UjzXl/bkyZx7VoD47ocUUi117WwgySSb4rXgLJ52Mv5XJbp3I+uBP81BUvOjy4Cacgi+GWWlC/8dwgqwiojjUBDnEOxyRyowwLQfytFra1OZS4XvRYr4uoamAfG3I/p2bA7G90yqKThH8Ke00Tqd+3l3dmJpaCZelBMYjGqNLVa3SM4+LQeL56gY6Bymy2LQPVOxjWfj5tq4o74swcxhyGJPynkS5xAjOXZP1/FAYcBT3u6qLoIkEfErwo4gozmyI1YCvM0oyI3ghjGPQSsof2sKUhq91WsKy9cYWN+4A2v4pG/Mxpdc6w6kI/HX7Xb0TuihmsiOy2wQIsrZbUmr3OBSUo6oDJNgQp+YqYkgTgYcWZDgawJw3DFfdzT//PhVUidgB2qa8uw/j9ToHBAS33iT8YLhhAfyXG0bQUFp7QmH7oQ3i6Flf4OTZLvJdh8pfuflmWu2ohm5pTiSg1pl3vq9uluTJwqXfh1hqy8e2iHoD+Y35gCIViTo6VOtK5dD8HYClucJucXASzwe2kPj4S4eYQtmkYHagXhAzp/F541xE8YFYqSPszDuz3soWzHy0p3E2jwZNQaIcGU9FNQwQxeDw0ZlK9dxXrj9IUHGUPTOyib8CqXmbZ7Ex54bn1rLx3qqAavu/gh6XjV0GmN1p+yyMK9HN5uYEvxgbAk43tsheREhyI+Q5WLIneKTGPmYiM/lxOp8fvqHy8YgXK0TlMiX0tliLI2JtfmWZP8eVV732sdYm+pcWzDzEmKLJZyeelyaZKkjPnnUO9keDwtgiLnmd5+t+Sr5y8brRnlvxcWEWfCqIALQYHvaXx6jTg4dAlye469uGwwOZVZCILLfGjaMg4LUCNMTtMSp1aC2y/3wR2t1v3w/iNBRQ+bNbtDqL2NAr7K4rUcyqbSpNrXZgAWXvjxBBtfYLK1uRYt3q2pfXJOAL0HtWcEwJLddOSJKV1SwvcvEuzg/4MPnA8MIUJOLqm3qI6wFyN99Ck6zYaV/zGSAzF/PGsaNa4vPLe5QnyuqVUnVQ6xELA6gbe53aGgeke+R/ycb2LJVyc7BhuzI90zA+c6wUDTb7NH//gdDSl2u/aW7lRJm8m1fLtPxcNuEM5JbkOCZKPM88HUsLRoC1pmKKlvWyeAXuxILbu0snpSxf8N+RgtLUSe5n2gdjOjoSTaN7mMZ7bF+cWk/MS8mFD4pcyl5UN7CbpFZH2a+Pm1VAnUTVfbw8qrmz1G9m5aKmRzY1SMhhPrlCn2t4uNUXNA3IFe6NOjSC1DEaAFZAfDlEkQCsbNhsZPj6NQPDSB3tLiTo0ZYoEbIeEIaKtU3Wk60rEszawTFuyHVd365LA/c/uarABN5M5rGq/dqTG3Ilye/5EKiYisisuzqNaZjmWv0z9TORc0CKbaTea214oNM9u2sXUZub/eqM3Pi/PjRSyQiOSwPWif2asTgu6hS6fb5UGosCWxdedMqdViIUUSSdIJx+qQ4KShfTT39VAWZbi+mB+iKICNwpt6cflY57Rcbs6d1kA26Iru73cuxYVlSvuJdcR5VfDYZRk8X0AXePROyw3Le6LaUdmTLzYsoNhhgQpd67xVNiHgk3pakmndeIAtTC4DCXy9oS6eU4CWxDdVmY53pKNbdAKmQsP37lrJZC6iDXMELGKcHjNuuZgcDyY8W/yv6ha3DX7OWm/35fpvhw55oitf4V+GULlcPWYyGGuVBdro19c8u0RDddDun40W7G5cSIzHLh/qZxb59R+EPY+wZ2XerkUim92hhXpKyW6WtAh6zQS97DrPyjCvKi3pCw96LeKynOpyjtsMQc2RmI/20zFOZcSa2AK++PoRcT6zeJyxlBZ7kk5mhqXGkLlM2hFKc+/T544xXP0Ua38Q6xdPTLTeG1PHnLMaOvksUQMrEFTB/lizCirmFQL8zYVU+OTeYQEFaITsBSMMYexS9HkajO2gGIf2micvntCZJsZQEwIH3/4JGJQGflBuH5rNXmnRRYXDQs3ZoEQoMtYDr1kFKUS/siiQSUxcTH9XYeBZiKDDFQoExREO9dddKQLO3BwMHvymCSTFyY+vxn3D27NDx6OlU092D5EDUwilttqVHpjJQDUceJYCLsK2swfXeNUVrBJT/w/sk+7si8rPtiMFis+oxvGdGQxirMBID700T39mULuNHzOyN+xBfcFACZcyngF1aSpv0JPkNUrAZTqfplv509cGXFUiEEm5dZb+OsP/blizqdK45/dSsIrufYTrCPY2lgJD6k6QljTfXVlHfYKSq+MsagyUcaMintyr95bD8kdTAeYNLNsMmo/Wdd8a2nStBP49ARIjqqpUHWY4q4mvO5Cq/CgCP+4/B+5zutGwX5pssgVLr1+fIM7WWLfiUQDk4c6ZdHZOWv5hG3g2dgQ5NXnpIY+BWwJpaouf25bXnjDzbHnQNofH/c6m+dEAS9Gs2h7pFRPKOBDnqswZ8KZjhId1ytHUTs533KwBoSiImoxKQUgZ7z6pA9QB3sZ8Cq0vwutJTTkfbX8AzCpm2cFXx/P22niUMHauU8IGc+78R6TsutoonoqFuoNA3l80t387YHMoL5KGAT1JO4zmx+vJ0LbLHlicHraSVYvJjnO9p++qnWgKw9OwFVVUagvZuf9qfiuum+hIicxP1q4zDnzkHsCNriLxBpxY9N+UOmqzdY1MunLMDgkMyi3uvnN3UBXJeZ8YLs5xr8QrOhimYoKuGBebZHAiBIkViv3DG8k2oNpp5OIgX6ulqaRN8V62QUPjn5tl1kPXhT9bcd8qIm8gi4or/FGbvQ6pgGSHmnayrugmf5E0upGxPRf/3xOtitGMaHLKJVm5zhglmVfI91o0yxhJZVS/5wQ8zfxK8Ylw0WmHXoGfRkoBRx9Hsnl/6sgTjAVwpmNuSeZtBwlX4qB8Bh8lxjqBDIuFGJ4I1wxN0XRlAAslzqMKwQfyA7OkuivCXfv+i+3XmhcBFM2n4jdT+NyUmBnQJPV3F2sZfKvJhUlXzSosFR4VevVVcOkFnnjdiRWc0TeSYxj41sJGYMbZTeLI3GvyZ8/gAAudQ1+4oFX+enX5V49MczGCYVBuoC4kHjp7ZVxj+clBwPr9k+v05SsezQK3enxLs1Nt/N7c7AImVUysjGou4iOohHo83Zs9/MI/OWB+OyXzOBD93NbApGHXrv8CVRHp2bwH+xB55cfNrdqFD35HSMx4iVmtzYAmSCIV8kXsHoq3DIb93riTWbubnjxbBW5zConVtbxLRStXHkIyAByaozME952Gc9aAdAbBpZSVCH88Uwb/4bPTVOVl+WoMYD7JIvK8VcMrJ8zHV4bbG0Dg7Kx17A4ej/ZcZ2Z5pVuVLUH1E/AccUTKm81SE+LQ6STTUDscUk0x2OWIbEORhg69tdoTGNkA1RfkGIRZHr5mCXOpLC55WWzCZoGPFUVtZRHwh0nq039CDdjEPo+JyaxSQAvDgR6Iqvxy0frrtEG1A385N81l05SSzN+IDm9bypF9m92EUqblnauZ5sjc37wRykOdl7w4o8WMgQsjii3EE/aJYDfHs1cH6DNBEujjcCc8qAefYFyIAURDcDnzun5UmkbBQsU4eu/W8I9nBE0qJKTdg2hwjq0+XV7a3TJ7R+alvJZCRia9lJ+grNB9dbrOmWEvUotMjvDhq4wV/kq4fvIBkzUGpDeYH74rne8uU3dgoNZdR9pUL6q9YDNRfOiF6Dyk+SYXQIghTjm9qR4tBHh0gnmF/9q3Qv22EzaLhSvDlDOxMrrCNRmLCl1jApzLrBCPn2mjn5zqK7OYK7VxOfQ5GfBfoPdyQwqFEgCVHkJ9oTnagRM3R0+rsuN5jQv9icCav/p1WqiEXSzCdLd/WEA6z6dDP7tPqPbeDYKAkVcz1lLGbFOC9b7cBd3MV0Ve8dZ89oR7OnxGS7uVpSry8banVZwpJg+nkH1jRBYa2BvBMY2xITH9ERXCjHzdZxs+ipdXP2DY7X+eWiBhtT2L0RRGTLPeazn5tpl4tu8iE2rWig731iuJDRbCHHy+g/Mb9+miAyVqfIpXT/iZeOxOxODO0hEpLM78I1+G2Z45yi3lS1K3m4WMQ559Lp4UML5vZUjYGJuxl+OPpUH5klpyBujkjprhei0TmUik10gjvNUp8mDkWlNKikmYspaVTqewbnOzJrmz8FLIpsT67EJLHIIfeDcWEfiP+DJrZ1jfxpoAb2abeMqLx+9RuZGzQoYtYVGgAWwEM9Kek2vPIeBNAKD6ao7nw6sgvfeLZPoXkbYO/tStHJdKzk+WFSFEU2NcALJAEP6S8pcnqqBBt57dwTrzQNCIdk2SocK4dLRbD/pu/VryKnm65ZYXiJCfHJk3mx9MRSl+nSK6OqEBSoGjz0/LADddwF/HqcfK3K3O+6YUGQcmj8pZL4PhZ6KrGkb8B38FmDvvLd3XQXbvS/FQmrXFTvJNkaN/FGo83KuS43BK1UfVnIqigGkCoP5fBda2MwAGTGNKX9K9t4Bx83pMFc5KSORmWKv+8VoVggWxoaBz3/9IBh6RwLd1tebwy89xvE5z6EEpXpDfrXWfRsMs6+ekUHH6idVosno55+xQ8Zqzelh0bxtJTgCcH3Z3/Cxlx9eNIS4JIFKOAVrDqbrXRszmY55a5+niJGHtkO3b6mnIDxLa1WXc7BAe33mt2KyM4Fbc3R6/WVTQN8QhlqAtave2WsQTqzWeSlKuGUVIJRqtObpv294rS0kDN1RKzdstZTXJebR2HlzsQ4P3NbMHUqFZMZw+/IKXnh4t+lY8qocp/B1oMszR03EFs3bPeND8QkItMvllObeCz3SZAjqZrobmLcrpFyQV7mwBjg3C3C8/bc5goQhv8j/IXMLGnt4mF7tybRDG5G0polxoUScQkPvmnga2/K+aapKeqSL0BTmo1Cm5g+booNOtdyKva2KoefRURaBk7113QKo3y+WTuFKtgETIK8HRluYS9DvlcciCDvnG8UaJRfZE2siZsiTHvRmN80xkUIInHeRZl5Re/+ATL6VhKFi8CZ/n/jbFV6T5pZ+Uoppvsi3qjacVFOJgWWfdlwVHKPW/TJO3na9hRM9bS2yo2rEsC6IBzRReVO6IesJU7PItzOamr+ROFfwGZmZ7ue8HNxAgLJKb7P3p8dMqk6Be5PJaT/5Rdc1deYVihWH9cjVKc9uz5EnfHqxLUkOO8iJUENBNVf5LyNy8zjLu/78k5WNTywiPfYeX3CPk7yc6CI3lum/CEZwfUaNpcI3KsPqfn2lmz3kd/acQjKA1ebkJaiuLD+epQ/Fc1llHXXMzofWzz/Kd29SNmOhcjMWw1jq1g3YfrXZ9rzXDYW4ZttfgfMi6oCUtBs0PkMVuxmq5lxEoCaSXPSqCJJ7MlKdRDidVt0AFlxk5cTdX++sBF2+E35mjwfm8ERVxH0FvuAQtsfA4V2G0TKTUxeyRGVjd/u6F1SvuAiU2/WaQjcNCU4Ep7VunXCYSbZj3U3wzu/LWM5MPlYuyQ3FOOCD/zt7K295hY2JhwF+ODDIZ676vGQFKveEQYkWj7lkK7rVmD7MhU0Y/tF8EcTTpo4/yqOufbd/zWIpMajnbDuWK2vn6OPPtz2rc9MIBNlPd8tt+yf+7SC4wqEPbozKMCwY5Bygx4JmoIEDsixWRDcdHd6S3/dZMHXOJAAv7+NIstl00crgSqHZKAEe4g3G4dzIV51EeZB01r7p8GNlfUnG/GjZgNGsqXZdYMBVtAtFNv3hJWPve4GvqZ2XxuiNkHTz5kxWgr0PjQdJlVywJ9Zf2ZvqeeTbolKtvK54re2Lq5BoyzfsRtvDfyao3kmyFzDQ88nM+qx83w74RDlkngtYiArI05Epre3GgBeSlMig0pE6RGQaFznKkGeb0SozLCyiOtxh7hgwZlbKbClzUUfC8ntMiHUOZE375RhTy9c4DA+oMLkUDkztSybZbdmP1xpaIbjUpPAHBq3cIq+CBFzbMlMMCCkUQ6d9LGV6GYCsYiEWZIy3nBnuxOYXeU4YTGDSin9e4/pCjPtQSHlg5LMEvIlF0ElthqrF129iK2RPBEWd3XWOl3SWV5uz5VUyZYp5kEFmz7QfP/B1W1BBzQ2iTGbSVT79lUHzcGXz3PJceSgz4uknETUwo0xffpr2KUvZF0i/r2sL3IFIClYx8CbIZE6Qt7MDJbOPB3xMScwaOcWG66IJfCnDkb0D2Mb+PHzX+oiCbxeTIogtyN+s2NJirNACk/OACSOTtV6vscwbzW4M168xqaI+RzR47S1nlV/rOoZnid87n/Ima2XYa3un3BuGAisNjb8eLMT9OnMtazQROFCuO1HiZXaOc0oUDbNC4eKLToOx8DzVhMgGA8XIAQ2x3b6I0uEyLssQjJX3QphcUMx4KsMgJ+72km4N2aqkBF2coKmUEt1eqIMGn+5txMT4kYVGd3ALO+y9Z4PP3d3l48JQK8s9ZZ/Qx/+NBKgBEJFlQ32psoJiihGO7FSYM5L81q72kaAYcilEFMG+ZK1BcMqELkflyCV7v8JEXLO4Rf/oZYNZHZVjJhfL6fnpP9Tio3Euue5uS7FMkfGOeRCTrBZ06Caev7tgufeTrX34Ur/Vvc+b8ksiIShNJtuF9WmYxOZ4xg8y6zTdy3KAB2y5kYkcRnXsptWwAFyKZ2I/QGySNeoQLkINUMloC+5L3WuMMx297Q1xUYLKqZ9XHavaobo6QQv4auMm+i84IhxRpPt9nUmcav9NcjCcP+TcMmxsQZ/F3mgeoA0fQgwvTsyXuuTaM3Sqtv2jaaajmaFQpK9W6uIbeqwvSDo34ZrY6elDUHwSCjHRRmlwmyy+eOra64Ssq0XSXYljMHtKY+FShcMkHsEUY/4Bw63dJ6KpwDaxmthlDdbdE+TvYF3v33cGSKqO+1H1pKYhJMvZD5ckQcHyNF8zrtiR5b0ko6NPGoRexUZTYP6VbUdn3zzxGBOi8Z0OqHjGqYxRXwN3mYi0GYEEZYq+Q3QvdKcEHILLLj8S+VFepSfErtmfZCdvxbfIifFSpEzKi+7VJsLMT+zEFeyp1OdwRC1VZrfTLIyR7xTPUcZFYPD9qI7D70uTb4hdpqPXsJIRNYbZtNwch1OI3trh3u2ScoQyM9POnInsUa+OovcwkUP1UfIzPb95n4BaF2ev57NHAej0+BVMF9/Cj9663HN2/JN3SQgslL914bKfiTTDFAz9PlQEL/dSv1H8xl3mtWxh1McFO9EJXlRDaKQDsyKO4vOJW90NFE6yw2tjbc2GeF95sbs0I9enAa6QwQVf/kJQhAD2BzUDKggOyjy1TEhED6sfk+418lQy3c/uj8aw8UEzZ6hIMCd8RohAkumMtIj9m73l2yPWoGHVTPaywkC7Yj9tBM1NxMgcrDwRtk4RO2WHT7Ql5kQCKdJj6kNuOTeyEBYBjLMhGz+O5/YGa84HEiTYEpZ6fFzy26GG2hWtTyteuYrhSyG56BjsT/wQeLRytpTY3D7sIMqZnJ9z1FDrfyjFlGl2TNw9BQysbaxOuwYYZs/7I6BANgkqCknWZC7/BBXvaeKwAmC959I+G39BUE9bExkNlbRoFRyEtNzv+NJ91FuisG3JCS6uYBeRnfv8AkAfKTeg9EYamqnsGfAV7d0f9DghHEQ5IsPGDIUhgoSj7obM4Bu5uhQ3/CYEDTHc92AsFvDK4XGrwUeGBWBHPlS+f4x+CxmmHz2sAGmSFNt65kwZC64mnaoWlu2310laYn8r62AqsR5dfjyK18MEdurdagldzfJtjFXlZs7St4QhdPiye6TPh2/ZAQLU/Fip5s7TDEM16KtRWrK9hmxnQ7bmfa/+7pa10Z8WDPK3NuJ+NN/RAbQ5vHx2uX0Lm7/w7cAEH/hvZA+mt7J7zGw7YtQYwnNN6dpgwkGjjrS3yQoeoYt1EnczmtmJfQZWzUlP3Hlg9Wzlr9IH23q3thGth+QNEANFettxKfskkGOlLk8AqoKJwDqOxAa6UzAx07plSSyNBJSGco9zjnC5gGbDoKvsMDuBR6bGRlGzJ+hFsGa/Izt78aI+WZ6dJlZKp4pGISuv9rV0sAS0MWEwCmfauO7oQZMiakHU35LBxiyJoOMddhUWgcZuC8r4Ksvn75TTcQXLJ7kWtYhGuGqPd9dZuFjBWQHNwosXY5snbHFQq72CvHXhIg+shQxycuLOuWYErwCLZeF24b7F78pO7xw4X6lIAR02hUOf5087Rl0nOaeb6CK4i/KA/EZv76ftOWZtjwxslNr0E/u8rWUmnf3amfg6UZmBAluuoj3Dd7UV+9IAJ6iYcDfSJlgmIImohjfIUMJ27z+opj50Ak9af2LCNrWrBJvMovA1OeNO+MF/MwZvnaCxTgG7Cw4QfSPF6AYCGFt21M8PySZFeV3t2Rqqs5JMzMYzGRgq4o+UaKRgBf9GHi/9X9HXA3wxkCsd/UhnHSh2zUVDiraio/6nP4y3XJqs8ABfALAtCYU7DHPMPRjgcM6Ad/HiSXDAbOdSMkvGZPAkHs8wuQTy6X2Ov/JFvcPuKfV3/r9Q28";const Am=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),xm=4;function Wk(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let E=1;E<r;E++)s.push(i+=n());let o=n(),a=e;e+=o;let u=0,l=0;function c(){return u==0&&(l=l<<8|t[e++],u=8),l>>--u&1}const d=31,h=2**d,g=h>>>1,f=g>>1,p=h-1;let m=0;for(let E=0;E<d;E++)m=m<<1|c();let y=[],w=0,b=h;for(;;){let E=Math.floor(((m-w+1)*i-1)/b),_=0,R=r;for(;R-_>1;){let T=_+R>>>1;E<s[T]?R=T:_=T}if(_==0)break;y.push(_);let x=w+Math.floor(b*s[_]/i),S=w+Math.floor(b*s[_+1]/i)-1;for(;((x^S)&g)==0;)m=m<<1&p|c(),x=x<<1&p,S=S<<1&p|1;for(;x&~S&f;)m=m&g|m<<1&p>>>1|c(),x=x<<1^g,S=(S^g)<<1|g|1;w=x,b=1+S-x}let A=r-4;return y.map(E=>{switch(E-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return E-1}})}function Qk(t){let e=0;return()=>t[e++]}function Zv(t){return Qk(Wk(Zk(t)))}function Zk(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function Jk(t){return t&1?~t>>1:t>>1}function Yk(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=Jk(e());return n}function wa(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function Jv(t){return va(()=>{let e=wa(t);if(e.length)return e})}function Yv(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(Xk(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(eO(n,t))}return e.flat()}function va(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Xv(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)Yk(t,n).forEach((s,o)=>r[o].push(s));return r}function Xk(t,e){let n=1+e(),r=e(),i=va(e);return Xv(i.length,1+t,e).flatMap((o,a)=>{let[u,...l]=o;return Array(i[a]).fill().map((c,d)=>{let h=d*r;return[u+d*n,l.map(g=>g+h)]})})}function eO(t,e){let n=1+e();return Xv(n,1+t,e).map(i=>[i[0],i.slice(1)])}function tO(t){let e=[],n=wa(t);return i(r([]),[]),e;function r(s){let o=t(),a=va(()=>{let u=wa(t).map(l=>n[l]);if(u.length)return r(u)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,u){if(!(s&4&&u===a[a.length-1])){s&2&&(u=a[a.length-1]),s&1&&e.push(a);for(let l of o)for(let c of l.Q)i(l,[...a,c],u)}}}function nO(t){return t.toString(16).toUpperCase().padStart(2,"0")}function e1(t){return`{${nO(t)}}`}function rO(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function Gs(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function iO(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var sO="AEUDVgHLCGMATwDUADIAdAAhADQAFAAtABQAIQAPACcADQASAAoAGAAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAeYDMwCxCl8B8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobWgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vAITAdQZWxDzALN9AhsZVwIcGSkCBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rlr3JG9m8w9lIAXltp/v8kfWaIaaR9OwpAES/I3ZVamDXSgB/UsOgAG6D0tq+5CIqE15FiAhV3yA2VhCQ7tj+m6xXaF53FIfGi/IAZIskMGAi2MU7MDVJNCbMzERyHZi+osdPtnFVbvq653O8rwaCy4IAf9OOok65AqJUtUriUfYsGPPVbe6jm0s9lbKlPCUKjdkHsFsEhvX4kT39ZCtAAbwQdn/h4TpO5hTByWAmr5n+Wuwhdegv6bmvX4LyOes3z2+cuHv2JFYwVMNuq2gzn8YHTjlUQd39osyWei4NKl3LAdfxlO876hh5ENp/cOvpuI9bF55guEthLLPOXjD4dktTH04P5TvZrWTM0e4+BHJxj7MLApXIFOs0sWKhNkG8iwuM5wR83my6V3wW06abhDzTXYfOr/ZpFXgXzmv4d12FFyP00/dPGbIVGV5ao8UufGzUwp/IHx6v/wDWJr9iaoCulhWwlZ7A8q/NMoD12+mBdNRgJYnThRLtMx1Bgwttn8/4Qn2CDfOSup9GVXEvA21ILgp0owHYxNOkpwLWz0G7K+WREIDjIzUzSn8I99CuJSmSpPyH0Ke6/NERYiNx+3dncSebPnOUnnWD61AhJ1n/tSLZmU5wYO5GfgzyAYJm6VL91LxZ8hL1lfximQxIDMRhIecQZBmeE5R0XlrpvwplVrJwpa8BBCdp93GPP9lyBeZ2zkRr920CR3cYbKpKHfogvm0nV7XdDz6EbjzlxADCMjSLXuXpIpyuizy39yY+I+H9rmpoIF3YwEjlH9MgGgWcCNTjHEWMqAbprn2Ox7rOHupaVE3lNyg3nt5XaZID6Y+uml5Ja+aOPu+BI+DZbiJVfaspUadakWUX6TA4dETkIqdJJHYnU4Z4yKpt5y8rVIahoMUf8A8kWtAQNCTbjp71gx3/zVdqNz1Sutkw0gFIMVm2BF4Xdv/0olw+NaDIR9Bb3DPweZA2K/cw+/b+AwyWl9ZOP67A9nexmeTNjfdzPGf9J6E6BMPKa5lJh+qNsdUz3HBUevU71eQFCqOcxiIYhacAhh/8PX0J5DdSViZ6WazDDx7cukJNpMfEkYLJ5Ao4vLoVd3d25Pg4qaVa2p2D2L3WvYPJ5Yf/A/MSxptjlgXL/KJtP2U0cRv2I09ATAiWCJYuRwiapeKFsqmi18yMMulDp3HdcIldq+7jkwsJUOHLHCzzzBw5XFvL0CAmo1ub456z7zb7shk3KPGCLZzr47oT1k/j06XNnJvG3Udv6XrP+wsqTBlZ5MaNPt9FOs/4Bt/ja/vbVhTNpBFl9Gq7MqINvGlWKOAwQzwOZy+EzSdjAqKJVV2YcskTuM94aIK+kc/AZaXiZLPREUDpkXIV947IFfj+85TrqPqLfkGcxgboMQjosf+az+odLNXdyp1mDNGsqSdK/pJ2Ca04mt/4d6s1X+lncOEYaGBBeW4pApGcjf7/XJCFbj3N3mFb+BtlIcw8ZiDKoClFX9Rf0bxCqtLpicObKJzBVVHr/6u4siH2hK75RNv7w9GfTbhJOQBYiFUZAByY4rn37tZBHT//kqKsNi3ryL9AqXJRzqiMIJMhILjoi/i8LVEsbu+Ih9bsyW16sgQqjYLO0qda6KaCPKj3DQcu6CfV5lKtjS3ZCdqLAZkOey9MR+QutJBGiz/r15GVD6rCVwJR4UUKC4GNJkfDf00OMW8aQtLSAGLXV8MIi9mbbl/qQEpxCm2L5hutFX4ekeLH4QgBWUFKs/2VVMKy46WtFE6AbwgmYm/Z0yHk5veDIrcl2HpVqb/rSE0PC9EbDzJEWqeaPhh7vF369Umq2kSiB3s5rBI6c/7N9bkRu4h2n+/h5nSwy+7n+/I+6oXQVANo2Jb5zDwtiBPf1ySCzHdT6yJShMzqSRZfnykX49CaFaxhoVF4PBhEuECJ1PrFYSpmHuyYsl14DTAV9ZxRms1XiR/kBrjhZjidOt0UNe+GSml7XNgpVw8YsUTmZXLTK+6iYnyW/wYR1W4UXwOi14xpFROHb6HcZzksgF5DbL2AFXzKNwHU2adjdAY+KCyM/cwRTBkkq/a227NI0q6DR2MkMCRu620t79bGcYUmACtqN3mk/0uNwd3JSXHqE1kzf6Yyj0W2083JNDRnIXDlgBxJ6uf58NN1f6FQiRCWB4egF8QDx74AixV8oTyw7PluIjr3/rj/WzgwPSq4xPojaF7V0xqG2u5ti2L1h6yYHv73Isrukr0kURDIEjClBsBx7kdcXUxaYMS0syT3ymLzDzslNDWQOT1Tao1YNmJHARUenhCkmV9tqCPGI5GqZaRpkiPxyjoncWjyOHYGqvbvRX+Bn1pn7EhRNXa1lqJPmoeN5VqdqIDPhEVhFsyG0d4iQEIYX0wZUbY2XbZWYlpZ/l66IrDDY0q1C1YzBDpHC4h05YqHQLqS9anyl22JQ6lEvjvdBwMHfE7z0luCXD34/rFeDa2TmSeEAykSpYO5j1G/nsgpR3qn0qaQEmLjnnLfcz+veoYqPnRqmRGwCJ6FJ3Gm/Z1/aVX5PSb03MMnjAf41ww54sD5k8FrkfBP+K0b1MrYpapWjtpZfve2HVf4ickX3LKSOhu7qI1Vd4c1kNrn2ajy1t4y93JhV4fnWCKq7OmFpcr7FjdJCXPTql0Drr14Ho3Z87+GPQ4Z/DcTiGqtvZxlRYi8cNuhXABveZIwNl/BX1huhVLaFax5OqypUrQRyb9OE3SSkPlDdy5uo5XGg2EIGEjLY1MO5cr1ibfiFWV7zspcTgkBKkwo5jPyAin04LqizZXb2tDRgwKJjGx4cVk3ngAQixwcxjYAg2Q7vmUR/hpwInMdw7OhC2qyf41vTPkudQAORS0DdLtOGQxb4fH2VYGsvJCkeWPeUwtf1/tuIhzXEThoCZzzSJqqjUtbaPI3ntHm3T5uf849hGUA0zU8ni5W+EEn3/0Y6oUhQFw9z0aGjkljBbAlFXc0y82G2wkd7VdgWa5KTgJJNjNwZMfmdnUIUn1JU5LiWX5UZEZbVlKSN76mlmjUR2ku+fucTNlO4IAAahnLjBhlvQNR9pe9swGBgq0YR7P3VCyI/seYwQ4QBzy9X+HPePgoF8WfKaJ4MBOhLCGHae6Z8xkNXwni9QAKvTNtVA56x8YJflZ/VvONRSlsSLmiSyNMnTjTaE1ko81zkzGEnVwEhjCzlwIqpxmpDAqwsEmtpdr3xpc7i/ZX3f2TzT3M0FdxIEQvO1jgmmiN+D1YpMduAzEhBtj2OBkMN/rv6p7Th4pSH6f5aH3aTvwFTl7EOSgGASI7ttyMehzpm4AVyK+bFEaFg9gnZsSUPpsbAe/0RFhrH+EXZ12Z7thf4dzN1+Sn+G8QrDA1VKaN4IFxD1rQz9Xq9Coii9S9/hPbTGjyBwFH3H1UdQuz5KsgPDEHua4/kPg2Gp/IIItsaLWBqiT9XH45MiQxSosGJ56H/0F2cjcCFd72l1665RNHURdC3lspI77esfJsl+rXXabkAy7vxDXG/XGGcKpwiKDPFfvMEgjkAHil4Za1F36RnyxxvdIAzvgfH8knukYDck07tc++DP4TdWeI7HXuq5Yl6VVFrUQtf64/dkXewlKZSHQo6YvCSpREB0GDrz+Ys2GfO8nw2SwrYwaf88AifzlPvP17bf1mI3AuccJvAjZIpBmqvharKFAebEjVKfGAwpQjWoXlm9LROsq9bCk1UeQ3CJxJqprzssS/Q04JeS1ReCCubL3J7sx86spkP4eNpp95UF+8K748icIs8vdILFklk9skQqi1So6cx3X906pvy1vz+KipTJ8fiVJxsV5MmT0XwA";const Ea=44032,Su=4352,Tu=4449,Ru=4519,t1=19,n1=21,Vs=28,Bu=n1*Vs,oO=t1*Bu,aO=Ea+oO,cO=Su+t1,uO=Tu+n1,lO=Ru+Vs;function Oo(t){return t>>24&255}function r1(t){return t&16777215}let Rh,Im,Bh,Rc;function dO(){let t=Zv(sO);Rh=new Map(Jv(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),Im=new Set(wa(t)),Bh=new Map,Rc=new Map;for(let[e,n]of Yv(t)){if(!Im.has(e)&&n.length==2){let[r,i]=n,s=Rc.get(r);s||(s=new Map,Rc.set(r,s)),s.set(i,e)}Bh.set(e,n.reverse())}}function i1(t){return t>=Ea&&t<aO}function hO(t,e){if(t>=Su&&t<cO&&e>=Tu&&e<uO)return Ea+(t-Su)*Bu+(e-Tu)*Vs;if(i1(t)&&e>Ru&&e<lO&&(t-Ea)%Vs==0)return t+(e-Ru);{let n=Rc.get(t);return n&&(n=n.get(e),n)?n:-1}}function s1(t){Rh||dO();let e=[],n=[],r=!1;function i(s){let o=Rh.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(i1(s)){let o=s-Ea,a=o/Bu|0,u=o%Bu/Vs|0,l=o%Vs;i(Su+a),i(Tu+u),l>0&&i(Ru+l)}else{let o=Bh.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=Oo(e[0]);for(let o=1;o<e.length;o++){let a=Oo(e[o]);if(a==0||s<=a){s=a;continue}let u=o-1;for(;;){let l=e[u+1];if(e[u+1]=e[u],e[u]=l,!u||(s=Oo(e[--u]),s<=a))break}s=Oo(e[o])}}return e}function fO(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=Oo(s),a=r1(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let u=hO(r,a);u>=0?r=u:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function o1(t){return s1(t).map(r1)}function pO(t){return fO(s1(t))}const Sm=45,a1=".",c1=65039,u1=1,Pu=t=>Array.from(t);function _a(t,e){return t.P.has(e)||t.Q.has(e)}class gO extends Array{get is_emoji(){return!0}}let Ph,l1,xi,kh,d1,Ss,sd,ws,gi,Tm,Oh;function Ap(){if(Ph)return;let t=Zv(Kk);const e=()=>wa(t),n=()=>new Set(e()),r=(c,d)=>d.forEach(h=>c.add(h));Ph=new Map(Yv(t)),l1=n(),xi=e(),kh=new Set(e().map(c=>xi[c])),xi=new Set(xi),d1=n(),n();let i=Jv(t),s=t();const o=()=>{let c=new Set;return e().forEach(d=>r(c,i[d])),r(c,e()),c};Ss=va(c=>{let d=va(t).map(h=>h+96);if(d.length){let h=c>=s;d[0]-=32,d=Gs(d),h&&(d=`Restricted[${d}]`);let g=o(),f=o(),p=!t();return{N:d,P:g,Q:f,M:p,R:h}}}),sd=n(),ws=new Map;let a=e().concat(Pu(sd)).sort((c,d)=>c-d);a.forEach((c,d)=>{let h=t(),g=a[d]=h?a[d-h]:{V:[],M:new Map};g.V.push(c),sd.has(c)||ws.set(c,g)});for(let{V:c,M:d}of new Set(ws.values())){let h=[];for(let f of c){let p=Ss.filter(y=>_a(y,f)),m=h.find(({G:y})=>p.some(w=>y.has(w)));m||(m={G:new Set,V:[]},h.push(m)),m.V.push(f),r(m.G,p)}let g=h.flatMap(f=>Pu(f.G));for(let{G:f,V:p}of h){let m=new Set(g.filter(y=>!f.has(y)));for(let y of p)d.set(y,m)}}gi=new Set;let u=new Set;const l=c=>gi.has(c)?u.add(c):gi.add(c);for(let c of Ss){for(let d of c.P)l(d);for(let d of c.Q)l(d)}for(let c of gi)!ws.has(c)&&!u.has(c)&&ws.set(c,u1);r(gi,o1(gi)),Tm=tO(t).map(c=>gO.from(c)).sort(iO),Oh=new Map;for(let c of Tm){let d=[Oh];for(let h of c){let g=d.map(f=>{let p=f.get(h);return p||(p=new Map,f.set(h,p)),p});h===c1?d.push(...g):d=g}for(let h of d)h.V=c}}function xp(t){return(h1(t)?"":`${Ip(El([t]))} `)+e1(t)}function Ip(t){return`"${t}"`}function mO(t){if(t.length>=4&&t[2]==Sm&&t[3]==Sm)throw new Error(`invalid label extension: "${Gs(t.slice(0,4))}"`)}function yO(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function bO(t){let e=t[0],n=Am.get(e);if(n)throw jo(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=Am.get(e);if(o){if(i==s)throw jo(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw jo(`trailing ${n}`)}function El(t,e=1/0,n=e1){let r=[];wO(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];h1(a)&&(r.push(Gs(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(Gs(t.slice(i,s))),r.join("")}function wO(t,e){return Ap(),xi.has(t)}function h1(t){return Ap(),d1.has(t)}function vO(t){return xO(EO(t,pO,TO))}function EO(t,e,n){if(!t)return[];Ap();let r=0;return t.split(a1).map(i=>{let s=rO(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=SO(s,e,n),u=a.length,l;if(!u)throw new Error("empty label");let c=o.output=a.flat();if(yO(c),!(o.emoji=u>1||a[0].is_emoji)&&c.every(h=>h<128))mO(c),l="ASCII";else{let h=a.flatMap(g=>g.is_emoji?[]:g);if(!h.length)l="Emoji";else{if(xi.has(c[0]))throw jo("leading combining mark");for(let p=1;p<u;p++){let m=a[p];if(!m.is_emoji&&xi.has(m[0]))throw jo(`emoji + combining mark: "${Gs(a[p-1])} + ${El([m[0]])}"`)}bO(c);let g=Pu(new Set(h)),[f]=AO(g);IO(f,h),_O(f,g),l=f.N}}o.type=l}catch(a){o.error=a}return o})}function _O(t,e){let n,r=[];for(let i of e){let s=ws.get(i);if(s===u1)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):Pu(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>_a(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function AO(t){let e=Ss;for(let n of t){let r=e.filter(i=>_a(i,n));if(!r.length)throw Ss.some(i=>_a(i,n))?p1(e[0],n):f1(n);if(e=r,r.length==1)break}return e}function xO(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${Ip(El(e,63))}: ${i}`)}return Gs(r)}).join(a1)}function f1(t){return new Error(`disallowed character: ${xp(t)}`)}function p1(t,e){let n=xp(e),r=Ss.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function jo(t){return new Error(`illegal placement: ${t}`)}function IO(t,e){for(let n of e)if(!_a(t,n))throw p1(t,n);if(t.M){let n=o1(e);for(let r=1,i=n.length;r<i;r++)if(kh.has(n[r])){let s=r+1;for(let o;s<i&&kh.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${xp(o)}`);if(s-r>xm)throw new Error(`excessive non-spacing marks: ${Ip(El(n.slice(r-1,s)))} (${s-r}/${xm})`);r=s}}}function SO(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=RO(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(gi.has(o))i.push(o);else{let a=Ph.get(o);if(a)i.push(...a);else if(!l1.has(o))throw f1(o)}}}return i.length&&r.push(e(i)),r}function TO(t){return t.filter(e=>e!=c1)}function RO(t,e){let n=Oh,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const BO=t=>vO(t),qn=t=>{let e="";for(let n=0;n<32;n+=1)e+="00";if(t){const r=BO(t).split(".");for(let i=r.length-1;i>=0;i-=1){const s=Xt(r[i]).slice(2);e=Xt(`0x${e}${s}`).slice(2)}}return`0x${e}`};var rc=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class PO{constructor(e,n){this.contract=new Mi(Gk,n??Iu.main,e),this.context=e}getOwner(e){return rc(this,void 0,void 0,function*(){try{return this.contract.methods.owner(qn(e)).call()}catch{throw new Error}})}getTTL(e){return rc(this,void 0,void 0,function*(){try{return this.contract.methods.ttl(qn(e)).call()}catch{throw new Error}})}recordExists(e){return rc(this,void 0,void 0,function*(){try{return this.contract.methods.recordExists(qn(e)).call()}catch{throw new Error}})}getResolver(e){return rc(this,void 0,void 0,function*(){try{return this.contract.methods.resolver(qn(e)).call().then(n=>{if(typeof n=="string")return new Mi(Vk,n,this.context);throw new Error})}catch{throw new Error}})}get events(){return this.contract.events}}var rr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class kO{constructor(e){this.registry=e}getResolverContractAdapter(e){return rr(this,void 0,void 0,function*(){return this.registry.getResolver(e)})}checkInterfaceSupport(e,n){var r,i;return rr(this,void 0,void 0,function*(){if(te(_m[n]))throw new wg((r=e.options.address)!==null&&r!==void 0?r:"",n);if(!(yield e.methods.supportsInterface(_m[n]).call()))throw new wg((i=e.options.address)!==null&&i!==void 0?i:"",n)})}supportsInterface(e,n){var r;return rr(this,void 0,void 0,function*(){const i=yield this.getResolverContractAdapter(e);let s=n;if(!xe(s)){if(s=(r=Ma(n))!==null&&r!==void 0?r:"",n==="")throw new Error("Invalid interface Id");s=s.slice(0,10)}return i.methods.supportsInterface(s).call()})}getAddress(e,n=60){return rr(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,cs.addr),r.methods.addr(qn(e),n).call()})}getPubkey(e){return rr(this,void 0,void 0,function*(){const n=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(n,cs.pubkey),n.methods.pubkey(qn(e)).call()})}getContenthash(e){return rr(this,void 0,void 0,function*(){const n=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(n,cs.contenthash),n.methods.contenthash(qn(e)).call()})}setAddress(e,n,r){return rr(this,void 0,void 0,function*(){const i=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(i,cs.setAddr),i.methods.setAddr(qn(e),n).send(r)})}getText(e,n){return rr(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,cs.text),r.methods.text(qn(e),n).call()})}getName(e,n=!0){return rr(this,void 0,void 0,function*(){const r=`${e.toLowerCase().substring(2)}.addr.reverse`,i=yield this.getResolverContractAdapter(r);return n&&(yield this.checkInterfaceSupport(i,cs.name)),i.methods.name(qn(r)).call()})}}var nn=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class g1 extends qt{constructor(e,n){super(n??""),this.registryAddress=e??Iu.main,this._registry=new PO(this.getContextObject(),e),this._resolver=new kO(this._registry)}getResolver(e){return nn(this,void 0,void 0,function*(){return this._registry.getResolver(e)})}recordExists(e){return nn(this,void 0,void 0,function*(){return this._registry.recordExists(e)})}getTTL(e){return nn(this,void 0,void 0,function*(){return this._registry.getTTL(e)})}getOwner(e){return nn(this,void 0,void 0,function*(){return this._registry.getOwner(e)})}getAddress(e,n=60){return nn(this,void 0,void 0,function*(){return this._resolver.getAddress(e,n)})}getText(e,n){return nn(this,void 0,void 0,function*(){return Yt(e)?this._resolver.getText(yield this._resolver.getName(e,!1),n):this._resolver.getText(e,n)})}getName(e,n=!0){return nn(this,void 0,void 0,function*(){return this._resolver.getName(e,n)})}getPubkey(e){return nn(this,void 0,void 0,function*(){return this._resolver.getPubkey(e)})}getContenthash(e){return nn(this,void 0,void 0,function*(){return this._resolver.getContenthash(e)})}checkNetwork(){return nn(this,void 0,void 0,function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const i=yield nk(this);if(!(typeof i=="boolean"&&!i))throw new ux;this._lastSyncCheck=e}if(this._detectedAddress)return this._detectedAddress;const n=yield lp(this,Object.assign(Object.assign({},this.defaultReturnFormat),{number:hn.HEX})),r=Iu[zk[n]];if(typeof r>"u")throw new cx(n);return this._detectedAddress=r,this._detectedAddress})}supportsInterface(e,n){return nn(this,void 0,void 0,function*(){return this._resolver.supportsInterface(e,n)})}get events(){return this._registry.events}setAddress(e,n,r){return nn(this,void 0,void 0,function*(){return this._resolver.setAddress(e,n,r)})}}var kr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const OO=t=>kr(void 0,void 0,void 0,function*(){return(yield MB(t)).map(Xn)}),CO=(t,e)=>kr(void 0,void 0,void 0,function*(){ee.validate(["string"],[e]);const n=yield LB(t,e);return Xn(n)}),DO=(t,e,n,r)=>kr(void 0,void 0,void 0,function*(){return ee.validate(["address","string","uint"],[e,n,r]),$B(t,e,n,r)}),NO=(t,e)=>kr(void 0,void 0,void 0,function*(){return ee.validate(["address"],[e]),UB(t,e)}),MO=(t,e,n)=>kr(void 0,void 0,void 0,function*(){return ee.validate(["string","string"],[e,n]),FB(t,e,n)}),LO=(t,e,n,r)=>kr(void 0,void 0,void 0,function*(){const i=Gt(e,oe,{transactionSchema:r?.customTransactionSchema});return jB(t,i,n)}),$O=(t,e,n,r)=>kr(void 0,void 0,void 0,function*(){const i=Gt(e,oe,{transactionSchema:r?.customTransactionSchema});return qB(t,i,n)}),UO=(t,e,n,r)=>kr(void 0,void 0,void 0,function*(){ee.validate(["string","address","string"],[e,n,r]);const i=xe(e)?e:kn(e);return HB(t,i,n,r)}),FO=(t,e,n)=>kr(void 0,void 0,void 0,function*(){ee.validate(["string","string"],[e,n]);const r=xe(e)?e:kn(e);return zB(t,r,n)});var ir=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class m1 extends qt{getAccounts(){return ir(this,void 0,void 0,function*(){return OO(this.requestManager)})}newAccount(e){return ir(this,void 0,void 0,function*(){return CO(this.requestManager,e)})}unlockAccount(e,n,r){return ir(this,void 0,void 0,function*(){return DO(this.requestManager,e,n,r)})}lockAccount(e){return ir(this,void 0,void 0,function*(){return NO(this.requestManager,e)})}importRawKey(e,n){return ir(this,void 0,void 0,function*(){return MO(this.requestManager,e,n)})}sendTransaction(e,n){return ir(this,void 0,void 0,function*(){return LO(this.requestManager,e,n,this.config)})}signTransaction(e,n){return ir(this,void 0,void 0,function*(){return $O(this.requestManager,e,n,this.config)})}sign(e,n,r){return ir(this,void 0,void 0,function*(){return UO(this.requestManager,e,n,r)})}ecRecover(e,n){return ir(this,void 0,void 0,function*(){return FO(this.requestManager,e,n)})}}var Vn;(function(t){t.HTTPS="https",t.WebSocket="wss"})(Vn||(Vn={}));var Z;(function(t){t.ETH_MAINNET="eth_mainnet",t.ETH_SEPOLIA="eth_sepolia",t.ETH_HOLESKY="eth_holesky",t.POLYGON_MAINNET="polygon_mainnet",t.POLYGON_AMOY="polygon_amoy",t.AVALANCHE_C_MAINNET="avalanche_c_mainnet",t.AVALANCHE_P_MAINNET="avalanche_p_mainnet",t.AVALANCHE_X_MAINNET="avalanche_x_mainnet",t.ARBITRUM_MAINNET="arbitrum_mainnet",t.ARBITRUM_SEPOLIA="arbitrum_sepolia",t.BASE_MAINNET="base_mainnet",t.BASE_SEPOLIA="base_sepolia",t.OPTIMISM_MAINNET="optimism_mainnet",t.OPTIMISM_SEPOLIA="optimism_sepolia",t.FANTOM_MAINNET="fantom_mainnet",t.FANTOM_TESTNET="fantom_testnet",t.DYMENSION_MAINNET="dymension_mainnet",t.DYMENSION_TESTNET="dymension_testnet",t.BNB_MAINNET="bnb_mainnet",t.BNB_TESTNET="bnb_testnet",t.BSC_MAINNET="bsc_mainnet",t.BSC_TESTNET="bsc_testnet",t.ARBITRUM_ONE="arbitrum_one",t.ARBITRUM_NOVA="arbitrum_nova",t.AVALANCHE_FUJI_C="avalanche_fuji_c",t.AVALANCHE_FUJI_P="avalanche_fuji_p",t.AVALANCHE_FUJI_X="avalanche_fuji_x",t.BLAST_MAINNET="blast_mainnet",t.OPBNB_MAINNET="opbnb_mainnet",t.OPBNB_TESTNET="opbnb_testnet",t.GNOSIS_MAINNET="gnosis_mainnet",t.GNOSIS_CHIADO="gnosis_chiado",t.PULSECHAIN_MAINNET="pulsechain_mainnet",t.PULSECHAIN_TESTNET="pulsechain_testnet",t.KAVA_MAINNET="kava_mainnet",t.CRONOS_MAINNET="cronos_mainnet",t.MANTLE_MAINNET="mantle_mainnet",t.CHILIZ_MAINNET="chiliz_mainnet",t.CHILIZ_SPICY="chiliz_spicy",t.MOONBEAM_MAINNET="moonbeam_mainnet",t.TAIKO_MAINNET="taiko_mainnet",t.TAIKO_HEKLA="taiko_hekla",t.LINEA_MAINNET="linea_mainnet",t.LINEA_SEPOLIA="linea_sepolia",t.BAHAMUT_MAINNET="bahamut_mainnet",t.SCROLL_MAINNET="scroll_mainnet",t.SCROLL_SEPOLIA="scroll_sepolia",t.TRON_MAINNET="tron_mainnet",t.SYSCOIN_MAINNET="syscoin_mainnet",t.SYSCOIN_TANENBAUM="syscoin_tanenbaum",t.MOONRIVER_MAINNET="moonriver_mainnet",t.HAQQ_MAINNET="haqq_mainnet",t.EVMOS_MAINNET="evmos_mainnet",t.EVMOS_TESTNET="evmos_testnet",t.BERACHAIN_TESTNET="berachain_testnet"})(Z||(Z={}));const jO=1300;class qO extends ie{constructor(e){super("You've reach the rate limit of free RPC calls from our Partner Quick Nodes. There are two options you can either create a paid Quick Nodes account and get 20% off for 2 months using WEB3JS referral code, or use Free public RPC endpoint.",e),this.code=jO}}const HO=1301;class Rm extends ie{constructor(e){super(`Invalid provider config options given for ${e}`),this.code=HO}}var zO=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};class y1 extends Wf{constructor(e,n,r,i,s){if(super(),s!==void 0&&n===Vn.HTTPS&&!("providerOptions"in s))throw new Rm("HTTP Provider");if(s!==void 0&&n===Vn.WebSocket&&!("socketOptions"in s||"reconnectOptions"in s))throw new Rm("Websocket Provider");this.transport=n,n===Vn.HTTPS?this.provider=new ll(this.getRPCURL(e,n,r,i),s):n===Vn.WebSocket&&(this.provider=new Bw(this.getRPCURL(e,n,r,i),s?.socketOptions,s?.reconnectOptions))}request(e,n){return zO(this,void 0,void 0,function*(){return this.transport===Vn.HTTPS?yield this.provider.request(e,n):this.provider.request(e)})}getStatus(){return this.provider.getStatus()}supportsSubscriptions(){return this.provider.supportsSubscriptions()}once(e,n){var r;!((r=this.provider)===null||r===void 0)&&r.once&&this.provider.once(e,n)}removeAllListeners(e){var n;!((n=this.provider)===null||n===void 0)&&n.removeAllListeners&&this.provider.removeAllListeners(e)}connect(){var e;!((e=this.provider)===null||e===void 0)&&e.connect&&this.provider.connect()}disconnect(e,n){var r;!((r=this.provider)===null||r===void 0)&&r.disconnect&&this.provider.disconnect(e,n)}reset(){var e;!((e=this.provider)===null||e===void 0)&&e.reset&&this.provider.reset()}on(e,n){this.provider&&this.provider.on(e,n)}removeListener(e,n){this.provider&&this.provider.removeListener(e,n)}}var GO=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const et=t=>t!==void 0&&t.trim().length>0;class VO extends y1{constructor(e=Z.ETH_MAINNET,n=Vn.HTTPS,r="",i="",s){super(e,n,r,i,s)}request(e,n){const r=Object.create(null,{request:{get:()=>super.request}});return GO(this,void 0,void 0,function*(){try{return yield r.request.call(this,e,n)}catch(i){throw i instanceof zn&&i.statusCode===429?new qO(i):i}})}getRPCURL(e,n,r,i){let s="",o="";switch(e){case Z.ETH_MAINNET:s=et(i)?i:"powerful-holy-bush.quiknode.pro",o=et(r)?r:"3240624a343867035925ff7561eb60dfdba2a668";break;case Z.ETH_SEPOLIA:s=et(i)?i:"dimensional-fabled-glitter.ethereum-sepolia.quiknode.pro",o=et(r)?r:"382a3b5a4b938f2d6e8686c19af4b22921fde2cd";break;case Z.ETH_HOLESKY:s=et(i)?i:"yolo-morning-card.ethereum-holesky.quiknode.pro",o=et(r)?r:"481ebe70638c4dcf176af617a16d02ab866b9af9";break;case Z.ARBITRUM_MAINNET:s=et(i)?i:"autumn-divine-dinghy.arbitrum-mainnet.quiknode.pro",o=et(r)?r:"a5d7bfbf60b5ae9ce3628e53d69ef50d529e9a8c";break;case Z.ARBITRUM_SEPOLIA:s=et(i)?i:"few-patient-pond.arbitrum-sepolia.quiknode.pro",o=et(r)?r:"3be985450970628c860b959c65cd2642dcafe53c";break;case Z.BNB_MAINNET:s=et(i)?i:"purple-empty-reel.bsc.quiknode.pro",o=et(r)?r:"ebf6c532961e21f092ff2facce1ec4c89c540158";break;case Z.BNB_TESTNET:s=et(i)?i:"floral-rough-scion.bsc-testnet.quiknode.pro",o=et(r)?r:"5b297e5acff5f81f4c37ebf6f235f7299b6f9d28";break;case Z.POLYGON_MAINNET:s=et(i)?i:"small-chaotic-moon.matic.quiknode.pro",o=et(r)?r:"847569f8a017e84d985e10d0f44365d965a951f1";break;case Z.POLYGON_AMOY:s=et(i)?i:"prettiest-side-shape.matic-amoy.quiknode.pro",o=et(r)?r:"79a9476eea661d4f82de614db1d8a895b14b881c";break;default:throw new Error("Network info not avalible.")}return`${n}://${s}/${o}`}}const KO=t=>t!==void 0&&t.trim().length>0,WO=[Z.DYMENSION_MAINNET,Z.DYMENSION_TESTNET,Z.KAVA_MAINNET,Z.CRONOS_MAINNET,Z.POLYGON_MAINNET];class ku extends y1{constructor(e=Z.ETH_MAINNET,n=Vn.HTTPS,r="",i){super(e,n,"",r,i)}getRPCURL(e,n,r,i){if(!ku.networkHostMap[e])throw new Error("Network info not avalible.");const s=`${ku.networkHostMap[e]}.publicnode.com`,o=KO(i)?i:s;return WO.includes(e)&&n===Vn.WebSocket?`${n}://${o}/websocket`:`${n}://${o}`}}ku.networkHostMap={[Z.POLYGON_AMOY]:"polygon-amoy-bor-rpc",[Z.DYMENSION_MAINNET]:"dymension-evm-rpc",[Z.DYMENSION_TESTNET]:"dymension-testnet-evm-rpc",[Z.BLAST_MAINNET]:"blast-rpc",[Z.GNOSIS_MAINNET]:"gnosis-rpc",[Z.PULSECHAIN_MAINNET]:"pulsechain-rpc",[Z.PULSECHAIN_TESTNET]:"pulsechain-testnet-rpc",[Z.KAVA_MAINNET]:"kava-evm-rpc",[Z.CRONOS_MAINNET]:"cronos-evm-rpc",[Z.MANTLE_MAINNET]:"mantle-rpc",[Z.TAIKO_MAINNET]:"taiko-rpc",[Z.TAIKO_HEKLA]:"taiko-hekla-rpc",[Z.LINEA_MAINNET]:"linea-rpc",[Z.LINEA_SEPOLIA]:"linea-sepolia-rpc",[Z.SCROLL_MAINNET]:"scroll-rpc",[Z.SCROLL_SEPOLIA]:"scroll-sepolia-rpc",[Z.SYSCOIN_MAINNET]:"syscoin-evm-rpc",[Z.SYSCOIN_TANENBAUM]:"syscoin-tanenbaum-evm-rpc",[Z.HAQQ_MAINNET]:"haqq-evm-rpc",[Z.EVMOS_MAINNET]:"evmos-evm-rpc",[Z.EVMOS_TESTNET]:"evmos-testnet-evm-rpc",[Z.BERACHAIN_TESTNET]:"berachain-testnet-evm-rpc",[Z.ETH_MAINNET]:"ethereum-rpc",[Z.ETH_SEPOLIA]:"ethereum-sepolia-rpc",[Z.ETH_HOLESKY]:"ethereum-holesky-rpc",[Z.BSC_MAINNET]:"bsc-rpc",[Z.BSC_TESTNET]:"bsc-testnet-rpc",[Z.POLYGON_MAINNET]:"polygon-bor-rpc",[Z.BASE_MAINNET]:"base-rpc",[Z.BASE_SEPOLIA]:"base-sepolia-rpc",[Z.ARBITRUM_ONE]:"arbitrum-one-rpc",[Z.ARBITRUM_NOVA]:"arbitrum-nova-rpc",[Z.ARBITRUM_SEPOLIA]:"arbitrum-sepolia-rpc",[Z.AVALANCHE_C_MAINNET]:"avalanche-c-chain-rpc",[Z.AVALANCHE_P_MAINNET]:"avalanche-p-chain-rpc",[Z.AVALANCHE_X_MAINNET]:"avalanche-x-chain-rpc",[Z.AVALANCHE_FUJI_C]:"avalanche-fuji-c-chain-rpc",[Z.AVALANCHE_FUJI_P]:"avalanche-fuji-p-chain-rpc",[Z.AVALANCHE_FUJI_X]:"avalanche-fuji-x-chain-rpc",[Z.OPTIMISM_MAINNET]:"optimism-rpc",[Z.OPTIMISM_SEPOLIA]:"optimism-sepolia-rpc",[Z.FANTOM_MAINNET]:"fantom-rpc",[Z.FANTOM_TESTNET]:"fantom-testnet-rpc",[Z.OPBNB_MAINNET]:"opbnb-rpc",[Z.OPBNB_TESTNET]:"opbnb-testnet-rpc",[Z.GNOSIS_CHIADO]:"gnosis-chiado-rpc",[Z.CHILIZ_MAINNET]:"chiliz-rpc",[Z.CHILIZ_SPICY]:"chiliz-spicy-rpc",[Z.MOONBEAM_MAINNET]:"moonbeam-rpc",[Z.BAHAMUT_MAINNET]:"bahamut-rpc",[Z.TRON_MAINNET]:"tron-evm-rpc",[Z.MOONRIVER_MAINNET]:"moonriver-rpc"};const QO=new VO,ZO={encodeEventSignature:pp,encodeFunctionCall:WP,encodeFunctionSignature:ya,encodeParameter:xh,encodeParameters:bl,decodeParameter:Lv,decodeParameters:Ni,decodeLog:$v};var mo=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})};const JO=t=>{const e=(o,a)=>mo(void 0,void 0,void 0,function*(){const u=yield Nk(o,t),l=F({format:"bytes"},a,oe);return CR(u,l)}),n=o=>{const a=op(o);return Object.assign(Object.assign({},a),{signTransaction:u=>mo(void 0,void 0,void 0,function*(){return e(u,a.privateKey)})})},r=(o,a,u)=>mo(void 0,void 0,void 0,function*(){var l;const c=yield LR(o,a,(l=u?.nonStrict)!==null&&l!==void 0?l:!0);return Object.assign(Object.assign({},c),{signTransaction:d=>mo(void 0,void 0,void 0,function*(){return e(d,c.privateKey)})})}),i=()=>{const o=MR();return Object.assign(Object.assign({},o),{signTransaction:a=>mo(void 0,void 0,void 0,function*(){return e(a,o.privateKey)})})},s=new yu({create:i,privateKeyToAccount:n,decrypt:r});return{signTransaction:e,create:i,privateKeyToAccount:n,decrypt:r,recoverTransaction:DR,hashMessage:sp,sign:nv,recover:gh,encrypt:rv,wallet:s,privateKeyToAddress:pl,parseAndValidatePrivateKey:Xs,privateKeyToPublicKey:NR}},YO={version:"4.16.0"};var XO=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})},Ou;(function(t){t.eip6963announceProvider="eip6963:announceProvider",t.eip6963requestProvider="eip6963:requestProvider"})(Ou||(Ou={}));const od=new Map,b1="web3:providersMapUpdated",eC=()=>XO(void 0,void 0,void 0,function*(){return new Promise((t,e)=>{typeof window>"u"&&e(new Error("window object not available, EIP-6963 is intended to be used within a browser")),window.addEventListener(Ou.eip6963announceProvider,n=>{od.set(n.detail.info.uuid,n.detail);const r=new CustomEvent(b1,{detail:od});window.dispatchEvent(r),t(od)}),window.dispatchEvent(new Event(Ou.eip6963requestProvider))})}),tC=t=>{if(typeof window>"u")throw new Error("window object not available, EIP-6963 is intended to be used within a browser");window.addEventListener(b1,t)};class ro extends qt{constructor(e=QO){var n;(te(e)||typeof e=="string"&&e.trim()===""||typeof e!="string"&&!gu(e)&&!e.provider)&&console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let r={};typeof e=="string"||gu(e)?r.provider=e:e?r=e:r={},r.registeredSubscriptions=Object.assign(Object.assign({},Sh),(n=r.registeredSubscriptions)!==null&&n!==void 0?n:{}),super(r);const i=JO(this);this._wallet=i.wallet,this._accountProvider=i,this.utils=Rw;const s=this;class o extends Mi{constructor(l,c,d,h,g){if(Kr(c)&&Kr(d))throw new vg("Should not provide options at both 2nd and 3rd parameters");let f,p={},m,y;if(!te(c)&&typeof c!="object"&&typeof c!="string")throw new vg;if(typeof c=="string"&&(f=c),Kr(c)?p=c:Kr(d)?p=d:p={},c instanceof qt?m=c:d instanceof qt?m=d:h instanceof qt?m=h:m=s.getContextObject(),g?y=g:mr(d)?y=d:mr(h)&&(y=h),super(l,f,p,m,y),super.subscribeToContextEvents(s),!te(a)){const w=a.getTransactionMiddleware();te(w)||super.setTransactionMiddleware(w)}}}const a=s.use(wl);this.eth=Object.assign(a,{ens:s.use(g1,Iu.main),Iban:Ve,net:s.use(dv),personal:s.use(m1),Contract:o,abi:ZO,accounts:i})}}ro.version=YO.version;ro.utils=Rw;ro.requestEIP6963Providers=eC;ro.onNewProviderDiscovered=tC;ro.modules={Web3Eth:wl,Iban:Ve,Net:dv,ENS:g1,Personal:m1};var ic={exports:{}},Bm;function nC(){if(Bm)return ic.exports;Bm=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(E,_,R){return Function.prototype.apply.call(E,_,R)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:n=function(E){return Object.getOwnPropertyNames(E)};function r(A){console&&console.warn&&console.warn(A)}var i=Number.isNaN||function(E){return E!==E};function s(){s.init.call(this)}ic.exports=s,ic.exports.once=y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");o=A}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function u(A){return A._maxListeners===void 0?s.defaultMaxListeners:A._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(E){for(var _=[],R=1;R<arguments.length;R++)_.push(arguments[R]);var x=E==="error",S=this._events;if(S!==void 0)x=x&&S.error===void 0;else if(!x)return!1;if(x){var T;if(_.length>0&&(T=_[0]),T instanceof Error)throw T;var B=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw B.context=T,B}var k=S[E];if(k===void 0)return!1;if(typeof k=="function")e(k,this,_);else for(var N=k.length,M=f(k,N),R=0;R<N;++R)e(M[R],this,_);return!0};function l(A,E,_,R){var x,S,T;if(a(_),S=A._events,S===void 0?(S=A._events=Object.create(null),A._eventsCount=0):(S.newListener!==void 0&&(A.emit("newListener",E,_.listener?_.listener:_),S=A._events),T=S[E]),T===void 0)T=S[E]=_,++A._eventsCount;else if(typeof T=="function"?T=S[E]=R?[_,T]:[T,_]:R?T.unshift(_):T.push(_),x=u(A),x>0&&T.length>x&&!T.warned){T.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=A,B.type=E,B.count=T.length,r(B)}return A}s.prototype.addListener=function(E,_){return l(this,E,_,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(E,_){return l(this,E,_,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(A,E,_){var R={fired:!1,wrapFn:void 0,target:A,type:E,listener:_},x=c.bind(R);return x.listener=_,R.wrapFn=x,x}s.prototype.once=function(E,_){return a(_),this.on(E,d(this,E,_)),this},s.prototype.prependOnceListener=function(E,_){return a(_),this.prependListener(E,d(this,E,_)),this},s.prototype.removeListener=function(E,_){var R,x,S,T,B;if(a(_),x=this._events,x===void 0)return this;if(R=x[E],R===void 0)return this;if(R===_||R.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete x[E],x.removeListener&&this.emit("removeListener",E,R.listener||_));else if(typeof R!="function"){for(S=-1,T=R.length-1;T>=0;T--)if(R[T]===_||R[T].listener===_){B=R[T].listener,S=T;break}if(S<0)return this;S===0?R.shift():p(R,S),R.length===1&&(x[E]=R[0]),x.removeListener!==void 0&&this.emit("removeListener",E,B||_)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(E){var _,R,x;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[E]),this;if(arguments.length===0){var S=Object.keys(R),T;for(x=0;x<S.length;++x)T=S[x],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=R[E],typeof _=="function")this.removeListener(E,_);else if(_!==void 0)for(x=_.length-1;x>=0;x--)this.removeListener(E,_[x]);return this};function h(A,E,_){var R=A._events;if(R===void 0)return[];var x=R[E];return x===void 0?[]:typeof x=="function"?_?[x.listener||x]:[x]:_?m(x):f(x,x.length)}s.prototype.listeners=function(E){return h(this,E,!0)},s.prototype.rawListeners=function(E){return h(this,E,!1)},s.listenerCount=function(A,E){return typeof A.listenerCount=="function"?A.listenerCount(E):g.call(A,E)},s.prototype.listenerCount=g;function g(A){var E=this._events;if(E!==void 0){var _=E[A];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function f(A,E){for(var _=new Array(E),R=0;R<E;++R)_[R]=A[R];return _}function p(A,E){for(;E+1<A.length;E++)A[E]=A[E+1];A.pop()}function m(A){for(var E=new Array(A.length),_=0;_<E.length;++_)E[_]=A[_].listener||A[_];return E}function y(A,E){return new Promise(function(_,R){function x(T){A.removeListener(E,S),R(T)}function S(){typeof A.removeListener=="function"&&A.removeListener("error",x),_([].slice.call(arguments))}b(A,E,S,{once:!0}),E!=="error"&&w(A,x,{once:!0})})}function w(A,E,_){typeof A.on=="function"&&b(A,"error",E,_)}function b(A,E,_,R){if(typeof A.on=="function")R.once?A.once(E,_):A.on(E,_);else if(typeof A.addEventListener=="function")A.addEventListener(E,function x(S){R.once&&A.removeEventListener(E,x),_(S)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return ic.exports}var On=nC();const w1=Na(On);var ad={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ch=function(t,e){return Ch=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ch(t,e)};function rC(t,e){Ch(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Dh=function(){return Dh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dh.apply(this,arguments)};function iC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function sC(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function oC(t,e){return function(n,r){e(n,r,t)}}function aC(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function cC(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function uC(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function lC(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function dC(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Nh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v1(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function hC(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v1(arguments[e]));return t}function fC(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Aa(t){return this instanceof Aa?(this.v=t,this):new Aa(t)}function pC(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(g){return new Promise(function(f,p){s.push([h,g,f,p])>1||a(h,g)})})}function a(h,g){try{u(r[h](g))}catch(f){d(s[0][3],f)}}function u(h){h.value instanceof Aa?Promise.resolve(h.value.v).then(l,c):d(s[0][2],h)}function l(h){a("next",h)}function c(h){a("throw",h)}function d(h,g){h(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function gC(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Aa(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function mC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Nh=="function"?Nh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}function yC(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function bC(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function wC(t){return t&&t.__esModule?t:{default:t}}function vC(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function EC(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const _C=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Dh},__asyncDelegator:gC,__asyncGenerator:pC,__asyncValues:mC,__await:Aa,__awaiter:cC,__classPrivateFieldGet:vC,__classPrivateFieldSet:EC,__createBinding:lC,__decorate:sC,__exportStar:dC,__extends:rC,__generator:uC,__importDefault:wC,__importStar:bC,__makeTemplateObject:yC,__metadata:aC,__param:oC,__read:v1,__rest:iC,__spread:hC,__spreadArrays:fC,__values:Nh},Symbol.toStringTag,{value:"Module"})),ja=QS(_C);var cd={},yo={},Pm;function AC(){if(Pm)return yo;Pm=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return yo.delay=t,yo}var di={},ud={},hi={},km;function xC(){return km||(km=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.ONE_THOUSAND=hi.ONE_HUNDRED=void 0,hi.ONE_HUNDRED=100,hi.ONE_THOUSAND=1e3),hi}var ld={},Om;function IC(){return Om||(Om=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(ld)),ld}var Cm;function E1(){return Cm||(Cm=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ja;e.__exportStar(xC(),t),e.__exportStar(IC(),t)}(ud)),ud}var Dm;function SC(){if(Dm)return di;Dm=1,Object.defineProperty(di,"__esModule",{value:!0}),di.fromMiliseconds=di.toMiliseconds=void 0;const t=E1();function e(r){return r*t.ONE_THOUSAND}di.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return di.fromMiliseconds=n,di}var Nm;function TC(){return Nm||(Nm=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ja;e.__exportStar(AC(),t),e.__exportStar(SC(),t)}(cd)),cd}var us={},Mm;function RC(){if(Mm)return us;Mm=1,Object.defineProperty(us,"__esModule",{value:!0}),us.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return us.Watch=t,us.default=t,us}var dd={},bo={},Lm;function BC(){if(Lm)return bo;Lm=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.IWatch=void 0;class t{}return bo.IWatch=t,bo}var $m;function PC(){return $m||($m=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),ja.__exportStar(BC(),t)}(dd)),dd}var Um;function kC(){return Um||(Um=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ja;e.__exportStar(TC(),t),e.__exportStar(RC(),t),e.__exportStar(PC(),t),e.__exportStar(E1(),t)}(ad)),ad}var G=kC();class es{}let OC=class extends es{constructor(e){super()}};const Fm=G.FIVE_SECONDS,ts={pulse:"heartbeat_pulse"};let CC=class _1 extends OC{constructor(e){super(e),this.events=new On.EventEmitter,this.interval=Fm,this.interval=e?.interval||Fm}static async init(e){const n=new _1(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),G.toMiliseconds(this.interval))}pulse(){this.events.emit(ts.pulse)}};const DC=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,NC=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,MC=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function LC(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){$C(t);return}return e}function $C(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function sc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!MC.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(DC.test(t)||NC.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,LC)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function UC(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function rt(t,...e){try{return UC(t(...e))}catch(n){return Promise.reject(n)}}function FC(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function jC(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Bc(t){if(FC(t))return String(t);if(jC(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Bc(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Mh="base64:";function qC(t){return typeof t=="string"?t:Mh+GC(t)}function HC(t){return typeof t!="string"||!t.startsWith(Mh)?t:zC(t.slice(Mh.length))}function zC(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function GC(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Dt(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function VC(...t){return Dt(t.join(":"))}function oc(t){return t=Dt(t),t?t+":":""}function KC(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function WC(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const QC="memory",ZC=()=>{const t=new Map;return{name:QC,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function JC(t={}){const e={mounts:{"":t.driver||ZC()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const c of e.mountpoints)if(l.startsWith(c))return{base:c,relativeKey:l.slice(c.length),driver:e.mounts[c]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,c)=>e.mountpoints.filter(d=>d.startsWith(l)||c&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),i=(l,c)=>{if(e.watching){c=Dt(c);for(const d of e.watchListeners)d(l,c)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await jm(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,c,d)=>{const h=new Map,g=f=>{let p=h.get(f.base);return p||(p={driver:f.driver,base:f.base,items:[]},h.set(f.base,p)),p};for(const f of l){const p=typeof f=="string",m=Dt(p?f:f.key),y=p?void 0:f.value,w=p||!f.options?c:{...c,...f.options},b=n(m);g(b).items.push({key:m,value:y,relativeKey:b.relativeKey,options:w})}return Promise.all([...h.values()].map(f=>d(f))).then(f=>f.flat())},u={hasItem(l,c={}){l=Dt(l);const{relativeKey:d,driver:h}=n(l);return rt(h.hasItem,d,c)},getItem(l,c={}){l=Dt(l);const{relativeKey:d,driver:h}=n(l);return rt(h.getItem,d,c).then(g=>sc(g))},getItems(l,c={}){return a(l,c,d=>d.driver.getItems?rt(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),c).then(h=>h.map(g=>({key:VC(d.base,g.key),value:sc(g.value)}))):Promise.all(d.items.map(h=>rt(d.driver.getItem,h.relativeKey,h.options).then(g=>({key:h.key,value:sc(g)})))))},getItemRaw(l,c={}){l=Dt(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?rt(h.getItemRaw,d,c):rt(h.getItem,d,c).then(g=>HC(g))},async setItem(l,c,d={}){if(c===void 0)return u.removeItem(l);l=Dt(l);const{relativeKey:h,driver:g}=n(l);g.setItem&&(await rt(g.setItem,h,Bc(c),d),g.watch||i("update",l))},async setItems(l,c){await a(l,c,async d=>{if(d.driver.setItems)return rt(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Bc(h.value),options:h.options})),c);d.driver.setItem&&await Promise.all(d.items.map(h=>rt(d.driver.setItem,h.relativeKey,Bc(h.value),h.options)))})},async setItemRaw(l,c,d={}){if(c===void 0)return u.removeItem(l,d);l=Dt(l);const{relativeKey:h,driver:g}=n(l);if(g.setItemRaw)await rt(g.setItemRaw,h,c,d);else if(g.setItem)await rt(g.setItem,h,qC(c),d);else return;g.watch||i("update",l)},async removeItem(l,c={}){typeof c=="boolean"&&(c={removeMeta:c}),l=Dt(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await rt(h.removeItem,d,c),(c.removeMeta||c.removeMata)&&await rt(h.removeItem,d+"$",c),h.watch||i("remove",l))},async getMeta(l,c={}){typeof c=="boolean"&&(c={nativeOnly:c}),l=Dt(l);const{relativeKey:d,driver:h}=n(l),g=Object.create(null);if(h.getMeta&&Object.assign(g,await rt(h.getMeta,d,c)),!c.nativeOnly){const f=await rt(h.getItem,d+"$",c).then(p=>sc(p));f&&typeof f=="object"&&(typeof f.atime=="string"&&(f.atime=new Date(f.atime)),typeof f.mtime=="string"&&(f.mtime=new Date(f.mtime)),Object.assign(g,f))}return g},setMeta(l,c,d={}){return this.setItem(l+"$",c,d)},removeMeta(l,c={}){return this.removeItem(l+"$",c)},async getKeys(l,c={}){l=oc(l);const d=r(l,!0);let h=[];const g=[];let f=!0;for(const m of d){m.driver.flags?.maxDepth||(f=!1);const y=await rt(m.driver.getKeys,m.relativeBase,c);for(const w of y){const b=m.mountpoint+Dt(w);h.some(A=>b.startsWith(A))||g.push(b)}h=[m.mountpoint,...h.filter(w=>!w.startsWith(m.mountpoint))]}const p=c.maxDepth!==void 0&&!f;return g.filter(m=>(!p||KC(m,c.maxDepth))&&WC(m,l))},async clear(l,c={}){l=oc(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return rt(d.driver.clear,d.relativeBase,c);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",c);return Promise.all(h.map(g=>d.driver.removeItem(g,c)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>qm(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(c=>c!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,c){if(l=oc(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=c,e.watching&&Promise.resolve(jm(c,i,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),u},async unmount(l,c=!0){l=oc(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),c&&await qm(e.mounts[l]),e.mountpoints=e.mountpoints.filter(d=>d!==l),delete e.mounts[l])},getMount(l=""){l=Dt(l)+":";const c=n(l);return{driver:c.driver,base:c.base}},getMounts(l="",c={}){return l=Dt(l),r(l,c.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,c={})=>u.getKeys(l,c),get:(l,c={})=>u.getItem(l,c),set:(l,c,d={})=>u.setItem(l,c,d),has:(l,c={})=>u.hasItem(l,c),del:(l,c={})=>u.removeItem(l,c),remove:(l,c={})=>u.removeItem(l,c)};return u}function jm(t,e,n){return t.watch?t.watch((r,i)=>e(r,n+i)):()=>{}}async function qm(t){typeof t.dispose=="function"&&await rt(t.dispose)}function ns(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function A1(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=ns(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let hd;function qa(){return hd||(hd=A1("keyval-store","keyval")),hd}function Hm(t,e=qa()){return e("readonly",n=>ns(n.get(t)))}function YC(t,e,n=qa()){return n("readwrite",r=>(r.put(e,t),ns(r.transaction)))}function XC(t,e=qa()){return e("readwrite",n=>(n.delete(t),ns(n.transaction)))}function eD(t=qa()){return t("readwrite",e=>(e.clear(),ns(e.transaction)))}function tD(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ns(t.transaction)}function nD(t=qa()){return t("readonly",e=>{if(e.getAllKeys)return ns(e.getAllKeys());const n=[];return tD(e,r=>n.push(r.key)).then(()=>n)})}const rD=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),iD=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ks(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return iD(t)}catch{return t}}function Wi(t){return typeof t=="string"?t:rD(t)||""}const sD="idb-keyval";var oD=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=i=>e+i;let r;return t.dbName&&t.storeName&&(r=A1(t.dbName,t.storeName)),{name:sD,options:t,async hasItem(i){return!(typeof await Hm(n(i),r)>"u")},async getItem(i){return await Hm(n(i),r)??null},setItem(i,s){return YC(n(i),s,r)},removeItem(i){return XC(n(i),r)},getKeys(){return nD(r)},clear(){return eD(r)}}};const aD="WALLET_CONNECT_V2_INDEXED_DB",cD="keyvaluestorage";let uD=class{constructor(){this.indexedDb=JC({driver:oD({dbName:aD,storeName:cD})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Wi(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pc={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof fd<"u"&&fd.localStorage?Pc.exports=fd.localStorage:typeof window<"u"&&window.localStorage?Pc.exports=window.localStorage:Pc.exports=new e})();function lD(t){var e;return[t[0],Ks((e=t[1])!=null?e:"")]}let dD=class{constructor(){this.localStorage=Pc.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(lD)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Ks(n)}async setItem(e,n){this.localStorage.setItem(e,Wi(n))}async removeItem(e){this.localStorage.removeItem(e)}};const hD="wc_storage_version",zm=1,fD=async(t,e,n)=>{const r=hD,i=await e.getItem(r);if(i&&i>=zm){n(e);return}const s=await t.getKeys();if(!s.length){n(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const u=a.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,zm),n(e),pD(t,o)},pD=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let gD=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new dD;this.storage=e;try{const n=new uD;fD(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var pd,Gm;function mD(){if(Gm)return pd;Gm=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}pd=e;function e(n,r,i){var s=i&&i.stringify||t,o=1;if(typeof n=="object"&&n!==null){var a=r.length+o;if(a===1)return n;var u=new Array(a);u[0]=s(n);for(var l=1;l<a;l++)u[l]=s(r[l]);return u.join(" ")}if(typeof n!="string")return n;var c=r.length;if(c===0)return n;for(var d="",h=1-o,g=-1,f=n&&n.length||0,p=0;p<f;){if(n.charCodeAt(p)===37&&p+1<f){switch(g=g>-1?g:0,n.charCodeAt(p+1)){case 100:case 102:if(h>=c||r[h]==null)break;g<p&&(d+=n.slice(g,p)),d+=Number(r[h]),g=p+2,p++;break;case 105:if(h>=c||r[h]==null)break;g<p&&(d+=n.slice(g,p)),d+=Math.floor(Number(r[h])),g=p+2,p++;break;case 79:case 111:case 106:if(h>=c||r[h]===void 0)break;g<p&&(d+=n.slice(g,p));var m=typeof r[h];if(m==="string"){d+="'"+r[h]+"'",g=p+2,p++;break}if(m==="function"){d+=r[h].name||"<anonymous>",g=p+2,p++;break}d+=s(r[h]),g=p+2,p++;break;case 115:if(h>=c)break;g<p&&(d+=n.slice(g,p)),d+=String(r[h]),g=p+2,p++;break;case 37:g<p&&(d+=n.slice(g,p)),d+="%",g=p+2,p++,h--;break}++h}++p}return g===-1?n:(g<f&&(d+=n.slice(g)),d)}return pd}var gd,Vm;function yD(){if(Vm)return gd;Vm=1;const t=mD();gd=i;const e=E().console||{},n={mapHttpRequest:f,mapHttpResponse:f,wrapRequestSerializer:p,wrapResponseSerializer:p,wrapErrorSerializer:p,req:f,res:f,err:h};function r(_,R){return Array.isArray(_)?_.filter(function(S){return S!=="!stdSerializers.err"}):_===!0?Object.keys(R):!1}function i(_){_=_||{},_.browser=_.browser||{};const R=_.browser.transmit;if(R&&typeof R.send!="function")throw Error("pino: transmit option must have a send function");const x=_.browser.write||e;_.browser.write&&(_.browser.asObject=!0);const S=_.serializers||{},T=r(_.browser.serialize,S);let B=_.browser.serialize;Array.isArray(_.browser.serialize)&&_.browser.serialize.indexOf("!stdSerializers.err")>-1&&(B=!1);const k=["error","fatal","warn","info","debug","trace"];typeof x=="function"&&(x.error=x.fatal=x.warn=x.info=x.debug=x.trace=x),_.enabled===!1&&(_.level="silent");const N=_.level||"info",M=Object.create(x);M.log||(M.log=m),Object.defineProperty(M,"levelVal",{get:I}),Object.defineProperty(M,"level",{get:P,set:C});const v={transmit:R,serialize:T,asObject:_.browser.asObject,levels:k,timestamp:g(_)};M.levels=i.levels,M.level=N,M.setMaxListeners=M.getMaxListeners=M.emit=M.addListener=M.on=M.prependListener=M.once=M.prependOnceListener=M.removeListener=M.removeAllListeners=M.listeners=M.listenerCount=M.eventNames=M.write=M.flush=m,M.serializers=S,M._serialize=T,M._stdErrSerialize=B,M.child=O,R&&(M._logEvent=d());function I(){return this.level==="silent"?1/0:this.levels.values[this.level]}function P(){return this._level}function C(D){if(D!=="silent"&&!this.levels.values[D])throw Error("unknown level "+D);this._level=D,s(v,M,"error","log"),s(v,M,"fatal","error"),s(v,M,"warn","error"),s(v,M,"info","log"),s(v,M,"debug","log"),s(v,M,"trace","log")}function O(D,$){if(!D)throw new Error("missing bindings for child Pino");$=$||{},T&&D.serializers&&($.serializers=D.serializers);const q=$.serializers;if(T&&q){var V=Object.assign({},S,q),H=_.browser.serialize===!0?Object.keys(V):T;delete D.serializers,u([D],H,V,this._stdErrSerialize)}function W(X){this._childLevel=(X._childLevel|0)+1,this.error=l(X,D,"error"),this.fatal=l(X,D,"fatal"),this.warn=l(X,D,"warn"),this.info=l(X,D,"info"),this.debug=l(X,D,"debug"),this.trace=l(X,D,"trace"),V&&(this.serializers=V,this._serialize=H),R&&(this._logEvent=d([].concat(X._logEvent.bindings,D)))}return W.prototype=this,new W(this)}return M}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=n,i.stdTimeFunctions=Object.assign({},{nullTime:y,epochTime:w,unixTime:b,isoTime:A});function s(_,R,x,S){const T=Object.getPrototypeOf(R);R[x]=R.levelVal>R.levels.values[x]?m:T[x]?T[x]:e[x]||e[S]||m,o(_,R,x)}function o(_,R,x){!_.transmit&&R[x]===m||(R[x]=function(S){return function(){const B=_.timestamp(),k=new Array(arguments.length),N=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var M=0;M<k.length;M++)k[M]=arguments[M];if(_.serialize&&!_.asObject&&u(k,this._serialize,this.serializers,this._stdErrSerialize),_.asObject?S.call(N,a(this,x,k,B)):S.apply(N,k),_.transmit){const v=_.transmit.level||R.level,I=i.levels.values[v],P=i.levels.values[x];if(P<I)return;c(this,{ts:B,methodLevel:x,methodValue:P,transmitValue:i.levels.values[_.transmit.level||R.level],send:_.transmit.send,val:R.levelVal},k)}}}(R[x]))}function a(_,R,x,S){_._serialize&&u(x,_._serialize,_.serializers,_._stdErrSerialize);const T=x.slice();let B=T[0];const k={};S&&(k.time=S),k.level=i.levels.values[R];let N=(_._childLevel|0)+1;if(N<1&&(N=1),B!==null&&typeof B=="object"){for(;N--&&typeof T[0]=="object";)Object.assign(k,T.shift());B=T.length?t(T.shift(),T):void 0}else typeof B=="string"&&(B=t(T.shift(),T));return B!==void 0&&(k.msg=B),k}function u(_,R,x,S){for(const T in _)if(S&&_[T]instanceof Error)_[T]=i.stdSerializers.err(_[T]);else if(typeof _[T]=="object"&&!Array.isArray(_[T]))for(const B in _[T])R&&R.indexOf(B)>-1&&B in x&&(_[T][B]=x[B](_[T][B]))}function l(_,R,x){return function(){const S=new Array(1+arguments.length);S[0]=R;for(var T=1;T<S.length;T++)S[T]=arguments[T-1];return _[x].apply(this,S)}}function c(_,R,x){const S=R.send,T=R.ts,B=R.methodLevel,k=R.methodValue,N=R.val,M=_._logEvent.bindings;u(x,_._serialize||Object.keys(_.serializers),_.serializers,_._stdErrSerialize===void 0?!0:_._stdErrSerialize),_._logEvent.ts=T,_._logEvent.messages=x.filter(function(v){return M.indexOf(v)===-1}),_._logEvent.level.label=B,_._logEvent.level.value=k,S(B,_._logEvent,N),_._logEvent=d(M)}function d(_){return{ts:0,messages:[],bindings:_||[],level:{label:"",value:0}}}function h(_){const R={type:_.constructor.name,msg:_.message,stack:_.stack};for(const x in _)R[x]===void 0&&(R[x]=_[x]);return R}function g(_){return typeof _.timestamp=="function"?_.timestamp:_.timestamp===!1?y:w}function f(){return{}}function p(_){return _}function m(){}function y(){return!1}function w(){return Date.now()}function b(){return Math.round(Date.now()/1e3)}function A(){return new Date(Date.now()).toISOString()}function E(){function _(R){return typeof R<"u"&&R}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return _(self)||_(window)||_(this)||{}}}return gd}var vs=yD();const _l=Na(vs),bD={level:"info"},Ha="custom_context",Sp=1e3*1024;let wD=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Km=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new wD(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},x1=class{constructor(e,n=Sp){this.level=e??"error",this.levelValue=vs.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Km(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===vs.levels.values.error?console.error(e):n===vs.levels.values.warn?console.warn(e):n===vs.levels.values.debug?console.debug(e):n===vs.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Wi({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Km(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Wi({extraMetadata:e})),new Blob(n,{type:"application/json"})}},vD=class{constructor(e,n=Sp){this.baseChunkLogger=new x1(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},ED=class{constructor(e,n=Sp){this.baseChunkLogger=new x1(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var _D=Object.defineProperty,AD=Object.defineProperties,xD=Object.getOwnPropertyDescriptors,Wm=Object.getOwnPropertySymbols,ID=Object.prototype.hasOwnProperty,SD=Object.prototype.propertyIsEnumerable,Qm=(t,e,n)=>e in t?_D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cu=(t,e)=>{for(var n in e||(e={}))ID.call(e,n)&&Qm(t,n,e[n]);if(Wm)for(var n of Wm(e))SD.call(e,n)&&Qm(t,n,e[n]);return t},Du=(t,e)=>AD(t,xD(e));function Tp(t){return Du(Cu({},t),{level:t?.level||bD.level})}function TD(t,e=Ha){return t[e]||""}function RD(t,e,n=Ha){return t[n]=e,t}function Vt(t,e=Ha){let n="";return typeof t.bindings>"u"?n=TD(t,e):n=t.bindings().context||"",n}function BD(t,e,n=Ha){const r=Vt(t,n);return r.trim()?`${r}/${e}`:e}function Pt(t,e,n=Ha){const r=BD(t,e,n),i=t.child({context:r});return RD(i,r,n)}function PD(t){var e,n;const r=new vD((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:_l(Du(Cu({},t.opts),{level:"trace",browser:Du(Cu({},(n=t.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function kD(t){var e;const n=new ED((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:_l(Du(Cu({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function OD(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?PD(t):kD(t)}var CD=Object.defineProperty,DD=(t,e,n)=>e in t?CD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zm=(t,e,n)=>DD(t,typeof e!="symbol"?e+"":e,n);let ND=class extends es{constructor(e){super(),this.opts=e,Zm(this,"protocol","wc"),Zm(this,"version",2)}};var MD=Object.defineProperty,LD=(t,e,n)=>e in t?MD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$D=(t,e,n)=>LD(t,e+"",n);let UD=class extends es{constructor(e,n){super(),this.core=e,this.logger=n,$D(this,"records",new Map)}},FD=class{constructor(e,n){this.logger=e,this.core=n}};class jD extends es{constructor(e,n){super(),this.relayer=e,this.logger=n}}let qD=class extends es{constructor(e){super()}},HD=class{constructor(e,n,r,i){this.core=e,this.logger=n,this.name=r}},zD=class extends es{constructor(e,n){super(),this.relayer=e,this.logger=n}},GD=class extends es{constructor(e,n){super(),this.core=e,this.logger=n}},VD=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},KD=class{constructor(e,n){this.projectId=e,this.logger=n}},WD=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var QD=Object.defineProperty,ZD=(t,e,n)=>e in t?QD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jm=(t,e,n)=>ZD(t,typeof e!="symbol"?e+"":e,n);let JD=class{constructor(e){this.opts=e,Jm(this,"protocol","wc"),Jm(this,"version",2)}},YD=class{constructor(e){this.client=e}};function XD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function I1(t,...e){if(!XD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ym(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function e8(t,e){I1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ls=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const md=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function t8(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function S1(t){return typeof t=="string"&&(t=t8(t)),I1(t),t}let n8=class{clone(){return this._cloneInto()}};function r8(t){const e=r=>t().update(S1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function T1(t=32){if(ls&&typeof ls.getRandomValues=="function")return ls.getRandomValues(new Uint8Array(t));if(ls&&typeof ls.randomBytes=="function")return ls.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function i8(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),u=r?4:0,l=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+l,a,r)}let s8=class extends n8{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=md(this.buffer)}update(e){Ym(this);const{view:n,buffer:r,blockLen:i}=this;e=S1(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=md(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ym(this),e8(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;i8(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=md(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,c[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const ac=BigInt(2**32-1),Lh=BigInt(32);function R1(t,e=!1){return e?{h:Number(t&ac),l:Number(t>>Lh&ac)}:{h:Number(t>>Lh&ac)|0,l:Number(t&ac)|0}}function o8(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=R1(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const a8=(t,e)=>BigInt(t>>>0)<<Lh|BigInt(e>>>0),c8=(t,e,n)=>t>>>n,u8=(t,e,n)=>t<<32-n|e>>>n,l8=(t,e,n)=>t>>>n|e<<32-n,d8=(t,e,n)=>t<<32-n|e>>>n,h8=(t,e,n)=>t<<64-n|e>>>n-32,f8=(t,e,n)=>t>>>n-32|e<<64-n,p8=(t,e)=>e,g8=(t,e)=>t,m8=(t,e,n)=>t<<n|e>>>32-n,y8=(t,e,n)=>e<<n|t>>>32-n,b8=(t,e,n)=>e<<n-32|t>>>64-n,w8=(t,e,n)=>t<<n-32|e>>>64-n;function v8(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const E8=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),_8=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,A8=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),x8=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,I8=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),S8=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,le={fromBig:R1,split:o8,toBig:a8,shrSH:c8,shrSL:u8,rotrSH:l8,rotrSL:d8,rotrBH:h8,rotrBL:f8,rotr32H:p8,rotr32L:g8,rotlSH:m8,rotlSL:y8,rotlBH:b8,rotlBL:w8,add:v8,add3L:E8,add3H:_8,add4L:A8,add4H:x8,add5H:S8,add5L:I8},[T8,R8]=le.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Dr=new Uint32Array(80),Nr=new Uint32Array(80);let B8=class extends s8{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:l,El:c,Fh:d,Fl:h,Gh:g,Gl:f,Hh:p,Hl:m}=this;return[e,n,r,i,s,o,a,u,l,c,d,h,g,f,p,m]}set(e,n,r,i,s,o,a,u,l,c,d,h,g,f,p,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=l|0,this.El=c|0,this.Fh=d|0,this.Fl=h|0,this.Gh=g|0,this.Gl=f|0,this.Hh=p|0,this.Hl=m|0}process(e,n){for(let b=0;b<16;b++,n+=4)Dr[b]=e.getUint32(n),Nr[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const A=Dr[b-15]|0,E=Nr[b-15]|0,_=le.rotrSH(A,E,1)^le.rotrSH(A,E,8)^le.shrSH(A,E,7),R=le.rotrSL(A,E,1)^le.rotrSL(A,E,8)^le.shrSL(A,E,7),x=Dr[b-2]|0,S=Nr[b-2]|0,T=le.rotrSH(x,S,19)^le.rotrBH(x,S,61)^le.shrSH(x,S,6),B=le.rotrSL(x,S,19)^le.rotrBL(x,S,61)^le.shrSL(x,S,6),k=le.add4L(R,B,Nr[b-7],Nr[b-16]),N=le.add4H(k,_,T,Dr[b-7],Dr[b-16]);Dr[b]=N|0,Nr[b]=k|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:l,Dl:c,Eh:d,El:h,Fh:g,Fl:f,Gh:p,Gl:m,Hh:y,Hl:w}=this;for(let b=0;b<80;b++){const A=le.rotrSH(d,h,14)^le.rotrSH(d,h,18)^le.rotrBH(d,h,41),E=le.rotrSL(d,h,14)^le.rotrSL(d,h,18)^le.rotrBL(d,h,41),_=d&g^~d&p,R=h&f^~h&m,x=le.add5L(w,E,R,R8[b],Nr[b]),S=le.add5H(x,y,A,_,T8[b],Dr[b]),T=x|0,B=le.rotrSH(r,i,28)^le.rotrBH(r,i,34)^le.rotrBH(r,i,39),k=le.rotrSL(r,i,28)^le.rotrBL(r,i,34)^le.rotrBL(r,i,39),N=r&s^r&a^s&a,M=i&o^i&u^o&u;y=p|0,w=m|0,p=g|0,m=f|0,g=d|0,f=h|0,{h:d,l:h}=le.add(l|0,c|0,S|0,T|0),l=a|0,c=u|0,a=s|0,u=o|0,s=r|0,o=i|0;const v=le.add3L(T,k,M);r=le.add3H(v,S,B,N),i=v|0}({h:r,l:i}=le.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=le.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=le.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:l,l:c}=le.add(this.Dh|0,this.Dl|0,l|0,c|0),{h:d,l:h}=le.add(this.Eh|0,this.El|0,d|0,h|0),{h:g,l:f}=le.add(this.Fh|0,this.Fl|0,g|0,f|0),{h:p,l:m}=le.add(this.Gh|0,this.Gl|0,p|0,m|0),{h:y,l:w}=le.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,i,s,o,a,u,l,c,d,h,g,f,p,m,y,w)}roundClean(){Dr.fill(0),Nr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const P8=r8(()=>new B8);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rp=BigInt(0),B1=BigInt(1),k8=BigInt(2);function Bp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Pp(t){if(!Bp(t))throw new Error("Uint8Array expected")}function yd(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const O8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function kp(t){Pp(t);let e="";for(let n=0;n<t.length;n++)e+=O8[t[n]];return e}function P1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Rp:BigInt("0x"+t)}const sr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Xm(t){if(t>=sr._0&&t<=sr._9)return t-sr._0;if(t>=sr.A&&t<=sr.F)return t-(sr.A-10);if(t>=sr.a&&t<=sr.f)return t-(sr.a-10)}function k1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Xm(t.charCodeAt(s)),a=Xm(t.charCodeAt(s+1));if(o===void 0||a===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+a}return r}function C8(t){return P1(kp(t))}function kc(t){return Pp(t),P1(kp(Uint8Array.from(t).reverse()))}function O1(t,e){return k1(t.toString(16).padStart(e*2,"0"))}function $h(t,e){return O1(t,e).reverse()}function or(t,e,n){let r;if(typeof e=="string")try{r=k1(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Bp(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function e0(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Pp(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const bd=t=>typeof t=="bigint"&&Rp<=t;function D8(t,e,n){return bd(t)&&bd(e)&&bd(n)&&e<=t&&t<n}function wo(t,e,n,r){if(!D8(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function N8(t){let e;for(e=0;t>Rp;t>>=B1,e+=1);return e}const M8=t=>(k8<<BigInt(t-1))-B1,L8={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Bp(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Op(t,e,n={}){const r=(i,s,o)=>{const a=L8[s];if(typeof a!="function")throw new Error("invalid validator function");const u=t[i];if(!(o&&u===void 0)&&!a(u,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}function t0(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const ot=BigInt(0),He=BigInt(1),bi=BigInt(2),$8=BigInt(3),Uh=BigInt(4),n0=BigInt(5),r0=BigInt(8);function Je(t,e){const n=t%e;return n>=ot?n:e+n}function U8(t,e,n){if(e<ot)throw new Error("invalid exponent, negatives unsupported");if(n<=ot)throw new Error("invalid modulus");if(n===He)return ot;let r=He;for(;e>ot;)e&He&&(r=r*t%n),t=t*t%n,e>>=He;return r}function Dn(t,e,n){let r=t;for(;e-- >ot;)r*=r,r%=n;return r}function i0(t,e){if(t===ot)throw new Error("invert: expected non-zero number");if(e<=ot)throw new Error("invert: expected positive modulus, got "+e);let n=Je(t,e),r=e,i=ot,s=He;for(;n!==ot;){const o=r/n,a=r%n,u=i-s*o;r=n,n=a,i=s,s=u}if(r!==He)throw new Error("invert: does not exist");return Je(i,e)}function F8(t){const e=(t-He)/bi;let n,r,i;for(n=t-He,r=0;n%bi===ot;n/=bi,r++);for(i=bi;i<t&&U8(i,e,t)!==t-He;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+He)/Uh;return function(a,u){const l=a.pow(u,o);if(!a.eql(a.sqr(l),u))throw new Error("Cannot find square root");return l}}const s=(n+He)/bi;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=r,l=o.pow(o.mul(o.ONE,i),n),c=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let f=o.sqr(d);h<u&&!o.eql(f,o.ONE);h++)f=o.sqr(f);const g=o.pow(l,He<<BigInt(u-h-1));l=o.sqr(g),c=o.mul(c,g),d=o.mul(d,l),u=h}return c}}function j8(t){if(t%Uh===$8){const e=(t+He)/Uh;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%r0===n0){const e=(t-n0)/r0;return function(n,r){const i=n.mul(r,bi),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,bi),s),u=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(u),r))throw new Error("Cannot find square root");return u}}return F8(t)}const q8=(t,e)=>(Je(t,e)&He)===He,H8=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function z8(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=H8.reduce((r,i)=>(r[i]="function",r),e);return Op(t,n)}function G8(t,e,n){if(n<ot)throw new Error("invalid exponent, negatives unsupported");if(n===ot)return t.ONE;if(n===He)return e;let r=t.ONE,i=e;for(;n>ot;)n&He&&(r=t.mul(r,i)),i=t.sqr(i),n>>=He;return r}function V8(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function C1(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function D1(t,e,n=!1,r={}){if(t<=ot)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=C1(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:M8(i),ZERO:ot,ONE:He,create:u=>Je(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return ot<=u&&u<t},is0:u=>u===ot,isOdd:u=>(u&He)===He,neg:u=>Je(-u,t),eql:(u,l)=>u===l,sqr:u=>Je(u*u,t),add:(u,l)=>Je(u+l,t),sub:(u,l)=>Je(u-l,t),mul:(u,l)=>Je(u*l,t),pow:(u,l)=>G8(a,u,l),div:(u,l)=>Je(u*i0(l,t),t),sqrN:u=>u*u,addN:(u,l)=>u+l,subN:(u,l)=>u-l,mulN:(u,l)=>u*l,inv:u=>i0(u,t),sqrt:r.sqrt||(u=>(o||(o=j8(t)),o(a,u))),invertBatch:u=>V8(a,u),cmov:(u,l,c)=>c?l:u,toBytes:u=>n?$h(u,s):O1(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return n?kc(u):C8(u)}});return Object.freeze(a)}const s0=BigInt(0),cc=BigInt(1);function wd(t,e){const n=e.negate();return t?n:e}function N1(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function vd(t,e){N1(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function K8(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function W8(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ed=new WeakMap,M1=new WeakMap;function _d(t){return M1.get(t)||1}function Q8(t,e){return{constTimeNegate:wd,hasPrecomputes(n){return _d(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>s0;)r&cc&&(i=i.add(s)),s=s.double(),r>>=cc;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=vd(r,e),o=[];let a=n,u=a;for(let l=0;l<i;l++){u=a,o.push(u);for(let c=1;c<s;c++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=vd(n,e);let a=t.ZERO,u=t.BASE;const l=BigInt(2**n-1),c=2**n,d=BigInt(n);for(let h=0;h<s;h++){const g=h*o;let f=Number(i&l);i>>=d,f>o&&(f-=c,i+=cc);const p=g,m=g+Math.abs(f)-1,y=h%2!==0,w=f<0;f===0?u=u.add(wd(y,r[p])):a=a.add(wd(w,r[m]))}return{p:a,f:u}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=vd(n,e),u=BigInt(2**n-1),l=2**n,c=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===s0)break;let g=Number(i&u);if(i>>=c,g>a&&(g-=l,i+=cc),g===0)continue;let f=r[h+Math.abs(g)-1];g<0&&(f=f.negate()),s=s.add(f)}return s},getPrecomputes(n,r,i){let s=Ed.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&Ed.set(r,i(s))),s},wNAFCached(n,r,i){const s=_d(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=_d(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){N1(r,e),M1.set(n,r),Ed.delete(n)}}}function Z8(t,e,n,r){if(K8(n,t),W8(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=N8(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,u=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let c=i;for(let d=l;d>=0;d-=o){u.fill(i);for(let g=0;g<r.length;g++){const f=r[g],p=Number(f>>BigInt(d)&BigInt(a));u[p]=u[p].add(n[g])}let h=i;for(let g=u.length-1,f=i;g>0;g--)f=f.add(u[g]),h=h.add(f);if(c=c.add(h),d!==0)for(let g=0;g<o;g++)c=c.double()}return c}function J8(t){return z8(t.Fp),Op(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...C1(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const wn=BigInt(0),kt=BigInt(1),uc=BigInt(2),Y8=BigInt(8),X8={zip215:!0};function e6(t){const e=J8(t);return Op(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function t6(t){const e=e6(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:u}=e,l=uc<<BigInt(a*8)-kt,c=n.create,d=D1(e.n,e.nBitLength),h=e.uvRatio||((v,I)=>{try{return{isValid:!0,value:n.sqrt(v*n.inv(I))}}catch{return{isValid:!1,value:wn}}}),g=e.adjustScalarBytes||(v=>v),f=e.domain||((v,I,P)=>{if(yd("phflag",P),I.length||P)throw new Error("Contexts/pre-hash are not supported");return v});function p(v,I){wo("coordinate "+v,I,wn,l)}function m(v){if(!(v instanceof b))throw new Error("ExtendedPoint expected")}const y=t0((v,I)=>{const{ex:P,ey:C,ez:O}=v,D=v.is0();I==null&&(I=D?Y8:n.inv(O));const $=c(P*I),q=c(C*I),V=c(O*I);if(D)return{x:wn,y:kt};if(V!==kt)throw new Error("invZ was invalid");return{x:$,y:q}}),w=t0(v=>{const{a:I,d:P}=e;if(v.is0())throw new Error("bad point: ZERO");const{ex:C,ey:O,ez:D,et:$}=v,q=c(C*C),V=c(O*O),H=c(D*D),W=c(H*H),X=c(q*I),he=c(H*c(X+V)),me=c(W+c(P*c(q*V)));if(he!==me)throw new Error("bad point: equation left != right (1)");const ae=c(C*O),Te=c(D*$);if(ae!==Te)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(I,P,C,O){this.ex=I,this.ey=P,this.ez=C,this.et=O,p("x",I),p("y",P),p("z",C),p("t",O),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof b)throw new Error("extended point not allowed");const{x:P,y:C}=I||{};return p("x",P),p("y",C),new b(P,C,kt,c(P*C))}static normalizeZ(I){const P=n.invertBatch(I.map(C=>C.ez));return I.map((C,O)=>C.toAffine(P[O])).map(b.fromAffine)}static msm(I,P){return Z8(b,d,I,P)}_setWindowSize(I){_.setWindowSize(this,I)}assertValidity(){w(this)}equals(I){m(I);const{ex:P,ey:C,ez:O}=this,{ex:D,ey:$,ez:q}=I,V=c(P*q),H=c(D*O),W=c(C*q),X=c($*O);return V===H&&W===X}is0(){return this.equals(b.ZERO)}negate(){return new b(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:I}=e,{ex:P,ey:C,ez:O}=this,D=c(P*P),$=c(C*C),q=c(uc*c(O*O)),V=c(I*D),H=P+C,W=c(c(H*H)-D-$),X=V+$,he=X-q,me=V-$,ae=c(W*he),Te=c(X*me),ze=c(W*me),Xe=c(he*X);return new b(ae,Te,Xe,ze)}add(I){m(I);const{a:P,d:C}=e,{ex:O,ey:D,ez:$,et:q}=this,{ex:V,ey:H,ez:W,et:X}=I;if(P===BigInt(-1)){const ug=c((D-O)*(H+V)),lg=c((D+O)*(H-V)),$l=c(lg-ug);if($l===wn)return this.double();const dg=c($*uc*X),hg=c(q*uc*W),fg=hg+dg,pg=lg+ug,gg=hg-dg,cA=c(fg*$l),uA=c(pg*gg),lA=c(fg*gg),dA=c($l*pg);return new b(cA,uA,dA,lA)}const he=c(O*V),me=c(D*H),ae=c(q*C*X),Te=c($*W),ze=c((O+D)*(V+H)-he-me),Xe=Te-ae,mn=Te+ae,yn=c(me-P*he),is=c(ze*Xe),Ya=c(mn*yn),oA=c(ze*yn),aA=c(Xe*mn);return new b(is,Ya,aA,oA)}subtract(I){return this.add(I.negate())}wNAF(I){return _.wNAFCached(this,I,b.normalizeZ)}multiply(I){const P=I;wo("scalar",P,kt,r);const{p:C,f:O}=this.wNAF(P);return b.normalizeZ([C,O])[0]}multiplyUnsafe(I,P=b.ZERO){const C=I;return wo("scalar",C,wn,r),C===wn?E:this.is0()||C===kt?this:_.wNAFCachedUnsafe(this,C,b.normalizeZ,P)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return _.unsafeLadder(this,r).is0()}toAffine(I){return y(this,I)}clearCofactor(){const{h:I}=e;return I===kt?this:this.multiplyUnsafe(I)}static fromHex(I,P=!1){const{d:C,a:O}=e,D=n.BYTES;I=or("pointHex",I,D),yd("zip215",P);const $=I.slice(),q=I[D-1];$[D-1]=q&-129;const V=kc($),H=P?l:n.ORDER;wo("pointHex.y",V,wn,H);const W=c(V*V),X=c(W-kt),he=c(C*W-O);let{isValid:me,value:ae}=h(X,he);if(!me)throw new Error("Point.fromHex: invalid y coordinate");const Te=(ae&kt)===kt,ze=(q&128)!==0;if(!P&&ae===wn&&ze)throw new Error("Point.fromHex: x=0 and x_0=1");return ze!==Te&&(ae=c(-ae)),b.fromAffine({x:ae,y:V})}static fromPrivateKey(I){return S(I).point}toRawBytes(){const{x:I,y:P}=this.toAffine(),C=$h(P,n.BYTES);return C[C.length-1]|=I&kt?128:0,C}toHex(){return kp(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,kt,c(e.Gx*e.Gy)),b.ZERO=new b(wn,kt,kt,wn);const{BASE:A,ZERO:E}=b,_=Q8(b,a*8);function R(v){return Je(v,r)}function x(v){return R(kc(v))}function S(v){const I=n.BYTES;v=or("private key",v,I);const P=or("hashed private key",s(v),2*I),C=g(P.slice(0,I)),O=P.slice(I,2*I),D=x(C),$=A.multiply(D),q=$.toRawBytes();return{head:C,prefix:O,scalar:D,point:$,pointBytes:q}}function T(v){return S(v).pointBytes}function B(v=new Uint8Array,...I){const P=e0(...I);return x(s(f(P,or("context",v),!!i)))}function k(v,I,P={}){v=or("message",v),i&&(v=i(v));const{prefix:C,scalar:O,pointBytes:D}=S(I),$=B(P.context,C,v),q=A.multiply($).toRawBytes(),V=B(P.context,q,D,v),H=R($+V*O);wo("signature.s",H,wn,r);const W=e0(q,$h(H,n.BYTES));return or("result",W,n.BYTES*2)}const N=X8;function M(v,I,P,C=N){const{context:O,zip215:D}=C,$=n.BYTES;v=or("signature",v,2*$),I=or("message",I),P=or("publicKey",P,$),D!==void 0&&yd("zip215",D),i&&(I=i(I));const q=kc(v.slice($,2*$));let V,H,W;try{V=b.fromHex(P,D),H=b.fromHex(v.slice(0,$),D),W=A.multiplyUnsafe(q)}catch{return!1}if(!D&&V.isSmallOrder())return!1;const X=B(O,H.toRawBytes(),V.toRawBytes(),I);return H.add(V.multiplyUnsafe(X)).subtract(W).clearCofactor().equals(b.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:T,sign:k,verify:M,ExtendedPoint:b,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(v=8,I=b.BASE){return I._setWindowSize(v),I.multiply(BigInt(3)),I}}}}BigInt(0),BigInt(1);const Cp=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),o0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const n6=BigInt(1),a0=BigInt(2);BigInt(3);const r6=BigInt(5),i6=BigInt(8);function s6(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=Cp,o=t*t%s*t%s,a=Dn(o,a0,s)*o%s,u=Dn(a,n6,s)*t%s,l=Dn(u,r6,s)*u%s,c=Dn(l,e,s)*l%s,d=Dn(c,n,s)*c%s,h=Dn(d,r,s)*d%s,g=Dn(h,i,s)*h%s,f=Dn(g,i,s)*h%s,p=Dn(f,e,s)*l%s;return{pow_p_5_8:Dn(p,a0,s)*t%s,b2:o}}function o6(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function a6(t,e){const n=Cp,r=Je(e*e*e,n),i=Je(r*r*e,n),s=s6(t*i).pow_p_5_8;let o=Je(t*r*s,n);const a=Je(e*o*o,n),u=o,l=Je(o*o0,n),c=a===t,d=a===Je(-t,n),h=a===Je(-t*o0,n);return c&&(o=u),(d||h)&&(o=l),q8(o,n)&&(o=Je(-o,n)),{isValid:c||d,value:o}}const c6=D1(Cp,void 0,!0),u6={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:c6,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:i6,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:P8,randomBytes:T1,adjustScalarBytes:o6,uvRatio:a6},L1=t6(u6),l6="EdDSA",d6="JWT",Nu=".",Al="base64url",$1="utf8",U1="utf8",h6=":",f6="did",p6="key",c0="base58btc",g6="z",m6="K36",y6=32;function Dp(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function F1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Dp(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function j1(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=F1(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return Dp(n)}function b6(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,m=0,y=0,w=f.length;y!==w&&f[y]===0;)y++,p++;for(var b=(w-y)*c+1>>>0,A=new Uint8Array(b);y!==w;){for(var E=f[y],_=0,R=b-1;(E!==0||_<m)&&R!==-1;R--,_++)E+=256*A[R]>>>0,A[R]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");m=_,y++}for(var x=b-m;x!==b&&A[x]===0;)x++;for(var S=u.repeat(p);x<b;++x)S+=t.charAt(A[x]);return S}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var p=0;if(f[p]!==" "){for(var m=0,y=0;f[p]===u;)m++,p++;for(var w=(f.length-p)*l+1>>>0,b=new Uint8Array(w);f[p];){var A=n[f.charCodeAt(p)];if(A===255)return;for(var E=0,_=w-1;(A!==0||E<y)&&_!==-1;_--,E++)A+=a*b[_]>>>0,b[_]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=E,p++}if(f[p]!==" "){for(var R=w-y;R!==w&&b[R]===0;)R++;for(var x=new Uint8Array(m+(w-R)),S=m;R!==w;)x[S++]=b[R++];return x}}}function g(f){var p=h(f);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:g}}var w6=b6,v6=w6;const q1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},E6=t=>new TextEncoder().encode(t),_6=t=>new TextDecoder().decode(t);let A6=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},x6=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return H1(this,e)}},I6=class{constructor(e){this.decoders=e}or(e){return H1(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const H1=(t,e)=>new I6({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let S6=class{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new A6(e,n,r),this.decoder=new x6(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const xl=({name:t,prefix:e,encode:n,decode:r})=>new S6(t,e,n,r),za=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=v6(n,e);return xl({prefix:t,name:e,encode:r,decode:s=>q1(i(s))})},T6=(t,e,n,r)=>{const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,u=0,l=0;for(let c=0;c<s;++c){const d=i[t[c]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},R6=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ht=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>xl({prefix:e,name:t,encode(i){return R6(i,r,n)},decode(i){return T6(i,r,n,t)}}),B6=xl({prefix:"\0",name:"identity",encode:t=>_6(t),decode:t=>E6(t)});var P6=Object.freeze({__proto__:null,identity:B6});const k6=ht({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var O6=Object.freeze({__proto__:null,base2:k6});const C6=ht({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var D6=Object.freeze({__proto__:null,base8:C6});const N6=za({prefix:"9",name:"base10",alphabet:"0123456789"});var M6=Object.freeze({__proto__:null,base10:N6});const L6=ht({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$6=ht({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var U6=Object.freeze({__proto__:null,base16:L6,base16upper:$6});const F6=ht({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),j6=ht({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),q6=ht({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),H6=ht({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),z6=ht({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),G6=ht({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),V6=ht({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),K6=ht({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),W6=ht({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Q6=Object.freeze({__proto__:null,base32:F6,base32upper:j6,base32pad:q6,base32padupper:H6,base32hex:z6,base32hexupper:G6,base32hexpad:V6,base32hexpadupper:K6,base32z:W6});const Z6=za({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),J6=za({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Y6=Object.freeze({__proto__:null,base36:Z6,base36upper:J6});const X6=za({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eN=za({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var tN=Object.freeze({__proto__:null,base58btc:X6,base58flickr:eN});const nN=ht({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rN=ht({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iN=ht({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sN=ht({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var oN=Object.freeze({__proto__:null,base64:nN,base64pad:rN,base64url:iN,base64urlpad:sN});const z1=Array.from(""),aN=z1.reduce((t,e,n)=>(t[n]=e,t),[]),cN=z1.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function uN(t){return t.reduce((e,n)=>(e+=aN[n],e),"")}function lN(t){const e=[];for(const n of t){const r=cN[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const dN=xl({prefix:"",name:"base256emoji",encode:uN,decode:lN});var hN=Object.freeze({__proto__:null,base256emoji:dN}),fN=G1,u0=128,pN=-128,gN=Math.pow(2,31);function G1(t,e,n){e=e||[],n=n||0;for(var r=n;t>=gN;)e[n++]=t&255|u0,t/=128;for(;t&pN;)e[n++]=t&255|u0,t>>>=7;return e[n]=t|0,G1.bytes=n-r+1,e}var mN=Fh,yN=128,l0=127;function Fh(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw Fh.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&l0)<<i:(o&l0)*Math.pow(2,i),i+=7}while(o>=yN);return Fh.bytes=s-r,n}var bN=Math.pow(2,7),wN=Math.pow(2,14),vN=Math.pow(2,21),EN=Math.pow(2,28),_N=Math.pow(2,35),AN=Math.pow(2,42),xN=Math.pow(2,49),IN=Math.pow(2,56),SN=Math.pow(2,63),TN=function(t){return t<bN?1:t<wN?2:t<vN?3:t<EN?4:t<_N?5:t<AN?6:t<xN?7:t<IN?8:t<SN?9:10},RN={encode:fN,decode:mN,encodingLength:TN},V1=RN;const d0=(t,e,n=0)=>(V1.encode(t,e,n),e),h0=t=>V1.encodingLength(t),jh=(t,e)=>{const n=e.byteLength,r=h0(t),i=r+h0(n),s=new Uint8Array(i+n);return d0(t,s,0),d0(n,s,r),s.set(e,i),new BN(t,n,e,s)};let BN=class{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}};const K1=({name:t,code:e,encode:n})=>new PN(t,e,n);let PN=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?jh(this.code,n):n.then(r=>jh(this.code,r))}else throw Error("Unknown type, must be binary type")}};const W1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),kN=K1({name:"sha2-256",code:18,encode:W1("SHA-256")}),ON=K1({name:"sha2-512",code:19,encode:W1("SHA-512")});var CN=Object.freeze({__proto__:null,sha256:kN,sha512:ON});const Q1=0,DN="identity",Z1=q1,NN=t=>jh(Q1,Z1(t)),MN={code:Q1,name:DN,encode:Z1,digest:NN};var LN=Object.freeze({__proto__:null,identity:MN});new TextEncoder,new TextDecoder;const f0={...P6,...O6,...D6,...M6,...U6,...Q6,...Y6,...tN,...oN,...hN};({...CN,...LN});function J1(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const p0=J1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ad=J1("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=F1(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Y1={utf8:p0,"utf-8":p0,hex:f0.base16,latin1:Ad,ascii:Ad,binary:Ad,...f0};function Il(t,e="utf8"){const n=Y1[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function io(t,e="utf8"){const n=Y1[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Dp(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function g0(t){return Ks(Il(io(t,Al),$1))}function Mu(t){return Il(io(Wi(t),$1),Al)}function X1(t){const e=io(m6,c0),n=g6+Il(j1([e,t]),c0);return[f6,p6,n].join(h6)}function $N(t){return Il(t,Al)}function UN(t){return io(t,Al)}function FN(t){return io([Mu(t.header),Mu(t.payload)].join(Nu),U1)}function jN(t){return[Mu(t.header),Mu(t.payload),$N(t.signature)].join(Nu)}function qh(t){const e=t.split(Nu),n=g0(e[0]),r=g0(e[1]),i=UN(e[2]),s=io(e.slice(0,2).join(Nu),U1);return{header:n,payload:r,signature:i,data:s}}function m0(t=T1(y6)){const e=L1.getPublicKey(t);return{secretKey:j1([t,e]),publicKey:e}}async function qN(t,e,n,r,i=G.fromMiliseconds(Date.now())){const s={alg:l6,typ:d6},o=X1(r.publicKey),a=i+n,u={iss:o,sub:t,aud:e,iat:i,exp:a},l=FN({header:s,payload:u}),c=L1.sign(l,r.secretKey.slice(0,32));return jN({header:s,payload:u,signature:c})}var y0=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},HN=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),zN=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),GN=function(){function t(e,n,r,i){this.name=e,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return t}(),VN=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),KN=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),WN=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,QN=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,b0=3,ZN=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",WN]],w0=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function JN(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new KN:typeof navigator<"u"?XN(navigator.userAgent):t4()}function YN(t){return t!==""&&ZN.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var s=i.exec(t);return!!s&&[r,s]},!1)}function XN(t){var e=YN(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new VN;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<b0&&(i=y0(y0([],i,!0),n4(b0-i.length),!0)):i=[];var s=i.join("."),o=e4(t),a=QN.exec(t);return a&&a[1]?new GN(n,s,o,a[1]):new HN(n,s,o)}function e4(t){for(var e=0,n=w0.length;e<n;e++){var r=w0[e],i=r[0],s=r[1],o=s.exec(t);if(o)return i}return null}function t4(){var t=typeof process<"u"&&process.version;return t?new zN(process.version.slice(1)):null}function n4(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Be={},v0;function eE(){if(v0)return Be;v0=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.getLocalStorage=Be.getLocalStorageOrThrow=Be.getCrypto=Be.getCryptoOrThrow=Be.getLocation=Be.getLocationOrThrow=Be.getNavigator=Be.getNavigatorOrThrow=Be.getDocument=Be.getDocumentOrThrow=Be.getFromWindowOrThrow=Be.getFromWindow=void 0;function t(h){let g;return typeof window<"u"&&typeof window[h]<"u"&&(g=window[h]),g}Be.getFromWindow=t;function e(h){const g=t(h);if(!g)throw new Error(`${h} is not defined in Window`);return g}Be.getFromWindowOrThrow=e;function n(){return e("document")}Be.getDocumentOrThrow=n;function r(){return t("document")}Be.getDocument=r;function i(){return e("navigator")}Be.getNavigatorOrThrow=i;function s(){return t("navigator")}Be.getNavigator=s;function o(){return e("location")}Be.getLocationOrThrow=o;function a(){return t("location")}Be.getLocation=a;function u(){return e("crypto")}Be.getCryptoOrThrow=u;function l(){return t("crypto")}Be.getCrypto=l;function c(){return e("localStorage")}Be.getLocalStorageOrThrow=c;function d(){return t("localStorage")}return Be.getLocalStorage=d,Be}var Sr=eE(),vo={},E0;function r4(){if(E0)return vo;E0=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.getWindowMetadata=void 0;const t=eE();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function i(){const g=n.getElementsByTagName("link"),f=[];for(let p=0;p<g.length;p++){const m=g[p],y=m.getAttribute("rel");if(y&&y.toLowerCase().indexOf("icon")>-1){const w=m.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let b=r.protocol+"//"+r.host;if(w.indexOf("/")===0)b+=w;else{const A=r.pathname.split("/");A.pop();const E=A.join("/");b+=E+"/"+w}f.push(b)}else if(w.indexOf("//")===0){const b=r.protocol+w;f.push(b)}else f.push(w)}}return f}function s(...g){const f=n.getElementsByTagName("meta");for(let p=0;p<f.length;p++){const m=f[p],y=["itemprop","property","name"].map(w=>m.getAttribute(w)).filter(w=>w?g.includes(w):!1);if(y.length&&y){const w=m.getAttribute("content");if(w)return w}}return""}function o(){let g=s("name","og:site_name","og:title","twitter:title");return g||(g=n.title),g}function a(){return s("description","og:description","twitter:description","keywords")}const u=o(),l=a(),c=r.origin,d=i();return{description:l,url:c,icons:d,name:u}}return vo.getWindowMetadata=e,vo}var i4=r4();function xa(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Hh(t){return xa(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const tE="2.31.0";let xd={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${tE}`};class Qi extends Error{constructor(e,n={}){const r=n.cause instanceof Qi?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof Qi&&n.cause.docsPath||n.docsPath,s=xd.getDocsUrl?.({...n,docsPath:i}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...xd.version?[`Version: ${xd.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=tE}walk(e){return nE(this,e)}}function nE(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?nE(t.cause,e):e?null:t}class rE extends Qi{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function so(t,{dir:e,size:n=32}={}){return typeof t=="string"?s4(t,{dir:e,size:n}):o4(t,{dir:e,size:n})}function s4(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new rE({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function o4(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new rE({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const s=e==="right";r[s?i:n-i-1]=t[s?i:t.length-i-1]}return r}class a4 extends Qi{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class c4 extends Qi{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function oo(t,{size:e}){if(Hh(t)>e)throw new c4({givenSize:Hh(t),maxSize:e})}function zh(t,e={}){const{signed:n}=e;e.size&&oo(t,{size:e.size});const r=BigInt(t);if(!n)return r;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function u4(t,e={}){return Number(zh(t,e))}const l4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gh(t,e={}){return typeof t=="number"||typeof t=="bigint"?sE(t,e):typeof t=="string"?f4(t,e):typeof t=="boolean"?d4(t,e):iE(t,e)}function d4(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(oo(n,{size:e.size}),so(n,{size:e.size})):n}function iE(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=l4[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(oo(r,{size:e.size}),so(r,{dir:"right",size:e.size})):r}function sE(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const u=typeof t=="bigint"?"n":"";throw new a4({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?so(a,{size:r}):a}const h4=new TextEncoder;function f4(t,e={}){const n=h4.encode(t);return iE(n,e)}const p4=new TextEncoder;function g4(t,e={}){return typeof t=="number"||typeof t=="bigint"?y4(t,e):typeof t=="boolean"?m4(t,e):xa(t)?oE(t,e):aE(t,e)}function m4(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(oo(n,{size:e.size}),so(n,{size:e.size})):n}const ar={zero:48,nine:57,A:65,F:70,a:97,f:102};function _0(t){if(t>=ar.zero&&t<=ar.nine)return t-ar.zero;if(t>=ar.A&&t<=ar.F)return t-(ar.A-10);if(t>=ar.a&&t<=ar.f)return t-(ar.a-10)}function oE(t,e={}){let n=t;e.size&&(oo(n,{size:e.size}),n=so(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const u=_0(r.charCodeAt(a++)),l=_0(r.charCodeAt(a++));if(u===void 0||l===void 0)throw new Qi(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=u*16+l}return s}function y4(t,e){const n=sE(t,e);return oE(n)}function aE(t,e={}){const n=p4.encode(t);return typeof e.size=="number"?(oo(n,{size:e.size}),so(n,{dir:"right",size:e.size})):n}const lc=BigInt(2**32-1),A0=BigInt(32);function b4(t,e=!1){return e?{h:Number(t&lc),l:Number(t>>A0&lc)}:{h:Number(t>>A0&lc)|0,l:Number(t&lc)|0}}function w4(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=b4(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const v4=(t,e,n)=>t<<n|e>>>32-n,E4=(t,e,n)=>e<<n|t>>>32-n,_4=(t,e,n)=>e<<n-32|t>>>64-n,A4=(t,e,n)=>t<<n-32|e>>>64-n,ds=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function x4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Lu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ia(t,...e){if(!x4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Wz(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Lu(t.outputLen),Lu(t.blockLen)}function x0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function I4(t,e){Ia(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function S4(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function cE(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Qz(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Zz(t,e){return t<<32-e|t>>>e}const T4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function R4(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function B4(t){for(let e=0;e<t.length;e++)t[e]=R4(t[e]);return t}const I0=T4?t=>t:B4;function P4(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function uE(t){return typeof t=="string"&&(t=P4(t)),Ia(t),t}function Jz(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Ia(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class k4{}function O4(t){const e=r=>t().update(uE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Yz(t=32){if(ds&&typeof ds.getRandomValues=="function")return ds.getRandomValues(new Uint8Array(t));if(ds&&typeof ds.randomBytes=="function")return Uint8Array.from(ds.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const C4=BigInt(0),Eo=BigInt(1),D4=BigInt(2),N4=BigInt(7),M4=BigInt(256),L4=BigInt(113),lE=[],dE=[],hE=[];for(let t=0,e=Eo,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],lE.push(2*(5*r+n)),dE.push((t+1)*(t+2)/2%64);let i=C4;for(let s=0;s<7;s++)e=(e<<Eo^(e>>N4)*L4)%M4,e&D4&&(i^=Eo<<(Eo<<BigInt(s))-Eo);hE.push(i)}const fE=w4(hE,!0),$4=fE[0],U4=fE[1],S0=(t,e,n)=>n>32?_4(t,e,n):v4(t,e,n),T0=(t,e,n)=>n>32?A4(t,e,n):E4(t,e,n);function F4(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,l=n[u],c=n[u+1],d=S0(l,c,1)^n[a],h=T0(l,c,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=dE[o],u=S0(i,s,a),l=T0(i,s,a),c=lE[o];i=t[c],s=t[c+1],t[c]=u,t[c+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=$4[r],t[1]^=U4[r]}cE(n)}class Np extends k4{constructor(e,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,Lu(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=S4(this.state)}clone(){return this._cloneInto()}keccak(){I0(this.state32),F4(this.state32,this.rounds),I0(this.state32),this.posOut=0,this.pos=0}update(e){x0(this),e=uE(e),Ia(e);const{blockLen:n,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){x0(this,!1),Ia(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Lu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(I4(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,cE(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Np(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const j4=(t,e,n)=>O4(()=>new Np(e,t,n)),q4=j4(1,136,256/8);function pE(t,e){const n=e||"hex",r=q4(xa(t,{strict:!1})?g4(t):t);return n==="bytes"?r:Gh(r)}class H4 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Id=new H4(8192);function z4(t,e){if(Id.has(`${t}.${e}`))return Id.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=pE(aE(n),"bytes"),i=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return Id.set(`${t}.${e}`,s),s}function G4(t){const e=pE(`0x${t.substring(4)}`).substring(26);return z4(`0x${e}`)}const V4="modulepreload",K4=function(t){return"/Mining-Machine-/"+t},R0={},W4=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=u(n.map(l=>{if(l=K4(l),l in R0)return;R0[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":V4,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((g,f)=>{h.addEventListener("load",g),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};async function Q4({hash:t,signature:e}){const n=xa(t)?t:Gh(t),{secp256k1:r}=await W4(async()=>{const{secp256k1:o}=await import("./secp256k1-DxQAsueT.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:c,v:d,yParity:h}=e,g=Number(h??d),f=B0(g);return new r.Signature(zh(l),zh(c)).addRecoveryBit(f)}const o=xa(e)?e:Gh(e);if(Hh(o)!==65)throw new Error("invalid signature length");const a=u4(`0x${o.slice(130)}`),u=B0(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function B0(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Z4({hash:t,signature:e}){return G4(await Q4({hash:t,signature:e}))}function J4(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const c=t.charAt(l),d=c.charCodeAt(0);if(e[d]!==255)throw new TypeError(c+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let c=0,d=0,h=0;const g=l.length;for(;h!==g&&l[h]===0;)h++,c++;const f=(g-h)*s+1>>>0,p=new Uint8Array(f);for(;h!==g;){let w=l[h],b=0;for(let A=f-1;(w!==0||b<d)&&A!==-1;A--,b++)w+=256*p[A]>>>0,p[A]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=b,h++}let m=f-d;for(;m!==f&&p[m]===0;)m++;let y=r.repeat(c);for(;m<f;++m)y+=t.charAt(p[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let c=0,d=0,h=0;for(;l[c]===r;)d++,c++;const g=(l.length-c)*i+1>>>0,f=new Uint8Array(g);for(;c<l.length;){const w=l.charCodeAt(c);if(w>255)return;let b=e[w];if(b===255)return;let A=0;for(let E=g-1;(b!==0||A<h)&&E!==-1;E--,A++)b+=n*f[E]>>>0,f[E]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=A,c++}let p=g-h;for(;p!==g&&f[p]===0;)p++;const m=new Uint8Array(d+(g-p));let y=d;for(;p!==g;)m[y++]=f[p++];return m}function u(l){const c=a(l);if(c)return c;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:u}}var Y4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ga=J4(Y4);function X4(t){const e=t.length;let n=0,r=0;for(;r<e;){let i=t.charCodeAt(r++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&r<e){const s=t.charCodeAt(r);(s&64512)===56320&&(++r,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function e5(t,e,n){const r=t.length;let i=n,s=0;for(;s<r;){let o=t.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){const a=t.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}const t5=new TextEncoder,n5=50;function r5(t,e,n){t5.encodeInto(t,e.subarray(n))}function i5(t,e,n){t.length>n5?r5(t,e,n):e5(t,e,n)}const s5=4096;function gE(t,e,n){let r=e;const i=r+n,s=[];let o="";for(;r<i;){const a=t[r++];if((a&128)===0)s.push(a);else if((a&224)===192){const u=t[r++]&63;s.push((a&31)<<6|u)}else if((a&240)===224){const u=t[r++]&63,l=t[r++]&63;s.push((a&31)<<12|u<<6|l)}else if((a&248)===240){const u=t[r++]&63,l=t[r++]&63,c=t[r++]&63;let d=(a&7)<<18|u<<12|l<<6|c;d>65535&&(d-=65536,s.push(d>>>10&1023|55296),d=56320|d&1023),s.push(d)}else s.push(a);s.length>=s5&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const o5=new TextDecoder,a5=200;function c5(t,e,n){const r=t.subarray(e,e+n);return o5.decode(r)}function u5(t,e,n){return n>a5?c5(t,e,n):gE(t,e,n)}class dc{constructor(e,n){this.type=e,this.data=n}}class Qt extends Error{constructor(e){super(e);const n=Object.create(Qt.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Qt.name})}}const _o=4294967295;function l5(t,e,n){const r=n/4294967296,i=n;t.setUint32(e,r),t.setUint32(e+4,i)}function mE(t,e,n){const r=Math.floor(n/4294967296),i=n;t.setUint32(e,r),t.setUint32(e+4,i)}function yE(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function d5(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const h5=-1,f5=4294967296-1,p5=17179869184-1;function g5({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=p5)if(e===0&&t<=f5){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|n&3),s.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),mE(r,4,t),n}}function m5(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function y5(t){if(t instanceof Date){const e=m5(t);return g5(e)}else return null}function b5(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),i=(n&3)*4294967296+r,s=n>>>2;return{sec:i,nsec:s}}case 12:{const n=yE(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Qt(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function w5(t){const e=b5(t);return new Date(e.sec*1e3+e.nsec/1e6)}const v5={type:h5,encode:y5,decode:w5};class $u{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(v5)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const i=-1-e;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const s=i(e,n);if(s!=null){const o=-1-r;return new dc(o,s)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const s=i(e,n);if(s!=null){const o=r;return new dc(o,s)}}}return e instanceof dc?e:null}decode(e,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(e,n,r):new dc(n,e)}}$u.defaultCodec=new $u;function E5(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Vh(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):E5(t)?new Uint8Array(t):Uint8Array.from(t)}const _5=100,A5=2048;let x5=class bE{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??$u.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??_5,this.initialBufferSize=e?.initialBufferSize??A5,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new bE({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=X4(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),i5(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=Vh(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of e)this.doEncode(i,n+1)}countWithoutUndefined(e,n){let r=0;for(const i of n)e[i]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of r){const o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),l5(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),mE(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function I5(t,e){return new x5(e).encodeSharedRef(t)}function Sd(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const S5=16,T5=16;class R5{constructor(e=S5,n=T5){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const i=this.caches[r-1];e:for(const s of i){const o=s.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return s.str}return null}store(e,n){const r=this.caches[e.length-1],i={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(e,n,r){const i=this.find(e,n,r);if(i!=null)return this.hit++,i;this.miss++;const s=gE(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,s),s}}const Kh="array",qo="map_key",wE="map_value",B5=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Qt("The type of key must be string or number but "+typeof t)};class P5{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Kh,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=qo,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Kh){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===qo||e.type===wE){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Ao=-1,Mp=new DataView(new ArrayBuffer(0)),k5=new Uint8Array(Mp.buffer);try{Mp.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const P0=new RangeError("Insufficient data"),O5=new R5;let C5=class vE{constructor(e){this.totalPos=0,this.pos=0,this.view=Mp,this.bytes=k5,this.headByte=Ao,this.stack=new P5,this.entered=!1,this.extensionCodec=e?.extensionCodec??$u.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??_o,this.maxBinLength=e?.maxBinLength??_o,this.maxArrayLength=e?.maxArrayLength??_o,this.maxMapLength=e?.maxMapLength??_o,this.maxExtLength=e?.maxExtLength??_o,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:O5,this.mapKeyConverter=e?.mapKeyConverter??B5}clone(){return new vE({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Ao,this.stack.reset()}setBuffer(e){const n=Vh(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Ao&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=Vh(e),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(u){if(!(u instanceof RangeError))throw u}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Sd(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,i=-1;for await(const s of e){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=e-160;n=this.decodeString(i,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Qt(`Unrecognized type byte: ${Sd(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===Kh)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===qo){if(n==="__proto__")throw new Qt("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=wE;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=qo;continue e}}return n}}readHeadByte(){return this.headByte===Ao&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Ao}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Qt(`Unrecognized array type byte: ${Sd(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Qt(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Qt(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new Qt(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw P0;const r=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?i=this.keyDecoder.decode(this.bytes,r,e):i=u5(this.bytes,r,e),this.pos+=n+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===qo:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Qt(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw P0;const r=this.pos+n,i=this.bytes.subarray(r,r+e);return this.pos+=n+e,i}decodeExtension(e,n){if(e>this.maxExtLength)throw new Qt(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(e,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=d5(this.view,this.pos);return this.pos+=8,e}readI64(){const e=yE(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function D5(t,e){return new C5(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function N5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function EE(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Uu(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Lp(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Wh(t){if(!Array.isArray(t))throw new Error("array expected")}function Fu(t,e){if(!EE(!0,e))throw new Error(`${t}: array of strings expected`)}function M5(t,e){if(!EE(!1,e))throw new Error(`${t}: array of numbers expected`)}function L5(...t){const e=s=>s,n=(s,o)=>a=>s(o(a)),r=t.map(s=>s.encode).reduceRight(n,e),i=t.map(s=>s.decode).reduce(n,e);return{encode:r,decode:i}}function $5(t){const e=typeof t=="string"?t.split(""):t,n=e.length;Fu("alphabet",e);const r=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(Wh(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${t}`);return e[s]})),decode:i=>(Wh(i),i.map(s=>{Uu("alphabet.decode",s);const o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${t}`);return o}))}}function U5(t=""){return Uu("join",t),{encode:e=>(Fu("join.decode",e),e.join(t)),decode:e=>(Uu("join.decode",e),e.split(t))}}function F5(t,e="="){return Lp(t),Uu("padding",e),{encode(n){for(Fu("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){Fu("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const _E=(t,e)=>e===0?t:_E(e,t%e),ju=(t,e)=>t+(e-_E(t,e)),Td=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function k0(t,e,n,r){if(Wh(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ju(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${ju(e,n)}`);let i=0,s=0;const o=Td[e],a=Td[n]-1,u=[];for(const l of t){if(Lp(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(i=i<<e|l,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)u.push((i>>s-n&a)>>>0);const c=Td[s];if(c===void 0)throw new Error("invalid carry");i&=c-1}if(i=i<<n-s&a,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&u.push(i>>>0),u}function j5(t,e=!1){if(Lp(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(ju(8,t)>32||ju(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!N5(n))throw new Error("radix2.encode input should be Uint8Array");return k0(Array.from(n),8,t,!e)},decode:n=>(M5("radix2.decode",n),Uint8Array.from(k0(n,t,8,e)))}}const q5=L5(j5(5),$5("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),F5(5),U5(""));function $p(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function AE(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?$p(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ho(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=AE(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return $p(n)}function H5(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,m=0,y=0,w=f.length;y!==w&&f[y]===0;)y++,p++;for(var b=(w-y)*c+1>>>0,A=new Uint8Array(b);y!==w;){for(var E=f[y],_=0,R=b-1;(E!==0||_<m)&&R!==-1;R--,_++)E+=256*A[R]>>>0,A[R]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");m=_,y++}for(var x=b-m;x!==b&&A[x]===0;)x++;for(var S=u.repeat(p);x<b;++x)S+=t.charAt(A[x]);return S}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var p=0;if(f[p]!==" "){for(var m=0,y=0;f[p]===u;)m++,p++;for(var w=(f.length-p)*l+1>>>0,b=new Uint8Array(w);f[p];){var A=n[f.charCodeAt(p)];if(A===255)return;for(var E=0,_=w-1;(A!==0||E<y)&&_!==-1;_--,E++)A+=a*b[_]>>>0,b[_]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=E,p++}if(f[p]!==" "){for(var R=w-y;R!==w&&b[R]===0;)R++;for(var x=new Uint8Array(m+(w-R)),S=m;R!==w;)x[S++]=b[R++];return x}}}function g(f){var p=h(f);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:g}}var z5=H5,G5=z5;const V5=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},K5=t=>new TextEncoder().encode(t),W5=t=>new TextDecoder().decode(t);class Q5{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Z5{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return xE(this,e)}}class J5{constructor(e){this.decoders=e}or(e){return xE(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xE=(t,e)=>new J5({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Y5{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Q5(e,n,r),this.decoder=new Z5(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Sl=({name:t,prefix:e,encode:n,decode:r})=>new Y5(t,e,n,r),Va=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=G5(n,e);return Sl({prefix:t,name:e,encode:r,decode:s=>V5(i(s))})},X5=(t,e,n,r)=>{const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,u=0,l=0;for(let c=0;c<s;++c){const d=i[t[c]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},eM=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ft=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Sl({prefix:e,name:t,encode(i){return eM(i,r,n)},decode(i){return X5(i,r,n,t)}}),tM=Sl({prefix:"\0",name:"identity",encode:t=>W5(t),decode:t=>K5(t)}),nM=Object.freeze(Object.defineProperty({__proto__:null,identity:tM},Symbol.toStringTag,{value:"Module"})),rM=ft({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),iM=Object.freeze(Object.defineProperty({__proto__:null,base2:rM},Symbol.toStringTag,{value:"Module"})),sM=ft({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),oM=Object.freeze(Object.defineProperty({__proto__:null,base8:sM},Symbol.toStringTag,{value:"Module"})),aM=Va({prefix:"9",name:"base10",alphabet:"0123456789"}),cM=Object.freeze(Object.defineProperty({__proto__:null,base10:aM},Symbol.toStringTag,{value:"Module"})),uM=ft({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lM=ft({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),dM=Object.freeze(Object.defineProperty({__proto__:null,base16:uM,base16upper:lM},Symbol.toStringTag,{value:"Module"})),hM=ft({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fM=ft({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pM=ft({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gM=ft({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mM=ft({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yM=ft({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bM=ft({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wM=ft({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vM=ft({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),EM=Object.freeze(Object.defineProperty({__proto__:null,base32:hM,base32hex:mM,base32hexpad:bM,base32hexpadupper:wM,base32hexupper:yM,base32pad:pM,base32padupper:gM,base32upper:fM,base32z:vM},Symbol.toStringTag,{value:"Module"})),_M=Va({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),AM=Va({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),xM=Object.freeze(Object.defineProperty({__proto__:null,base36:_M,base36upper:AM},Symbol.toStringTag,{value:"Module"})),IM=Va({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),SM=Va({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),TM=Object.freeze(Object.defineProperty({__proto__:null,base58btc:IM,base58flickr:SM},Symbol.toStringTag,{value:"Module"})),RM=ft({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),BM=ft({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),PM=ft({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kM=ft({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),OM=Object.freeze(Object.defineProperty({__proto__:null,base64:RM,base64pad:BM,base64url:PM,base64urlpad:kM},Symbol.toStringTag,{value:"Module"})),IE=Array.from(""),CM=IE.reduce((t,e,n)=>(t[n]=e,t),[]),DM=IE.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function NM(t){return t.reduce((e,n)=>(e+=CM[n],e),"")}function MM(t){const e=[];for(const n of t){const r=DM[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const LM=Sl({prefix:"",name:"base256emoji",encode:NM,decode:MM}),$M=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:LM},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const O0={...nM,...iM,...oM,...cM,...dM,...EM,...xM,...TM,...OM,...$M};function SE(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const C0=SE("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Rd=SE("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=AE(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),TE={utf8:C0,"utf-8":C0,hex:O0.base16,latin1:Rd,ascii:Rd,binary:Rd,...O0};function fn(t,e="utf8"){const n=TE[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$p(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function zt(t,e="utf8"){const n=TE[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const UM={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Bd,D0;function RE(){if(D0)return Bd;D0=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function n(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function i(o,a,u){let l=`
`+o+" = ";for(let c=0;c<a.length;c+=2){if(u===32)l+=r(a[c]).toUpperCase(),l+=" ",l+=r(a[c+1]).toUpperCase();else if(u===64)l+=r(a[c+1]).toUpperCase(),l+=r(a[c]).toUpperCase();else throw new Error("Invalid size "+u);c%6===4?l+=`
`+new Array(o.length+4).join(" "):c<a.length-2&&(l+=" ")}console.log(l)}function s(o,a,u){let l=new Date().getTime();const c=new Uint8Array(a);for(let h=0;h<a;h++)c[h]=h%256;const d=new Date().getTime();console.log("Generated random input in "+(d-l)+"ms"),l=d;for(let h=0;h<u;h++){const g=o(c),f=new Date().getTime(),p=f-l;l=f,console.log("Hashed in "+p+"ms: "+g.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(p/1e3)*100)/100+" MB PER SECOND")}}return Bd={normalizeInput:e,toHex:n,debugPrint:i,testSpeed:s},Bd}var Pd,N0;function FM(){if(N0)return Pd;N0=1;const t=RE();function e(y,w,b){const A=y[w]+y[b];let E=y[w+1]+y[b+1];A>=4294967296&&E++,y[w]=A,y[w+1]=E}function n(y,w,b,A){let E=y[w]+b;b<0&&(E+=4294967296);let _=y[w+1]+A;E>=4294967296&&_++,y[w]=E,y[w+1]=_}function r(y,w){return y[w]^y[w+1]<<8^y[w+2]<<16^y[w+3]<<24}function i(y,w,b,A,E,_){const R=l[E],x=l[E+1],S=l[_],T=l[_+1];e(u,y,w),n(u,y,R,x);let B=u[A]^u[y],k=u[A+1]^u[y+1];u[A]=k,u[A+1]=B,e(u,b,A),B=u[w]^u[b],k=u[w+1]^u[b+1],u[w]=B>>>24^k<<8,u[w+1]=k>>>24^B<<8,e(u,y,w),n(u,y,S,T),B=u[A]^u[y],k=u[A+1]^u[y+1],u[A]=B>>>16^k<<16,u[A+1]=k>>>16^B<<16,e(u,b,A),B=u[w]^u[b],k=u[w+1]^u[b+1],u[w]=k>>>31^B<<1,u[w+1]=B>>>31^k<<1}const s=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(y){return y*2})),u=new Uint32Array(32),l=new Uint32Array(32);function c(y,w){let b=0;for(b=0;b<16;b++)u[b]=y.h[b],u[b+16]=s[b];for(u[24]=u[24]^y.t,u[25]=u[25]^y.t/4294967296,w&&(u[28]=~u[28],u[29]=~u[29]),b=0;b<32;b++)l[b]=r(y.b,4*b);for(b=0;b<12;b++)i(0,8,16,24,a[b*16+0],a[b*16+1]),i(2,10,18,26,a[b*16+2],a[b*16+3]),i(4,12,20,28,a[b*16+4],a[b*16+5]),i(6,14,22,30,a[b*16+6],a[b*16+7]),i(0,10,20,30,a[b*16+8],a[b*16+9]),i(2,12,22,24,a[b*16+10],a[b*16+11]),i(4,14,16,26,a[b*16+12],a[b*16+13]),i(6,8,18,28,a[b*16+14],a[b*16+15]);for(b=0;b<16;b++)y.h[b]=y.h[b]^u[b]^u[b+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function h(y,w,b,A){if(y===0||y>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(w&&w.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(b&&b.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(A&&A.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const E={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:y};d.fill(0),d[0]=y,w&&(d[1]=w.length),d[2]=1,d[3]=1,b&&d.set(b,32),A&&d.set(A,48);for(let _=0;_<16;_++)E.h[_]=s[_]^r(d,_*4);return w&&(g(E,w),E.c=128),E}function g(y,w){for(let b=0;b<w.length;b++)y.c===128&&(y.t+=y.c,c(y,!1),y.c=0),y.b[y.c++]=w[b]}function f(y){for(y.t+=y.c;y.c<128;)y.b[y.c++]=0;c(y,!0);const w=new Uint8Array(y.outlen);for(let b=0;b<y.outlen;b++)w[b]=y.h[b>>2]>>8*(b&3);return w}function p(y,w,b,A,E){b=b||64,y=t.normalizeInput(y),A&&(A=t.normalizeInput(A)),E&&(E=t.normalizeInput(E));const _=h(b,w,A,E);return g(_,y),f(_)}function m(y,w,b,A,E){const _=p(y,w,b,A,E);return t.toHex(_)}return Pd={blake2b:p,blake2bHex:m,blake2bInit:h,blake2bUpdate:g,blake2bFinal:f},Pd}var kd,M0;function jM(){if(M0)return kd;M0=1;const t=RE();function e(f,p){return f[p]^f[p+1]<<8^f[p+2]<<16^f[p+3]<<24}function n(f,p,m,y,w,b){o[f]=o[f]+o[p]+w,o[y]=r(o[y]^o[f],16),o[m]=o[m]+o[y],o[p]=r(o[p]^o[m],12),o[f]=o[f]+o[p]+b,o[y]=r(o[y]^o[f],8),o[m]=o[m]+o[y],o[p]=r(o[p]^o[m],7)}function r(f,p){return f>>>p^f<<32-p}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function u(f,p){let m=0;for(m=0;m<8;m++)o[m]=f.h[m],o[m+8]=i[m];for(o[12]^=f.t,o[13]^=f.t/4294967296,p&&(o[14]=~o[14]),m=0;m<16;m++)a[m]=e(f.b,4*m);for(m=0;m<10;m++)n(0,4,8,12,a[s[m*16+0]],a[s[m*16+1]]),n(1,5,9,13,a[s[m*16+2]],a[s[m*16+3]]),n(2,6,10,14,a[s[m*16+4]],a[s[m*16+5]]),n(3,7,11,15,a[s[m*16+6]],a[s[m*16+7]]),n(0,5,10,15,a[s[m*16+8]],a[s[m*16+9]]),n(1,6,11,12,a[s[m*16+10]],a[s[m*16+11]]),n(2,7,8,13,a[s[m*16+12]],a[s[m*16+13]]),n(3,4,9,14,a[s[m*16+14]],a[s[m*16+15]]);for(m=0;m<8;m++)f.h[m]^=o[m]^o[m+8]}function l(f,p){if(!(f>0&&f<=32))throw new Error("Incorrect output length, should be in [1, 32]");const m=p?p.length:0;if(p&&!(m>0&&m<=32))throw new Error("Incorrect key length, should be in [1, 32]");const y={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:f};return y.h[0]^=16842752^m<<8^f,m>0&&(c(y,p),y.c=64),y}function c(f,p){for(let m=0;m<p.length;m++)f.c===64&&(f.t+=f.c,u(f,!1),f.c=0),f.b[f.c++]=p[m]}function d(f){for(f.t+=f.c;f.c<64;)f.b[f.c++]=0;u(f,!0);const p=new Uint8Array(f.outlen);for(let m=0;m<f.outlen;m++)p[m]=f.h[m>>2]>>8*(m&3)&255;return p}function h(f,p,m){m=m||32,f=t.normalizeInput(f);const y=l(m,p);return c(y,f),d(y)}function g(f,p,m){const y=h(f,p,m);return t.toHex(y)}return kd={blake2s:h,blake2sHex:g,blake2sInit:l,blake2sUpdate:c,blake2sFinal:d},kd}var Od,L0;function qM(){if(L0)return Od;L0=1;const t=FM(),e=jM();return Od={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},Od}var HM=qM(),zM={};const GM=":";function Oc(t){const[e,n]=t.split(GM);return{namespace:e,reference:n}}function BE(t,e){return t.includes(":")?[t]:e.chains||[]}var VM=Object.defineProperty,KM=Object.defineProperties,WM=Object.getOwnPropertyDescriptors,$0=Object.getOwnPropertySymbols,QM=Object.prototype.hasOwnProperty,ZM=Object.prototype.propertyIsEnumerable,Qh=(t,e,n)=>e in t?VM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U0=(t,e)=>{for(var n in e||(e={}))QM.call(e,n)&&Qh(t,n,e[n]);if($0)for(var n of $0(e))ZM.call(e,n)&&Qh(t,n,e[n]);return t},JM=(t,e)=>KM(t,WM(e)),F0=(t,e,n)=>Qh(t,typeof e!="symbol"?e+"":e,n);const YM="ReactNative",Zt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},XM="js";function qu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ci(){return!Sr.getDocument()&&!!Sr.getNavigator()&&navigator.product===YM}function eL(){return ci()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function tL(){return ci()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ao(){return!qu()&&!!Sr.getNavigator()&&!!Sr.getDocument()}function Ka(){return ci()?Zt.reactNative:qu()?Zt.node:ao()?Zt.browser:Zt.unknown}function j0(){var t;try{return ci()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function nL(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const i=e[r];i!==void 0&&n.set(r,i)}return n.toString()}function rL(t){var e,n;const r=PE();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),JM(U0(U0({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),t||r}}function PE(){return i4.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function iL(){if(Ka()===Zt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=JN();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function sL(){var t;const e=Ka();return e===Zt.browser?[e,((t=Sr.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function kE(t,e,n){const r=iL(),i=sL();return[[t,e].join("-"),[XM,n].join("-"),r,i].join("/")}function oL({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:u}){const l=n.split("?"),c=kE(t,e,r),d={auth:i,ua:c,projectId:s,useOnCloseEvent:o,packageName:u||void 0,bundleId:a||void 0},h=nL(l[1]||"",d);return l[0]+"?"+h}function Ii(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Zh(t){return Object.fromEntries(t.entries())}function Jh(t){return new Map(Object.entries(t))}function mi(t=G.FIVE_MINUTES,e){const n=G.toMiliseconds(t||G.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,u)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),u(l)},n),r=a,i=u})}}function Qr(t,e,n){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(n)),e);try{const o=await t;r(o)}catch(o){i(o)}clearTimeout(s)})}function OE(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function aL(t){return OE("topic",t)}function cL(t){return OE("id",t)}function CE(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Qe(t,e){return G.fromMiliseconds(Date.now()+G.toMiliseconds(t))}function qr(t){return Date.now()>=G.toMiliseconds(t)}function Ie(t,e){return`${t}${e?`:${e}`:""}`}function Li(t=[],e=[]){return[...new Set([...t,...e])]}async function uL({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,s=i?.href;if(typeof s!="string")return;const o=lL(s,t,e),a=Ka();if(a===Zt.browser){if(!((r=Sr.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}dL(o)}else a===Zt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function lL(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${gL(r,!0)}`}else i=`${i}/wc?${r}`;return i}function dL(t){let e="_self";pL()?e="_top":(fL()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function hL(t,e){let n="";try{if(ao()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function q0(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function H0(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Up(){return typeof process<"u"&&zM.IS_VITEST==="true"}function fL(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function pL(){try{return window.self!==window.top}catch{return!1}}function gL(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function DE(t){return Buffer.from(t,"base64").toString("utf-8")}function mL(t){return new Promise(e=>setTimeout(e,t))}let yL=class{constructor({limit:e}){F0(this,"limit"),F0(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const hc=BigInt(2**32-1),z0=BigInt(32);function NE(t,e=!1){return e?{h:Number(t&hc),l:Number(t>>z0&hc)}:{h:Number(t>>z0&hc)|0,l:Number(t&hc)|0}}function ME(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=NE(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const G0=(t,e,n)=>t>>>n,V0=(t,e,n)=>t<<32-n|e>>>n,Hr=(t,e,n)=>t>>>n|e<<32-n,zr=(t,e,n)=>t<<32-n|e>>>n,Co=(t,e,n)=>t<<64-n|e>>>n-32,Do=(t,e,n)=>t>>>n-32|e<<64-n,bL=(t,e)=>e,wL=(t,e)=>t,vL=(t,e,n)=>t<<n|e>>>32-n,EL=(t,e,n)=>e<<n|t>>>32-n,_L=(t,e,n)=>e<<n-32|t>>>64-n,AL=(t,e,n)=>t<<n-32|e>>>64-n;function xn(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Fp=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),jp=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,xL=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),IL=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,SL=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),TL=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,hs=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function qp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Tr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pn(t,...e){if(!qp(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Hp(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Tr(t.outputLen),Tr(t.blockLen)}function ii(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zp(t,e){pn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Sa(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function gn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Cd(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Nn(t,e){return t<<32-e|t>>>e}const LE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $E(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const hr=LE?t=>t:t=>$E(t);function RL(t){for(let e=0;e<t.length;e++)t[e]=$E(t[e]);return t}const Gr=LE?t=>t:RL,UE=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",BL=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ta(t){if(pn(t),UE)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=BL[t[n]];return e}const cr={_0:48,_9:57,A:65,F:70,a:97,f:102};function K0(t){if(t>=cr._0&&t<=cr._9)return t-cr._0;if(t>=cr.A&&t<=cr.F)return t-(cr.A-10);if(t>=cr.a&&t<=cr.f)return t-(cr.a-10)}function Gp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(UE)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=K0(t.charCodeAt(s)),a=K0(t.charCodeAt(s+1));if(o===void 0||a===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+a}return r}function PL(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Bn(t){return typeof t=="string"&&(t=PL(t)),pn(t),t}function Si(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];pn(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let Tl=class{};function Wa(t){const e=r=>t().update(Bn(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function kL(t){const e=(r,i)=>t(i).update(Bn(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function co(t=32){if(hs&&typeof hs.getRandomValues=="function")return hs.getRandomValues(new Uint8Array(t));if(hs&&typeof hs.randomBytes=="function")return Uint8Array.from(hs.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const OL=BigInt(0),xo=BigInt(1),CL=BigInt(2),DL=BigInt(7),NL=BigInt(256),ML=BigInt(113),FE=[],jE=[],qE=[];for(let t=0,e=xo,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],FE.push(2*(5*r+n)),jE.push((t+1)*(t+2)/2%64);let i=OL;for(let s=0;s<7;s++)e=(e<<xo^(e>>DL)*ML)%NL,e&CL&&(i^=xo<<(xo<<BigInt(s))-xo);qE.push(i)}const HE=ME(qE,!0),LL=HE[0],$L=HE[1],W0=(t,e,n)=>n>32?_L(t,e,n):vL(t,e,n),Q0=(t,e,n)=>n>32?AL(t,e,n):EL(t,e,n);function UL(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,l=n[u],c=n[u+1],d=W0(l,c,1)^n[a],h=Q0(l,c,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=jE[o],u=W0(i,s,a),l=Q0(i,s,a),c=FE[o];i=t[c],s=t[c+1],t[c]=u,t[c+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=LL[r],t[1]^=$L[r]}gn(n)}let FL=class zE extends Tl{constructor(e,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,Tr(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Sa(this.state)}clone(){return this._cloneInto()}keccak(){Gr(this.state32),UL(this.state32,this.rounds),Gr(this.state32),this.posOut=0,this.pos=0}update(e){ii(this),e=Bn(e),pn(e);const{blockLen:n,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ii(this,!1),pn(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Tr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zp(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,gn(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new zE(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const jL=(t,e,n)=>Wa(()=>new FL(e,t,n)),qL=jL(1,136,256/8);function HL(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),u=r?4:0,l=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+l,a,r)}function zL(t,e,n){return t&e^~t&n}function GL(t,e,n){return t&e^t&n^e&n}let GE=class extends Tl{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Cd(this.buffer)}update(e){ii(this),e=Bn(e),pn(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=Cd(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ii(this),zp(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,gn(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;HL(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Cd(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,c[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Mr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gt=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),mt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),VL=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lr=new Uint32Array(64);let KL=class extends GE{constructor(e=32){super(64,e,8,!1),this.A=Mr[0]|0,this.B=Mr[1]|0,this.C=Mr[2]|0,this.D=Mr[3]|0,this.E=Mr[4]|0,this.F=Mr[5]|0,this.G=Mr[6]|0,this.H=Mr[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:u}=this;return[e,n,r,i,s,o,a,u]}set(e,n,r,i,s,o,a,u){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,n){for(let d=0;d<16;d++,n+=4)Lr[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Lr[d-15],g=Lr[d-2],f=Nn(h,7)^Nn(h,18)^h>>>3,p=Nn(g,17)^Nn(g,19)^g>>>10;Lr[d]=p+Lr[d-7]+f+Lr[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:u,G:l,H:c}=this;for(let d=0;d<64;d++){const h=Nn(a,6)^Nn(a,11)^Nn(a,25),g=c+h+zL(a,u,l)+VL[d]+Lr[d]|0,f=(Nn(r,2)^Nn(r,13)^Nn(r,22))+GL(r,i,s)|0;c=l,l=u,u=a,a=o+g|0,o=s,s=i,i=r,r=g+f|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,s,o,a,u,l,c)}roundClean(){gn(Lr)}destroy(){this.set(0,0,0,0,0,0,0,0),gn(this.buffer)}};const VE=ME(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),WL=VE[0],QL=VE[1],$r=new Uint32Array(80),Ur=new Uint32Array(80);let Vp=class extends GE{constructor(e=64){super(128,e,16,!1),this.Ah=mt[0]|0,this.Al=mt[1]|0,this.Bh=mt[2]|0,this.Bl=mt[3]|0,this.Ch=mt[4]|0,this.Cl=mt[5]|0,this.Dh=mt[6]|0,this.Dl=mt[7]|0,this.Eh=mt[8]|0,this.El=mt[9]|0,this.Fh=mt[10]|0,this.Fl=mt[11]|0,this.Gh=mt[12]|0,this.Gl=mt[13]|0,this.Hh=mt[14]|0,this.Hl=mt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:l,El:c,Fh:d,Fl:h,Gh:g,Gl:f,Hh:p,Hl:m}=this;return[e,n,r,i,s,o,a,u,l,c,d,h,g,f,p,m]}set(e,n,r,i,s,o,a,u,l,c,d,h,g,f,p,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=l|0,this.El=c|0,this.Fh=d|0,this.Fl=h|0,this.Gh=g|0,this.Gl=f|0,this.Hh=p|0,this.Hl=m|0}process(e,n){for(let b=0;b<16;b++,n+=4)$r[b]=e.getUint32(n),Ur[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const A=$r[b-15]|0,E=Ur[b-15]|0,_=Hr(A,E,1)^Hr(A,E,8)^G0(A,E,7),R=zr(A,E,1)^zr(A,E,8)^V0(A,E,7),x=$r[b-2]|0,S=Ur[b-2]|0,T=Hr(x,S,19)^Co(x,S,61)^G0(x,S,6),B=zr(x,S,19)^Do(x,S,61)^V0(x,S,6),k=xL(R,B,Ur[b-7],Ur[b-16]),N=IL(k,_,T,$r[b-7],$r[b-16]);$r[b]=N|0,Ur[b]=k|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:l,Dl:c,Eh:d,El:h,Fh:g,Fl:f,Gh:p,Gl:m,Hh:y,Hl:w}=this;for(let b=0;b<80;b++){const A=Hr(d,h,14)^Hr(d,h,18)^Co(d,h,41),E=zr(d,h,14)^zr(d,h,18)^Do(d,h,41),_=d&g^~d&p,R=h&f^~h&m,x=SL(w,E,R,QL[b],Ur[b]),S=TL(x,y,A,_,WL[b],$r[b]),T=x|0,B=Hr(r,i,28)^Co(r,i,34)^Co(r,i,39),k=zr(r,i,28)^Do(r,i,34)^Do(r,i,39),N=r&s^r&a^s&a,M=i&o^i&u^o&u;y=p|0,w=m|0,p=g|0,m=f|0,g=d|0,f=h|0,{h:d,l:h}=xn(l|0,c|0,S|0,T|0),l=a|0,c=u|0,a=s|0,u=o|0,s=r|0,o=i|0;const v=Fp(T,k,M);r=jp(v,S,B,N),i=v|0}({h:r,l:i}=xn(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=xn(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=xn(this.Ch|0,this.Cl|0,a|0,u|0),{h:l,l:c}=xn(this.Dh|0,this.Dl|0,l|0,c|0),{h:d,l:h}=xn(this.Eh|0,this.El|0,d|0,h|0),{h:g,l:f}=xn(this.Fh|0,this.Fl|0,g|0,f|0),{h:p,l:m}=xn(this.Gh|0,this.Gl|0,p|0,m|0),{h:y,l:w}=xn(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,i,s,o,a,u,l,c,d,h,g,f,p,m,y,w)}roundClean(){gn($r,Ur)}destroy(){gn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},ZL=class extends Vp{constructor(){super(48),this.Ah=gt[0]|0,this.Al=gt[1]|0,this.Bh=gt[2]|0,this.Bl=gt[3]|0,this.Ch=gt[4]|0,this.Cl=gt[5]|0,this.Dh=gt[6]|0,this.Dl=gt[7]|0,this.Eh=gt[8]|0,this.El=gt[9]|0,this.Fh=gt[10]|0,this.Fl=gt[11]|0,this.Gh=gt[12]|0,this.Gl=gt[13]|0,this.Hh=gt[14]|0,this.Hl=gt[15]|0}};const yt=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class JL extends Vp{constructor(){super(32),this.Ah=yt[0]|0,this.Al=yt[1]|0,this.Bh=yt[2]|0,this.Bl=yt[3]|0,this.Ch=yt[4]|0,this.Cl=yt[5]|0,this.Dh=yt[6]|0,this.Dl=yt[7]|0,this.Eh=yt[8]|0,this.El=yt[9]|0,this.Fh=yt[10]|0,this.Fl=yt[11]|0,this.Gh=yt[12]|0,this.Gl=yt[13]|0,this.Hh=yt[14]|0,this.Hl=yt[15]|0}}const Rl=Wa(()=>new KL),YL=Wa(()=>new Vp),XL=Wa(()=>new ZL),e$=Wa(()=>new JL),t$=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),We=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Q=new Uint32Array(32);function Fr(t,e,n,r,i,s){const o=i[s],a=i[s+1];let u=Q[2*t],l=Q[2*t+1],c=Q[2*e],d=Q[2*e+1],h=Q[2*n],g=Q[2*n+1],f=Q[2*r],p=Q[2*r+1],m=Fp(u,c,o);l=jp(m,l,d,a),u=m|0,{Dh:p,Dl:f}={Dh:p^l,Dl:f^u},{Dh:p,Dl:f}={Dh:bL(p,f),Dl:wL(p)},{h:g,l:h}=xn(g,h,p,f),{Bh:d,Bl:c}={Bh:d^g,Bl:c^h},{Bh:d,Bl:c}={Bh:Hr(d,c,24),Bl:zr(d,c,24)},Q[2*t]=u,Q[2*t+1]=l,Q[2*e]=c,Q[2*e+1]=d,Q[2*n]=h,Q[2*n+1]=g,Q[2*r]=f,Q[2*r+1]=p}function jr(t,e,n,r,i,s){const o=i[s],a=i[s+1];let u=Q[2*t],l=Q[2*t+1],c=Q[2*e],d=Q[2*e+1],h=Q[2*n],g=Q[2*n+1],f=Q[2*r],p=Q[2*r+1],m=Fp(u,c,o);l=jp(m,l,d,a),u=m|0,{Dh:p,Dl:f}={Dh:p^l,Dl:f^u},{Dh:p,Dl:f}={Dh:Hr(p,f,16),Dl:zr(p,f,16)},{h:g,l:h}=xn(g,h,p,f),{Bh:d,Bl:c}={Bh:d^g,Bl:c^h},{Bh:d,Bl:c}={Bh:Co(d,c,63),Bl:Do(d,c,63)},Q[2*t]=u,Q[2*t+1]=l,Q[2*e]=c,Q[2*e+1]=d,Q[2*n]=h,Q[2*n+1]=g,Q[2*r]=f,Q[2*r+1]=p}function n$(t,e={},n,r,i){if(Tr(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:a}=e;if(s!==void 0&&(s.length<1||s.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class r$ extends Tl{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Tr(e),Tr(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Sa(this.buffer)}update(e){ii(this),e=Bn(e),pn(e);const{blockLen:n,buffer:r,buffer32:i}=this,s=e.length,o=e.byteOffset,a=e.buffer;for(let u=0;u<s;){this.pos===n&&(Gr(i),this.compress(i,0,!1),Gr(i),this.pos=0);const l=Math.min(n-this.pos,s-u),c=o+u;if(l===n&&!(c%4)&&u+l<s){const d=new Uint32Array(a,c,Math.floor((s-u)/4));Gr(d);for(let h=0;u+n<s;h+=i.length,u+=n)this.length+=n,this.compress(d,h,!1);Gr(d);continue}r.set(e.subarray(u,u+l),this.pos),this.pos+=l,this.length+=l,u+=l}return this}digestInto(e){ii(this),zp(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,gn(this.buffer.subarray(n)),Gr(r),this.compress(r,0,!0),Gr(r);const i=Sa(e);this.get().forEach((s,o)=>i[o]=hr(s))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:i,destroyed:s,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=s,e.finished=i,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class i$ extends r${constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=We[0]|0,this.v0h=We[1]|0,this.v1l=We[2]|0,this.v1h=We[3]|0,this.v2l=We[4]|0,this.v2h=We[5]|0,this.v3l=We[6]|0,this.v3h=We[7]|0,this.v4l=We[8]|0,this.v4h=We[9]|0,this.v5l=We[10]|0,this.v5h=We[11]|0,this.v6l=We[12]|0,this.v6h=We[13]|0,this.v7l=We[14]|0,this.v7h=We[15]|0,n$(n,e,64,16,16);let{key:r,personalization:i,salt:s}=e,o=0;if(r!==void 0&&(r=Bn(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=Bn(s);const a=Sa(s);this.v4l^=hr(a[0]),this.v4h^=hr(a[1]),this.v5l^=hr(a[2]),this.v5h^=hr(a[3])}if(i!==void 0){i=Bn(i);const a=Sa(i);this.v6l^=hr(a[0]),this.v6h^=hr(a[1]),this.v7l^=hr(a[2]),this.v7h^=hr(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:i,v2l:s,v2h:o,v3l:a,v3h:u,v4l:l,v4h:c,v5l:d,v5h:h,v6l:g,v6h:f,v7l:p,v7h:m}=this;return[e,n,r,i,s,o,a,u,l,c,d,h,g,f,p,m]}set(e,n,r,i,s,o,a,u,l,c,d,h,g,f,p,m){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=u|0,this.v4l=l|0,this.v4h=c|0,this.v5l=d|0,this.v5h=h|0,this.v6l=g|0,this.v6h=f|0,this.v7l=p|0,this.v7h=m|0}compress(e,n,r){this.get().forEach((u,l)=>Q[l]=u),Q.set(We,16);let{h:i,l:s}=NE(BigInt(this.length));Q[24]=We[8]^s,Q[25]=We[9]^i,r&&(Q[28]=~Q[28],Q[29]=~Q[29]);let o=0;const a=t$;for(let u=0;u<12;u++)Fr(0,4,8,12,e,n+2*a[o++]),jr(0,4,8,12,e,n+2*a[o++]),Fr(1,5,9,13,e,n+2*a[o++]),jr(1,5,9,13,e,n+2*a[o++]),Fr(2,6,10,14,e,n+2*a[o++]),jr(2,6,10,14,e,n+2*a[o++]),Fr(3,7,11,15,e,n+2*a[o++]),jr(3,7,11,15,e,n+2*a[o++]),Fr(0,5,10,15,e,n+2*a[o++]),jr(0,5,10,15,e,n+2*a[o++]),Fr(1,6,11,12,e,n+2*a[o++]),jr(1,6,11,12,e,n+2*a[o++]),Fr(2,7,8,13,e,n+2*a[o++]),jr(2,7,8,13,e,n+2*a[o++]),Fr(3,4,9,14,e,n+2*a[o++]),jr(3,4,9,14,e,n+2*a[o++]);this.v0l^=Q[0]^Q[16],this.v0h^=Q[1]^Q[17],this.v1l^=Q[2]^Q[18],this.v1h^=Q[3]^Q[19],this.v2l^=Q[4]^Q[20],this.v2h^=Q[5]^Q[21],this.v3l^=Q[6]^Q[22],this.v3h^=Q[7]^Q[23],this.v4l^=Q[8]^Q[24],this.v4h^=Q[9]^Q[25],this.v5l^=Q[10]^Q[26],this.v5h^=Q[11]^Q[27],this.v6l^=Q[12]^Q[28],this.v6h^=Q[13]^Q[29],this.v7l^=Q[14]^Q[30],this.v7h^=Q[15]^Q[31],gn(Q)}destroy(){this.destroyed=!0,gn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const s$=kL(t=>new i$(t)),o$="https://rpc.walletconnect.org/v1";function KE(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(qL(n)).toString("hex")}async function a$(t,e,n,r,i,s){switch(n.t){case"eip191":return await c$(t,e,n.s);case"eip1271":return await u$(t,e,n.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function c$(t,e,n){return(await Z4({hash:KE(e),signature:n})).toLowerCase()===t.toLowerCase()}async function u$(t,e,n,r,i,s){const o=Oc(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),c=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:KE(e)).substring(2),h=a+d+u+c+l,g=await fetch(`${s||o$}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:l$(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:f}=await g.json();return f?f.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function l$(){return Date.now()+Math.floor(Math.random()*1e3)}function d$(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return Ga.encode(s)}function h$(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const i=s$(r,{dkLen:32});return Ga.encode(i)}function Z0(t){const e=new Uint8Array(Rl(f$(t)));return Ga.encode(e)}function f$(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function J0(t){const e=Buffer.from(t,"base64"),n=D5(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=I5(n),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(r)]),o=e$(s);return q5.encode(o).replace(/=+$/,"")}function Dd(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function p$(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(Dd(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(Dd(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(Dd(r.length)),i.push(r);const s=Buffer.concat(i),o=Rl(s);return Buffer.from(o).toString("hex").toUpperCase()}var g$=Object.defineProperty,m$=Object.defineProperties,y$=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,b$=Object.prototype.hasOwnProperty,w$=Object.prototype.propertyIsEnumerable,X0=(t,e,n)=>e in t?g$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v$=(t,e)=>{for(var n in e||(e={}))b$.call(e,n)&&X0(t,n,e[n]);if(Y0)for(var n of Y0(e))w$.call(e,n)&&X0(t,n,e[n]);return t},E$=(t,e)=>m$(t,y$(e));const _$="did:pkh:",Kp=t=>t?.split(":"),A$=t=>{const e=t&&Kp(t);if(e)return t.includes(_$)?e[3]:e[1]},Yh=t=>{const e=t&&Kp(t);if(e)return e[2]+":"+e[3]},Hu=t=>{const e=t&&Kp(t);if(e)return e.pop()};async function ey(t){const{cacao:e,projectId:n}=t,{s:r,p:i}=e,s=WE(i,i.iss),o=Hu(i.iss);return await a$(o,s,r,Yh(i.iss),n)}const WE=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Hu(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${A$(e)}`,u=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,c=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(p=>`
- ${p}`).join("")}`:void 0,f=Cc(t.resources);if(f){const p=Ra(f);i=O$(i,p)}return[n,r,"",i,"",s,o,a,u,l,c,d,h,g].filter(p=>p!=null).join(`
`)};function x$(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function I$(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Zi(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function S$(t,e,n,r={}){return n?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:T$(e,n,r)}}}function T$(t,e,n={}){e=e?.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${t}/${i}`]:[n]}));return Object.assign({},...r)}function QE(t){return Zi(t),`urn:recap:${x$(t).replace(/=/g,"")}`}function Ra(t){const e=I$(t.replace("urn:recap:",""));return Zi(e),e}function R$(t,e,n){const r=S$(t,e,n);return QE(r)}function B$(t){return t&&t.includes("urn:recap:")}function P$(t,e){const n=Ra(t),r=Ra(e),i=k$(n,r);return QE(i)}function k$(t,e){Zi(t),Zi(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return n.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,u)=>a.localeCompare(u)).forEach(a=>{var u,l;r.att[i]=E$(v$({},r.att[i]),{[a]:((u=t.att[i])==null?void 0:u[a])||((l=e.att[i])==null?void 0:l[a])})})}),r}function O$(t="",e){Zi(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let i=0;Object.keys(e.att).forEach(a=>{const u=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));u.sort((d,h)=>d.action.localeCompare(h.action));const l={};u.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const c=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(c.join(", ").replace(".,","."))});const s=r.join(" "),o=`${n}${s}`;return`${t?t+" ":""}${o}`}function ty(t){var e;const n=Ra(t);Zi(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function ny(t){const e=Ra(t);Zi(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Cc(t){if(!t)return;const e=t?.[t.length-1];return B$(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function ZE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xh(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Nd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function $t(t,...e){if(!ZE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ry(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function C$(t,e){$t(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Yr(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ws(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function D$(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const N$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function M$(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ef(t){if(typeof t=="string")t=M$(t);else if(ZE(t))t=tf(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function L$(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function $$(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const U$=(t,e)=>{function n(r,...i){if($t(r),!N$)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?$t(l):$t(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&$t(i[1]);const o=e(r,...i),a=(l,c)=>{if(c!==void 0){if(l!==2)throw new Error("cipher output not supported");$t(c)}};let u=!1;return{encrypt(l,c){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,$t(l),a(o.encrypt.length,c),o.encrypt(l,c)},decrypt(l,c){if($t(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,c),o.decrypt(l,c)}}}return Object.assign(n,t),n};function iy(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!j$(e))throw new Error("invalid output, must be aligned");return e}function sy(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function F$(t,e,n){Xh(n);const r=new Uint8Array(16),i=D$(r);return sy(i,0,BigInt(e),n),sy(i,8,BigInt(t),n),r}function j$(t){return t.byteOffset%4===0}function tf(t){return Uint8Array.from(t)}const JE=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),q$=JE("expand 16-byte k"),H$=JE("expand 32-byte k"),z$=Yr(q$),G$=Yr(H$);function _e(t,e){return t<<e|t>>>32-e}function nf(t){return t.byteOffset%4===0}const fc=64,V$=16,YE=2**32-1,oy=new Uint32Array;function K$(t,e,n,r,i,s,o,a){const u=i.length,l=new Uint8Array(fc),c=Yr(l),d=nf(i)&&nf(s),h=d?Yr(i):oy,g=d?Yr(s):oy;for(let f=0;f<u;o++){if(t(e,n,r,c,o,a),o>=YE)throw new Error("arx: counter overflow");const p=Math.min(fc,u-f);if(d&&p===fc){const m=f/4;if(f%4!==0)throw new Error("arx: invalid block position");for(let y=0,w;y<V$;y++)w=m+y,g[w]=h[w]^c[y];f+=fc;continue}for(let m=0,y;m<p;m++)y=f+m,s[y]=i[y]^l[m];f+=p}}function W$(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=L$({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Nd(i),Nd(o),Xh(s),Xh(n),(a,u,l,c,d=0)=>{$t(a),$t(u),$t(l);const h=l.length;if(c===void 0&&(c=new Uint8Array(h)),$t(c),Nd(d),d<0||d>=YE)throw new Error("arx: counter overflow");if(c.length<h)throw new Error(`arx: output (${c.length}) is shorter than data (${h})`);const g=[];let f=a.length,p,m;if(f===32)g.push(p=tf(a)),m=G$;else if(f===16&&n)p=new Uint8Array(32),p.set(a),p.set(a,16),m=z$,g.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${f}`);nf(u)||g.push(u=tf(u));const y=Yr(p);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,y,Yr(u.subarray(0,16)),y),u=u.subarray(16)}const w=16-i;if(w!==u.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const A=new Uint8Array(12);A.set(u,s?0:12-u.length),u=A,g.push(u)}const b=Yr(u);return K$(t,m,y,b,l,c,d,o),Ws(...g),c}}const ct=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Q${constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ef(e),$t(e,32);const n=ct(e,0),r=ct(e,2),i=ct(e,4),s=ct(e,6),o=ct(e,8),a=ct(e,10),u=ct(e,12),l=ct(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let c=0;c<8;c++)this.pad[c]=ct(e,16+2*c)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],u=o[1],l=o[2],c=o[3],d=o[4],h=o[5],g=o[6],f=o[7],p=o[8],m=o[9],y=ct(e,n+0),w=ct(e,n+2),b=ct(e,n+4),A=ct(e,n+6),E=ct(e,n+8),_=ct(e,n+10),R=ct(e,n+12),x=ct(e,n+14);let S=s[0]+(y&8191),T=s[1]+((y>>>13|w<<3)&8191),B=s[2]+((w>>>10|b<<6)&8191),k=s[3]+((b>>>7|A<<9)&8191),N=s[4]+((A>>>4|E<<12)&8191),M=s[5]+(E>>>1&8191),v=s[6]+((E>>>14|_<<2)&8191),I=s[7]+((_>>>11|R<<5)&8191),P=s[8]+((R>>>8|x<<8)&8191),C=s[9]+(x>>>5|i),O=0,D=O+S*a+T*(5*m)+B*(5*p)+k*(5*f)+N*(5*g);O=D>>>13,D&=8191,D+=M*(5*h)+v*(5*d)+I*(5*c)+P*(5*l)+C*(5*u),O+=D>>>13,D&=8191;let $=O+S*u+T*a+B*(5*m)+k*(5*p)+N*(5*f);O=$>>>13,$&=8191,$+=M*(5*g)+v*(5*h)+I*(5*d)+P*(5*c)+C*(5*l),O+=$>>>13,$&=8191;let q=O+S*l+T*u+B*a+k*(5*m)+N*(5*p);O=q>>>13,q&=8191,q+=M*(5*f)+v*(5*g)+I*(5*h)+P*(5*d)+C*(5*c),O+=q>>>13,q&=8191;let V=O+S*c+T*l+B*u+k*a+N*(5*m);O=V>>>13,V&=8191,V+=M*(5*p)+v*(5*f)+I*(5*g)+P*(5*h)+C*(5*d),O+=V>>>13,V&=8191;let H=O+S*d+T*c+B*l+k*u+N*a;O=H>>>13,H&=8191,H+=M*(5*m)+v*(5*p)+I*(5*f)+P*(5*g)+C*(5*h),O+=H>>>13,H&=8191;let W=O+S*h+T*d+B*c+k*l+N*u;O=W>>>13,W&=8191,W+=M*a+v*(5*m)+I*(5*p)+P*(5*f)+C*(5*g),O+=W>>>13,W&=8191;let X=O+S*g+T*h+B*d+k*c+N*l;O=X>>>13,X&=8191,X+=M*u+v*a+I*(5*m)+P*(5*p)+C*(5*f),O+=X>>>13,X&=8191;let he=O+S*f+T*g+B*h+k*d+N*c;O=he>>>13,he&=8191,he+=M*l+v*u+I*a+P*(5*m)+C*(5*p),O+=he>>>13,he&=8191;let me=O+S*p+T*f+B*g+k*h+N*d;O=me>>>13,me&=8191,me+=M*c+v*l+I*u+P*a+C*(5*m),O+=me>>>13,me&=8191;let ae=O+S*m+T*p+B*f+k*g+N*h;O=ae>>>13,ae&=8191,ae+=M*d+v*c+I*l+P*u+C*a,O+=ae>>>13,ae&=8191,O=(O<<2)+O|0,O=O+D|0,D=O&8191,O=O>>>13,$+=O,s[0]=D,s[1]=$,s[2]=q,s[3]=V,s[4]=H,s[5]=W,s[6]=X,s[7]=he,s[8]=me,s[9]=ae}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Ws(r)}update(e){ry(this),e=ef(e),$t(e);const{buffer:n,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Ws(this.h,this.r,this.buffer,this.pad)}digestInto(e){ry(this),C$(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Z$(t){const e=(r,i)=>t(i).update(ef(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const J$=Z$(t=>new Q$(t));function Y$(t,e,n,r,i,s=20){let o=t[0],a=t[1],u=t[2],l=t[3],c=e[0],d=e[1],h=e[2],g=e[3],f=e[4],p=e[5],m=e[6],y=e[7],w=i,b=n[0],A=n[1],E=n[2],_=o,R=a,x=u,S=l,T=c,B=d,k=h,N=g,M=f,v=p,I=m,P=y,C=w,O=b,D=A,$=E;for(let V=0;V<s;V+=2)_=_+T|0,C=_e(C^_,16),M=M+C|0,T=_e(T^M,12),_=_+T|0,C=_e(C^_,8),M=M+C|0,T=_e(T^M,7),R=R+B|0,O=_e(O^R,16),v=v+O|0,B=_e(B^v,12),R=R+B|0,O=_e(O^R,8),v=v+O|0,B=_e(B^v,7),x=x+k|0,D=_e(D^x,16),I=I+D|0,k=_e(k^I,12),x=x+k|0,D=_e(D^x,8),I=I+D|0,k=_e(k^I,7),S=S+N|0,$=_e($^S,16),P=P+$|0,N=_e(N^P,12),S=S+N|0,$=_e($^S,8),P=P+$|0,N=_e(N^P,7),_=_+B|0,$=_e($^_,16),I=I+$|0,B=_e(B^I,12),_=_+B|0,$=_e($^_,8),I=I+$|0,B=_e(B^I,7),R=R+k|0,C=_e(C^R,16),P=P+C|0,k=_e(k^P,12),R=R+k|0,C=_e(C^R,8),P=P+C|0,k=_e(k^P,7),x=x+N|0,O=_e(O^x,16),M=M+O|0,N=_e(N^M,12),x=x+N|0,O=_e(O^x,8),M=M+O|0,N=_e(N^M,7),S=S+T|0,D=_e(D^S,16),v=v+D|0,T=_e(T^v,12),S=S+T|0,D=_e(D^S,8),v=v+D|0,T=_e(T^v,7);let q=0;r[q++]=o+_|0,r[q++]=a+R|0,r[q++]=u+x|0,r[q++]=l+S|0,r[q++]=c+T|0,r[q++]=d+B|0,r[q++]=h+k|0,r[q++]=g+N|0,r[q++]=f+M|0,r[q++]=p+v|0,r[q++]=m+I|0,r[q++]=y+P|0,r[q++]=w+C|0,r[q++]=b+O|0,r[q++]=A+D|0,r[q++]=E+$|0}const X$=W$(Y$,{counterRight:!1,counterLength:4,allowShortKeys:!1}),eU=new Uint8Array(16),ay=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(eU.subarray(n))},tU=new Uint8Array(32);function cy(t,e,n,r,i){const s=t(e,n,tU),o=J$.create(s);i&&ay(o,i),ay(o,r);const a=F$(r.length,i?i.length:0,!0);o.update(a);const u=o.digest();return Ws(s,a),u}const nU=t=>(e,n,r)=>({encrypt(i,s){const o=i.length;s=iy(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,n,a,a,1);const u=cy(t,e,n,a,r);return s.set(u,o),Ws(u),s},decrypt(i,s){s=iy(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),u=cy(t,e,n,o,r);if(!$$(a,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,n,s,s,1),Ws(u),s}}),XE=U$({blockSize:64,nonceLength:12,tagLength:16},nU(X$));let e_=class extends Tl{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Hp(e);const r=Bn(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),gn(s)}update(e){return ii(this),this.iHash.update(e),this}digestInto(e){ii(this),pn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Bl=(t,e,n)=>new e_(t,e).update(n).digest();Bl.create=(t,e)=>new e_(t,e);function rU(t,e,n){return Hp(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Bl(t,Bn(n),Bn(e))}const Md=Uint8Array.from([0]),uy=Uint8Array.of();function iU(t,e,n,r=32){Hp(t),Tr(r);const i=t.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/i);n===void 0&&(n=uy);const o=new Uint8Array(s*i),a=Bl.create(t,e),u=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let c=0;c<s;c++)Md[0]=c+1,u.update(c===0?uy:l).update(n).update(Md).digestInto(l),o.set(l,i*c),a._cloneInto(u);return a.destroy(),u.destroy(),gn(l,Md),o.slice(0,r)}const sU=(t,e,n,r,i)=>iU(t,rU(t,e,n),r,i),Pl=Rl,Wp=BigInt(0),rf=BigInt(1);function zu(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function pc(t){const e=t.toString(16);return e.length&1?"0"+e:e}function t_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Wp:BigInt("0x"+t)}function kl(t){return t_(Ta(t))}function Gu(t){return pn(t),t_(Ta(Uint8Array.from(t).reverse()))}function Qp(t,e){return Gp(t.toString(16).padStart(e*2,"0"))}function Zp(t,e){return Qp(t,e).reverse()}function Mt(t,e,n){let r;if(typeof e=="string")try{r=Gp(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(qp(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}const Ld=t=>typeof t=="bigint"&&Wp<=t;function oU(t,e,n){return Ld(t)&&Ld(e)&&Ld(n)&&e<=t&&t<n}function sf(t,e,n,r){if(!oU(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function aU(t){let e;for(e=0;t>Wp;t>>=rf,e+=1);return e}const Ol=t=>(rf<<BigInt(t))-rf;function cU(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),i=h=>Uint8Array.of(h);let s=r(t),o=r(t),a=0;const u=()=>{s.fill(1),o.fill(0),a=0},l=(...h)=>n(o,s,...h),c=(h=r(0))=>{o=l(i(0),h),s=l(),h.length!==0&&(o=l(i(1),h),s=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const g=[];for(;h<e;){s=l();const f=s.slice();g.push(f),h+=s.length}return Si(...g)};return(h,g)=>{u(),c(h);let f;for(;!(f=g(d()));)c();return u(),f}}function Cl(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(i,s,o){const a=t[i];if(o&&a===void 0)return;const u=typeof a;if(u!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function ly(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const Ht=BigInt(0),It=BigInt(1),Ti=BigInt(2),uU=BigInt(3),n_=BigInt(4),r_=BigInt(5),i_=BigInt(8);function cn(t,e){const n=t%e;return n>=Ht?n:e+n}function An(t,e,n){let r=t;for(;e-- >Ht;)r*=r,r%=n;return r}function dy(t,e){if(t===Ht)throw new Error("invert: expected non-zero number");if(e<=Ht)throw new Error("invert: expected positive modulus, got "+e);let n=cn(t,e),r=e,i=Ht,s=It;for(;n!==Ht;){const o=r/n,a=r%n,u=i-s*o;r=n,n=a,i=s,s=u}if(r!==It)throw new Error("invert: does not exist");return cn(i,e)}function s_(t,e){const n=(t.ORDER+It)/n_,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function lU(t,e){const n=(t.ORDER-r_)/i_,r=t.mul(e,Ti),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Ti),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function dU(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-It,n=0;for(;e%Ti===Ht;)e/=Ti,n++;let r=Ti;const i=uo(t);for(;hy(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return s_;let s=i.pow(r,e);const o=(e+It)/Ti;return function(a,u){if(a.is0(u))return u;if(hy(a,u)!==1)throw new Error("Cannot find square root");let l=n,c=a.mul(a.ONE,s),d=a.pow(u,e),h=a.pow(u,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let g=1,f=a.sqr(d);for(;!a.eql(f,a.ONE);)if(g++,f=a.sqr(f),g===l)throw new Error("Cannot find square root");const p=It<<BigInt(l-g-1),m=a.pow(c,p);l=g,c=a.sqr(m),d=a.mul(d,c),h=a.mul(h,m)}return h}}function hU(t){return t%n_===uU?s_:t%i_===r_?lU:dU(t)}const fU=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pU(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=fU.reduce((r,i)=>(r[i]="function",r),e);return Cl(t,n),t}function gU(t,e,n){if(n<Ht)throw new Error("invalid exponent, negatives unsupported");if(n===Ht)return t.ONE;if(n===It)return e;let r=t.ONE,i=e;for(;n>Ht;)n&It&&(r=t.mul(r,i)),i=t.sqr(i),n>>=It;return r}function o_(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,u)=>t.is0(a)?o:(r[u]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,u)=>t.is0(a)?o:(r[u]=t.mul(o,r[u]),t.mul(o,a)),s),r}function hy(t,e){const n=(t.ORDER-It)/Ti,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function mU(t,e){e!==void 0&&Tr(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function uo(t,e,n=!1,r={}){if(t<=Ht)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const c=e;c.BITS&&(i=c.BITS),c.sqrt&&(s=c.sqrt),typeof c.isLE=="boolean"&&(n=c.isLE)}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:o,nByteLength:a}=mU(t,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:Ol(o),ZERO:Ht,ONE:It,create:c=>cn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ht<=c&&c<t},is0:c=>c===Ht,isValidNot0:c=>!l.is0(c)&&l.isValid(c),isOdd:c=>(c&It)===It,neg:c=>cn(-c,t),eql:(c,d)=>c===d,sqr:c=>cn(c*c,t),add:(c,d)=>cn(c+d,t),sub:(c,d)=>cn(c-d,t),mul:(c,d)=>cn(c*d,t),pow:(c,d)=>gU(l,c,d),div:(c,d)=>cn(c*dy(d,t),t),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>dy(c,t),sqrt:s||(c=>(u||(u=hU(t)),u(l,c))),toBytes:c=>n?Zp(c,a):Qp(c,a),fromBytes:c=>{if(c.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+c.length);return n?Gu(c):kl(c)},invertBatch:c=>o_(l,c),cmov:(c,d,h)=>h?d:c});return Object.freeze(l)}function a_(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function c_(t){const e=a_(t);return e+Math.ceil(e/2)}function yU(t,e,n=!1){const r=t.length,i=a_(e),s=c_(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?Gu(t):kl(t),a=cn(o,e-It)+It;return n?Zp(a,i):Qp(a,i)}const Qs=BigInt(0),Ri=BigInt(1);function zo(t,e){const n=e.negate();return t?n:e}function bU(t,e,n){const r=s=>s.pz,i=o_(t.Fp,n.map(r));return n.map((s,o)=>s.toAffine(i[o])).map(t.fromAffine)}function u_(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $d(t,e){u_(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=Ol(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function fy(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),u=t>>o;a>r&&(a-=s,u+=Ri);const l=e*r,c=l+Math.abs(a)-1,d=a===0,h=a<0,g=e%2!==0;return{nextN:u,offset:c,isZero:d,isNeg:h,isNegF:g,offsetF:l}}function wU(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function vU(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ud=new WeakMap,l_=new WeakMap;function Fd(t){return l_.get(t)||1}function py(t){if(t!==Qs)throw new Error("invalid wNAF")}function EU(t,e){return{constTimeNegate:zo,hasPrecomputes(n){return Fd(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>Qs;)r&Ri&&(i=i.add(s)),s=s.double(),r>>=Ri;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=$d(r,e),o=[];let a=n,u=a;for(let l=0;l<i;l++){u=a,o.push(u);for(let c=1;c<s;c++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(n,r,i){let s=t.ZERO,o=t.BASE;const a=$d(n,e);for(let u=0;u<a.windows;u++){const{nextN:l,offset:c,isZero:d,isNeg:h,isNegF:g,offsetF:f}=fy(i,u,a);i=l,d?o=o.add(zo(g,r[f])):s=s.add(zo(h,r[c]))}return py(i),{p:s,f:o}},wNAFUnsafe(n,r,i,s=t.ZERO){const o=$d(n,e);for(let a=0;a<o.windows&&i!==Qs;a++){const{nextN:u,offset:l,isZero:c,isNeg:d}=fy(i,a,o);if(i=u,!c){const h=r[l];s=s.add(d?h.negate():h)}}return py(i),s},getPrecomputes(n,r,i){let s=Ud.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&(typeof i=="function"&&(s=i(s)),Ud.set(r,s))),s},wNAFCached(n,r,i){const s=Fd(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Fd(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){u_(r,e),l_.set(n,r),Ud.delete(n)}}}function _U(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>Qs||r>Qs;)n&Ri&&(s=s.add(i)),r&Ri&&(o=o.add(i)),i=i.double(),n>>=Ri,r>>=Ri;return{p1:s,p2:o}}function AU(t,e,n,r){wU(n,t),vU(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=aU(BigInt(i));let u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);const l=Ol(u),c=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/u)*u;let h=o;for(let g=d;g>=0;g-=u){c.fill(o);for(let p=0;p<s;p++){const m=r[p],y=Number(m>>BigInt(g)&l);c[y]=c[y].add(n[p])}let f=o;for(let p=c.length-1,m=o;p>0;p--)m=m.add(c[p]),f=f.add(m);if(h=h.add(f),g!==0)for(let p=0;p<u;p++)h=h.double()}return h}function gy(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return pU(e),e}else return uo(t)}function xU(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>Qs))throw new Error(`CURVE.${o} must be positive bigint`)}const r=gy(e.p,n.Fp),i=gy(e.n,n.Fn),s=["Gx","Gy","a","b"];for(const o of s)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Io=BigInt(0),fs=BigInt(1),gc=BigInt(2);function IU(t){return Cl(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function SU(t){const e=IU(t),{P:n,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const u=o||co,l=a?255:448,c=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),g=a?gc**BigInt(254):gc**BigInt(447),f=a?BigInt(8)*gc**BigInt(251)-fs:BigInt(4)*gc**BigInt(445)-fs,p=g+f+fs,m=S=>cn(S,n),y=w(d);function w(S){return Zp(m(S),c)}function b(S){const T=Mt("u coordinate",S,c);return a&&(T[31]&=127),m(Gu(T))}function A(S){return Gu(i(Mt("scalar",S,c)))}function E(S,T){const B=x(b(T),A(S));if(B===Io)throw new Error("invalid private or public key received");return w(B)}function _(S){return E(S,y)}function R(S,T,B){const k=m(S*(T-B));return T=m(T-k),B=m(B+k),{x_2:T,x_3:B}}function x(S,T){sf("u",S,Io,n),sf("scalar",T,g,p);const B=T,k=S;let N=fs,M=Io,v=S,I=fs,P=Io;for(let O=BigInt(l-1);O>=Io;O--){const D=B>>O&fs;P^=D,{x_2:N,x_3:v}=R(P,N,v),{x_2:M,x_3:I}=R(P,M,I),P=D;const $=N+M,q=m($*$),V=N-M,H=m(V*V),W=q-H,X=v+I,he=v-I,me=m(he*$),ae=m(X*V),Te=me+ae,ze=me-ae;v=m(Te*Te),I=m(k*m(ze*ze)),N=m(q*H),M=m(W*(q+m(h*W)))}({x_2:N,x_3:v}=R(P,N,v)),{x_2:M,x_3:I}=R(P,M,I);const C=s(M);return m(N*C)}return{scalarMult:E,scalarMultBase:_,getSharedSecret:(S,T)=>E(S,T),getPublicKey:S=>_(S),utils:{randomPrivateKey:()=>u(c)},GuBytes:y.slice()}}BigInt(0);const TU=BigInt(1),my=BigInt(2),RU=BigInt(3),BU=BigInt(5);BigInt(8);const d_={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function PU(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=d_.p,o=t*t%s*t%s,a=An(o,my,s)*o%s,u=An(a,TU,s)*t%s,l=An(u,BU,s)*u%s,c=An(l,e,s)*l%s,d=An(c,n,s)*c%s,h=An(d,r,s)*d%s,g=An(h,i,s)*h%s,f=An(g,i,s)*h%s,p=An(f,e,s)*l%s;return{pow_p_5_8:An(p,my,s)*t%s,b2:o}}function kU(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const of=(()=>{const t=d_.p;return SU({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=PU(e);return cn(An(n,RU,t)*r,t)},adjustScalarBytes:kU})})();function yy(t){t.lowS!==void 0&&zu("lowS",t.lowS),t.prehash!==void 0&&zu("prehash",t.prehash)}class OU extends Error{constructor(e=""){super(e)}}const yr={Err:OU,_tlv:{encode:(t,e)=>{const{Err:n}=yr;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=pc(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?pc(i.length/2|128):"";return pc(t)+s+i+e},decode(t,e){const{Err:n}=yr;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new n("tlv.decode(long): indefinite length not supported");if(u>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+u);if(l.length!==u)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const c of l)o=o<<8|c;if(r+=u,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=yr;if(t<Go)throw new e("integer: negative integers are not allowed");let n=pc(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=yr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return kl(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=yr,i=Mt("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:u}=r.decode(2,s),{v:l,l:c}=r.decode(2,u);if(c.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=yr,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Go=BigInt(0),Vo=BigInt(1),CU=BigInt(2),mc=BigInt(3),DU=BigInt(4);function NU(t,e,n){function r(i){const s=t.sqr(i),o=t.mul(s,i);return t.add(t.add(o,t.mul(i,e)),n)}return r}function h_(t,e,n){const{BYTES:r}=t;function i(s){let o;if(typeof s=="bigint")o=s;else{let a=Mt("private key",s);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const u=new Uint8Array(r);u.set(a,u.length-a.length),a=u}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof s}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function MU(t,e={}){const{Fp:n,Fn:r}=xU("weierstrass",t,e),{h:i,n:s}=t;Cl(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function u(x,S,T){const{x:B,y:k}=S.toAffine(),N=n.toBytes(B);if(zu("isCompressed",T),T){a();const M=!n.isOdd(k);return Si(f_(M),N)}else return Si(Uint8Array.of(4),N,n.toBytes(k))}function l(x){pn(x);const S=n.BYTES,T=S+1,B=2*S+1,k=x.length,N=x[0],M=x.subarray(1);if(k===T&&(N===2||N===3)){const v=n.fromBytes(M);if(!n.isValid(v))throw new Error("bad point: is not on curve, wrong x");const I=h(v);let P;try{P=n.sqrt(I)}catch(O){const D=O instanceof Error?": "+O.message:"";throw new Error("bad point: is not on curve, sqrt error"+D)}a();const C=n.isOdd(P);return(N&1)===1!==C&&(P=n.neg(P)),{x:v,y:P}}else if(k===B&&N===4){const v=n.fromBytes(M.subarray(S*0,S*1)),I=n.fromBytes(M.subarray(S*1,S*2));if(!g(v,I))throw new Error("bad point: is not on curve");return{x:v,y:I}}else throw new Error(`bad point: got length ${k}, expected compressed=${T} or uncompressed=${B}`)}const c=e.toBytes||u,d=e.fromBytes||l,h=NU(n,t.a,t.b);function g(x,S){const T=n.sqr(S),B=h(x);return n.eql(T,B)}if(!g(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const f=n.mul(n.pow(t.a,mc),DU),p=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(f,p)))throw new Error("bad curve params: a or b");function m(x,S,T=!1){if(!n.isValid(S)||T&&n.is0(S))throw new Error(`bad point coordinate ${x}`);return S}function y(x){if(!(x instanceof E))throw new Error("ProjectivePoint expected")}const w=ly((x,S)=>{const{px:T,py:B,pz:k}=x;if(n.eql(k,n.ONE))return{x:T,y:B};const N=x.is0();S==null&&(S=N?n.ONE:n.inv(k));const M=n.mul(T,S),v=n.mul(B,S),I=n.mul(k,S);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:M,y:v}}),b=ly(x=>{if(x.is0()){if(e.allowInfinityPoint&&!n.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:S,y:T}=x.toAffine();if(!n.isValid(S)||!n.isValid(T))throw new Error("bad point: x or y not field elements");if(!g(S,T))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(x,S,T,B,k){return T=new E(n.mul(T.px,x),T.py,T.pz),S=zo(B,S),T=zo(k,T),S.add(T)}class E{constructor(S,T,B){this.px=m("x",S),this.py=m("y",T,!0),this.pz=m("z",B),Object.freeze(this)}static fromAffine(S){const{x:T,y:B}=S||{};if(!S||!n.isValid(T)||!n.isValid(B))throw new Error("invalid affine point");if(S instanceof E)throw new Error("projective point not allowed");return n.is0(T)&&n.is0(B)?E.ZERO:new E(T,B,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return bU(E,"pz",S)}static fromBytes(S){return pn(S),E.fromHex(S)}static fromHex(S){const T=E.fromAffine(d(Mt("pointHex",S)));return T.assertValidity(),T}static fromPrivateKey(S){const T=h_(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return E.BASE.multiply(T(S))}static msm(S,T){return AU(E,r,S,T)}precompute(S=8,T=!0){return R.setWindowSize(this,S),T||this.multiply(mc),this}_setWindowSize(S){this.precompute(S)}assertValidity(){b(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:T,py:B,pz:k}=this,{px:N,py:M,pz:v}=S,I=n.eql(n.mul(T,v),n.mul(N,k)),P=n.eql(n.mul(B,v),n.mul(M,k));return I&&P}negate(){return new E(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:T}=t,B=n.mul(T,mc),{px:k,py:N,pz:M}=this;let v=n.ZERO,I=n.ZERO,P=n.ZERO,C=n.mul(k,k),O=n.mul(N,N),D=n.mul(M,M),$=n.mul(k,N);return $=n.add($,$),P=n.mul(k,M),P=n.add(P,P),v=n.mul(S,P),I=n.mul(B,D),I=n.add(v,I),v=n.sub(O,I),I=n.add(O,I),I=n.mul(v,I),v=n.mul($,v),P=n.mul(B,P),D=n.mul(S,D),$=n.sub(C,D),$=n.mul(S,$),$=n.add($,P),P=n.add(C,C),C=n.add(P,C),C=n.add(C,D),C=n.mul(C,$),I=n.add(I,C),D=n.mul(N,M),D=n.add(D,D),C=n.mul(D,$),v=n.sub(v,C),P=n.mul(D,O),P=n.add(P,P),P=n.add(P,P),new E(v,I,P)}add(S){y(S);const{px:T,py:B,pz:k}=this,{px:N,py:M,pz:v}=S;let I=n.ZERO,P=n.ZERO,C=n.ZERO;const O=t.a,D=n.mul(t.b,mc);let $=n.mul(T,N),q=n.mul(B,M),V=n.mul(k,v),H=n.add(T,B),W=n.add(N,M);H=n.mul(H,W),W=n.add($,q),H=n.sub(H,W),W=n.add(T,k);let X=n.add(N,v);return W=n.mul(W,X),X=n.add($,V),W=n.sub(W,X),X=n.add(B,k),I=n.add(M,v),X=n.mul(X,I),I=n.add(q,V),X=n.sub(X,I),C=n.mul(O,W),I=n.mul(D,V),C=n.add(I,C),I=n.sub(q,C),C=n.add(q,C),P=n.mul(I,C),q=n.add($,$),q=n.add(q,$),V=n.mul(O,V),W=n.mul(D,W),q=n.add(q,V),V=n.sub($,V),V=n.mul(O,V),W=n.add(W,V),$=n.mul(q,W),P=n.add(P,$),$=n.mul(X,W),I=n.mul(H,I),I=n.sub(I,$),$=n.mul(H,q),C=n.mul(X,C),C=n.add(C,$),new E(I,P,C)}subtract(S){return this.add(S.negate())}is0(){return this.equals(E.ZERO)}multiply(S){const{endo:T}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let B,k;const N=M=>R.wNAFCached(this,M,E.normalizeZ);if(T){const{k1neg:M,k1:v,k2neg:I,k2:P}=T.splitScalar(S),{p:C,f:O}=N(v),{p:D,f:$}=N(P);k=O.add($),B=A(T.beta,C,D,M,I)}else{const{p:M,f:v}=N(S);B=M,k=v}return E.normalizeZ([B,k])[0]}multiplyUnsafe(S){const{endo:T}=e,B=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===Go||B.is0())return E.ZERO;if(S===Vo)return B;if(R.hasPrecomputes(this))return this.multiply(S);if(T){const{k1neg:k,k1:N,k2neg:M,k2:v}=T.splitScalar(S),{p1:I,p2:P}=_U(E,B,N,v);return A(T.beta,I,P,k,M)}else return R.wNAFCachedUnsafe(B,S)}multiplyAndAddUnsafe(S,T,B){const k=this.multiplyUnsafe(T).add(S.multiplyUnsafe(B));return k.is0()?void 0:k}toAffine(S){return w(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return i===Vo?!0:S?S(E,this):R.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:S}=e;return i===Vo?this:S?S(E,this):this.multiplyUnsafe(i)}toBytes(S=!0){return zu("isCompressed",S),this.assertValidity(),c(E,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return Ta(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}E.BASE=new E(t.Gx,t.Gy,n.ONE),E.ZERO=new E(n.ZERO,n.ONE,n.ZERO),E.Fp=n,E.Fn=r;const _=r.BITS,R=EU(E,e.endo?Math.ceil(_/2):_);return E}function f_(t){return Uint8Array.of(t?2:3)}function LU(t,e,n={}){Cl(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||co,i=e.hmac||((B,...k)=>Bl(e.hash,B,Si(...k))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:u}=o;function l(B){const k=a>>Vo;return B>k}function c(B){return l(B)?o.neg(B):B}function d(B,k){if(!o.isValidNot0(k))throw new Error(`invalid signature ${B}: out of range 1..CURVE.n`)}class h{constructor(k,N,M){d("r",k),d("s",N),this.r=k,this.s=N,M!=null&&(this.recovery=M),Object.freeze(this)}static fromCompact(k){const N=o.BYTES,M=Mt("compactSignature",k,N*2);return new h(o.fromBytes(M.subarray(0,N)),o.fromBytes(M.subarray(N,N*2)))}static fromDER(k){const{r:N,s:M}=yr.toSig(Mt("DER",k));return new h(N,M)}assertValidity(){}addRecoveryBit(k){return new h(this.r,this.s,k)}recoverPublicKey(k){const N=s.ORDER,{r:M,s:v,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(a*CU<N&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const P=I===2||I===3?M+a:M;if(!s.isValid(P))throw new Error("recovery id 2 or 3 invalid");const C=s.toBytes(P),O=t.fromHex(Si(f_((I&1)===0),C)),D=o.inv(P),$=b(Mt("msgHash",k)),q=o.create(-$*D),V=o.create(v*D),H=t.BASE.multiplyUnsafe(q).add(O.multiplyUnsafe(V));if(H.is0())throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(k){if(k==="compact")return Si(o.toBytes(this.r),o.toBytes(this.s));if(k==="der")return Gp(yr.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ta(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ta(this.toBytes("compact"))}}const g=h_(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),f={isValidPrivateKey(B){try{return g(B),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const B=a;return yU(r(c_(B)),B)},precompute(B=8,k=t.BASE){return k.precompute(B,!1)}};function p(B,k=!0){return t.fromPrivateKey(B).toBytes(k)}function m(B){if(typeof B=="bigint")return!1;if(B instanceof t)return!0;const k=Mt("key",B).length,N=s.BYTES,M=N+1,v=2*N+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===M))return k===M||k===v}function y(B,k,N=!0){if(m(B)===!0)throw new Error("first arg must be private key");if(m(k)===!1)throw new Error("second arg must be public key");return t.fromHex(k).multiply(g(B)).toBytes(N)}const w=e.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const k=kl(B),N=B.length*8-u;return N>0?k>>BigInt(N):k},b=e.bits2int_modN||function(B){return o.create(w(B))},A=Ol(u);function E(B){return sf("num < 2^"+u,B,Go,A),o.toBytes(B)}function _(B,k,N=R){if(["recovered","canonical"].some(H=>H in N))throw new Error("sign() legacy options not supported");const{hash:M}=e;let{lowS:v,prehash:I,extraEntropy:P}=N;v==null&&(v=!0),B=Mt("msgHash",B),yy(N),I&&(B=Mt("prehashed msgHash",M(B)));const C=b(B),O=g(k),D=[E(O),E(C)];if(P!=null&&P!==!1){const H=P===!0?r(s.BYTES):P;D.push(Mt("extraEntropy",H))}const $=Si(...D),q=C;function V(H){const W=w(H);if(!o.isValidNot0(W))return;const X=o.inv(W),he=t.BASE.multiply(W).toAffine(),me=o.create(he.x);if(me===Go)return;const ae=o.create(X*o.create(q+me*O));if(ae===Go)return;let Te=(he.x===me?0:2)|Number(he.y&Vo),ze=ae;return v&&l(ae)&&(ze=c(ae),Te^=1),new h(me,ze,Te)}return{seed:$,k2sig:V}}const R={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};function S(B,k,N=R){const{seed:M,k2sig:v}=_(B,k,N);return cU(e.hash.outputLen,o.BYTES,i)(M,v)}t.BASE.precompute(8);function T(B,k,N,M=x){const v=B;k=Mt("msgHash",k),N=Mt("publicKey",N),yy(M);const{lowS:I,prehash:P,format:C}=M;if("strict"in M)throw new Error("options.strict was renamed to lowS");if(C!==void 0&&!["compact","der","js"].includes(C))throw new Error('format must be "compact", "der" or "js"');const O=typeof v=="string"||qp(v),D=!O&&!C&&typeof v=="object"&&v!==null&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!O&&!D)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let $,q;try{if(D)if(C===void 0||C==="js")$=new h(v.r,v.s);else throw new Error("invalid format");if(O){try{C!=="compact"&&($=h.fromDER(v))}catch(Te){if(!(Te instanceof yr.Err))throw Te}!$&&C!=="der"&&($=h.fromCompact(v))}q=t.fromHex(N)}catch{return!1}if(!$||I&&$.hasHighS())return!1;P&&(k=e.hash(k));const{r:V,s:H}=$,W=b(k),X=o.inv(H),he=o.create(W*X),me=o.create(V*X),ae=t.BASE.multiplyUnsafe(he).add(q.multiplyUnsafe(me));return ae.is0()?!1:o.create(ae.x)===V}return Object.freeze({getPublicKey:p,getSharedSecret:y,sign:S,verify:T,utils:f,Point:t,Signature:h})}function $U(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=uo(e.n,t.nBitLength),i={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function UU(t){const{CURVE:e,curveOpts:n}=$U(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function FU(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function jU(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=UU(t),i=MU(e,n),s=LU(i,r,n);return FU(t,s)}function af(t,e){const n=r=>jU({...t,hash:r});return{...n(e),create:n}}const p_={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},g_={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},m_={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},qU=uo(p_.p),HU=uo(g_.p),zU=uo(m_.p),GU=af({...p_,Fp:qU,lowS:!1},Rl);af({...g_,Fp:HU,lowS:!1},XL),af({...m_,Fp:zU,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},YL);const VU=GU,y_="base10",St="base16",Tn="base64pad",Vr="base64url",Qa="utf8",b_=0,Er=1,Za=2,KU=0,by=1,Ko=12,Jp=32;function WU(){const t=of.utils.randomPrivateKey(),e=of.getPublicKey(t);return{privateKey:zt(t,St),publicKey:zt(e,St)}}function cf(){const t=co(Jp);return zt(t,St)}function QU(t,e){const n=of.getSharedSecret(fn(t,St),fn(e,St)),r=sU(Pl,n,void 0,void 0,Jp);return zt(r,St)}function Dc(t){const e=Pl(fn(t,St));return zt(e,St)}function Hn(t){const e=Pl(fn(t,Qa));return zt(e,St)}function w_(t){return fn(`${t}`,y_)}function Ji(t){return Number(zt(t,y_))}function v_(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function E_(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function ZU(t){const e=w_(typeof t.type<"u"?t.type:b_);if(Ji(e)===Er&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?fn(t.senderPublicKey,St):void 0,r=typeof t.iv<"u"?fn(t.iv,St):co(Ko),i=fn(t.symKey,St),s=XE(i,r).encrypt(fn(t.message,Qa)),o=__({type:e,sealed:s,iv:r,senderPublicKey:n});return t.encoding===Vr?v_(o):o}function JU(t){const e=fn(t.symKey,St),{sealed:n,iv:r}=Ba({encoded:t.encoded,encoding:t.encoding}),i=XE(e,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return zt(i,Qa)}function YU(t,e){const n=w_(Za),r=co(Ko),i=fn(t,Qa),s=__({type:n,sealed:i,iv:r});return e===Vr?v_(s):s}function XU(t,e){const{sealed:n}=Ba({encoded:t,encoding:e});return zt(n,Qa)}function __(t){if(Ji(t.type)===Za)return zt(Ho([t.type,t.sealed]),Tn);if(Ji(t.type)===Er){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return zt(Ho([t.type,t.senderPublicKey,t.iv,t.sealed]),Tn)}return zt(Ho([t.type,t.iv,t.sealed]),Tn)}function Ba(t){const e=(t.encoding||Tn)===Vr?E_(t.encoded):t.encoded,n=fn(e,Tn),r=n.slice(KU,by),i=by;if(Ji(r)===Er){const u=i+Jp,l=u+Ko,c=n.slice(i,u),d=n.slice(u,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:c}}if(Ji(r)===Za){const u=n.slice(i),l=co(Ko);return{type:r,sealed:u,iv:l}}const s=i+Ko,o=n.slice(i,s),a=n.slice(s);return{type:r,sealed:a,iv:o}}function eF(t,e){const n=Ba({encoded:t,encoding:e?.encoding});return A_({type:Ji(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?zt(n.senderPublicKey,St):void 0,receiverPublicKey:e?.receiverPublicKey})}function A_(t){const e=t?.type||b_;if(e===Er){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function wy(t){return t.type===Er&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function vy(t){return t.type===Za}function tF(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Ho([new Uint8Array([4]),e,n])}function nF(t,e){const[n,r,i]=t.split("."),s=Buffer.from(E_(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),u=`${n}.${r}`,l=Pl(u),c=tF(e);if(!VU.verify(Ho([o,a]),l,c))throw new Error("Invalid signature");return qh(t).payload}const rF="irn";function Vu(t){return t?.relay||{protocol:rF}}function No(t){const e=UM[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function iF(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=t[i];n[s]=o}}),n}function Ey(t){if(!t.includes("wc:")){const l=DE(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),i=t.substring(e+1,n).split("@"),s=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(s),a={};o.forEach((l,c)=>{a[c]=l});const u=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:sF(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:iF(a),methods:u,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function sF(t){return t.startsWith("//")?t.substring(2):t}function oF(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(i=>{const s=i,o=n+e+s;t[s]&&(r[o]=t[s])}),r}function _y(t){const e=new URLSearchParams,n=oF(t.relay);Object.keys(n).sort().forEach(i=>{e.set(i,n[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function yc(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var aF=Object.defineProperty,cF=Object.defineProperties,uF=Object.getOwnPropertyDescriptors,Ay=Object.getOwnPropertySymbols,lF=Object.prototype.hasOwnProperty,dF=Object.prototype.propertyIsEnumerable,xy=(t,e,n)=>e in t?aF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hF=(t,e)=>{for(var n in e||(e={}))lF.call(e,n)&&xy(t,n,e[n]);if(Ay)for(var n of Ay(e))dF.call(e,n)&&xy(t,n,e[n]);return t},fF=(t,e)=>cF(t,uF(e));function lo(t){const e=[];return t.forEach(n=>{const[r,i]=n.split(":");e.push(`${r}:${i}`)}),e}function pF(t){const e=[];return Object.values(t).forEach(n=>{e.push(...lo(n.accounts))}),e}function gF(t,e){const n=[];return Object.values(t).forEach(r=>{lo(r.accounts).includes(e)&&n.push(...r.methods)}),n}function mF(t,e){const n=[];return Object.values(t).forEach(r=>{lo(r.accounts).includes(e)&&n.push(...r.events)}),n}function x_(t){return t.includes(":")}function yF(t){return x_(t)?t.split(":")[0]:t}function Iy(t){var e,n,r;const i={};if(!Pa(t))return i;for(const[s,o]of Object.entries(t)){const a=x_(s)?[s]:o.chains,u=o.methods||[],l=o.events||[],c=yF(s);i[c]=fF(hF({},i[c]),{chains:Li(a,(e=i[c])==null?void 0:e.chains),methods:Li(u,(n=i[c])==null?void 0:n.methods),events:Li(l,(r=i[c])==null?void 0:r.events)})}return i}function bF(t){const e={};return t?.forEach(n=>{var r;const[i,s]=n.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(n),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function Sy(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=bF(e);for(const[r,i]of Object.entries(n))i.methods?i.methods=Li(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}function wF(t,e){var n,r,i,s,o,a;const u=Iy(t),l=Iy(e),c={},d=Object.keys(u).concat(Object.keys(l));for(const h of d)c[h]={chains:Li((n=u[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Li((i=u[h])==null?void 0:i.methods,(s=l[h])==null?void 0:s.methods),events:Li((o=u[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return c}const vF={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},EF={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function z(t,e){const{message:n,code:r}=EF[t];return{message:e?`${n} ${e}`:n,code:r}}function Fe(t,e){const{message:n,code:r}=vF[t];return{message:e?`${n} ${e}`:n,code:r}}function Zs(t,e){return!!Array.isArray(t)}function Pa(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function dt(t){return typeof t>"u"}function Ke(t,e){return e&&dt(t)?!0:typeof t=="string"&&!!t.trim().length}function Yp(t,e){return e&&dt(t)?!0:typeof t=="number"&&!isNaN(t)}function _F(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),i=Object.keys(n);let s=!0;return Ii(i,r)?(r.forEach(o=>{const{accounts:a,methods:u,events:l}=t.namespaces[o],c=lo(a),d=n[o];(!Ii(BE(o,d),c)||!Ii(d.methods,u)||!Ii(d.events,l))&&(s=!1)}),s):!1}function Ku(t){return Ke(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function AF(t){if(Ke(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Ku(n)}}return!1}function xF(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Ke(t,!1)){if(e(t))return!0;const n=DE(t);return e(n)}}catch{}return!1}function IF(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function SF(t){return t?.topic}function TF(t,e){let n=null;return Ke(t?.publicKey,!1)||(n=z("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function Ty(t){let e=!0;return Zs(t)?t.length&&(e=t.every(n=>Ke(n,!1))):e=!1,e}function RF(t,e,n){let r=null;return Zs(e)&&e.length?e.forEach(i=>{r||Ku(i)||(r=Fe("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Ku(t)||(r=Fe("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function BF(t,e,n){let r=null;return Object.entries(t).forEach(([i,s])=>{if(r)return;const o=RF(i,BE(i,s),`${e} ${n}`);o&&(r=o)}),r}function PF(t,e){let n=null;return Zs(t)?t.forEach(r=>{n||AF(r)||(n=Fe("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Fe("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function kF(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=PF(r?.accounts,`${e} namespace`);i&&(n=i)}),n}function OF(t,e){let n=null;return Ty(t?.methods)?Ty(t?.events)||(n=Fe("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Fe("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function I_(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=OF(r,`${e}, namespace`);i&&(n=i)}),n}function CF(t,e,n){let r=null;if(t&&Pa(t)){const i=I_(t,e);i&&(r=i);const s=BF(t,e,n);s&&(r=s)}else r=z("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function jd(t,e){let n=null;if(t&&Pa(t)){const r=I_(t,e);r&&(n=r);const i=kF(t,e);i&&(n=i)}else n=z("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function S_(t){return Ke(t.protocol,!0)}function DF(t,e){let n=!1;return t?t&&Zs(t)&&t.length&&t.forEach(r=>{n=S_(r)}):n=!0,n}function NF(t){return typeof t=="number"}function Nt(t){return typeof t<"u"&&typeof t!==null}function MF(t){return!(!t||typeof t!="object"||!t.code||!Yp(t.code,!1)||!t.message||!Ke(t.message,!1))}function LF(t){return!(dt(t)||!Ke(t.method,!1))}function $F(t){return!(dt(t)||dt(t.result)&&dt(t.error)||!Yp(t.id,!1)||!Ke(t.jsonrpc,!1))}function UF(t){return!(dt(t)||!Ke(t.name,!1))}function Ry(t,e){return!(!Ku(e)||!pF(t).includes(e))}function FF(t,e,n){return Ke(n,!1)?gF(t,e).includes(n):!1}function jF(t,e,n){return Ke(n,!1)?mF(t,e).includes(n):!1}function By(t,e,n){let r=null;const i=qF(t),s=HF(e),o=Object.keys(i),a=Object.keys(s),u=Py(Object.keys(t)),l=Py(Object.keys(e)),c=u.filter(d=>!l.includes(d));return c.length&&(r=z("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${c.toString()}
      Received: ${Object.keys(e).toString()}`)),Ii(o,a)||(r=z("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=lo(e[d].accounts);h.includes(d)||(r=z("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Ii(i[d].methods,s[d].methods)?Ii(i[d].events,s[d].events)||(r=z("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=z("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function qF(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(i=>{e[i]={methods:t[n].methods,events:t[n].events}})}),e}function Py(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function HF(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:lo(t[n].accounts)?.forEach(i=>{e[i]={accounts:t[n].accounts.filter(s=>s.includes(`${i}:`)),methods:t[n].methods,events:t[n].events}})}),e}function zF(t,e){return Yp(t,!1)&&t<=e.max&&t>=e.min}function ky(){const t=Ka();return new Promise(e=>{switch(t){case Zt.browser:e(GF());break;case Zt.reactNative:e(VF());break;case Zt.node:e(KF());break;default:e(!0)}})}function GF(){return ao()&&navigator?.onLine}async function VF(){return ci()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function KF(){return!0}function WF(t){switch(Ka()){case Zt.browser:QF(t);break;case Zt.reactNative:ZF(t);break}}function QF(t){!ci()&&ao()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function ZF(t){ci()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function JF(){var t;return ao()&&Sr.getDocument()?((t=Sr.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const qd={};class So{static get(e){return qd[e]}static set(e,n){qd[e]=n}static delete(e){delete qd[e]}}function YF(t){const e=Ga.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function XF({publicKey:t,signature:e,payload:n}){var r;const i=uf(n.method),s=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=n9(n.address),a=n.era==="00"?new Uint8Array([0]):uf(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const u=parseInt(n.nonce,16),l=new Uint8Array([u&255,u>>8&255]),c=BigInt(`0x${t9(n.tip)}`),d=i9(c),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...i]),g=r9(h.length+1);return new Uint8Array([...g,s,...h])}function e9(t){const e=uf(t),n=HM.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function uf(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function t9(t){return t.startsWith("0x")?t.slice(2):t}function n9(t){const e=Ga.decode(t)[0];return e===42?0:e===60?2:1}function r9(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function i9(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function s9(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=YF(t.transaction.address),r=XF({publicKey:n,signature:e,payload:t.transaction}),i=Buffer.from(r).toString("hex");return e9(i)}const o9="PARSE_ERROR",a9="INVALID_REQUEST",c9="METHOD_NOT_FOUND",u9="INVALID_PARAMS",T_="INTERNAL_ERROR",Xp="SERVER_ERROR",l9=[-32700,-32600,-32601,-32602,-32603],Wo={[o9]:{code:-32700,message:"Parse error"},[a9]:{code:-32600,message:"Invalid Request"},[c9]:{code:-32601,message:"Method not found"},[u9]:{code:-32602,message:"Invalid params"},[T_]:{code:-32603,message:"Internal error"},[Xp]:{code:-32e3,message:"Server error"}},R_=Xp;function d9(t){return l9.includes(t)}function Oy(t){return Object.keys(Wo).includes(t)?Wo[t]:Wo[R_]}function h9(t){const e=Object.values(Wo).find(n=>n.code===t);return e||Wo[R_]}function f9(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Hd={},ur={},Cy;function p9(){if(Cy)return ur;Cy=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.isBrowserCryptoAvailable=ur.getSubtleCrypto=ur.getBrowerCrypto=void 0;function t(){return un?.crypto||un?.msCrypto||{}}ur.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}ur.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return ur.isBrowserCryptoAvailable=n,ur}var lr={},Dy;function g9(){if(Dy)return lr;Dy=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.isBrowser=lr.isNode=lr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}lr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}lr.isNode=e;function n(){return!t()&&!e()}return lr.isBrowser=n,lr}var Ny;function m9(){return Ny||(Ny=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ja;e.__exportStar(p9(),t),e.__exportStar(g9(),t)}(Hd)),Hd}var y9=m9();function Un(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Bi(t=6){return BigInt(Un(t))}function Pi(t,e,n){return{id:n||Un(),jsonrpc:"2.0",method:t,params:e}}function eg(t,e){return{id:t,jsonrpc:"2.0",result:e}}function tg(t,e,n){return{id:t,jsonrpc:"2.0",error:b9(e)}}function b9(t,e){return typeof t>"u"?Oy(T_):(typeof t=="string"&&(t=Object.assign(Object.assign({},Oy(Xp)),{message:t})),d9(t.code)&&(t=h9(t.code)),t)}class w9{}class v9 extends w9{constructor(){super()}}class E9 extends v9{constructor(e){super()}}const _9="^wss?:";function A9(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function x9(t,e){const n=A9(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function My(t){return x9(t,_9)}function I9(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function B_(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ng(t){return B_(t)&&"method"in t}function Dl(t){return B_(t)&&(Fn(t)||an(t))}function Fn(t){return"result"in t}function an(t){return"error"in t}let S9=class extends E9{constructor(e){super(e),this.events=new On.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Pi(e.method,e.params||[],e.id||Bi().toString()),n)}async requestStrict(e,n){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{an(s)?i(s.error):r(s.result)});try{await this.connection.send(e,n)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Dl(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const T9=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),R9=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Ly=t=>t.split("?")[0],$y=10,B9=T9();let P9=class{constructor(e){if(this.url=e,this.events=new On.EventEmitter,this.registering=!1,!My(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Wi(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!My(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const i=y9.isReactNative()?void 0:{rejectUnauthorized:!I9(e)},s=new B9(e,[],i);R9()?s.onerror=o=>{const a=o;r(this.emitError(a.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),n(s)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ks(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),i=r.message||r.toString(),s=tg(e,i);this.events.emit("payload",s)}parseError(e,n=this.url){return f9(e,Ly(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>$y&&this.events.setMaxListeners($y)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Ly(this.url)}`));return this.events.emit("register_error",n),n}};var k9={};const P_="wc",k_=2,lf="core",Yn=`${P_}@2:${lf}:`,O9={logger:"error"},C9={database:":memory:"},D9="crypto",Uy="client_ed25519_seed",N9=G.ONE_DAY,M9="keychain",L9="0.3",$9="messages",U9="0.3",Fy=G.SIX_HOURS,F9="publisher",O_="irn",j9="error",C_="wss://relay.walletconnect.org",q9="relayer",it={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},H9="_subscription",rn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},z9=.1,df="2.21.4",Me={link_mode:"link_mode",relay:"relay"},Nc={inbound:"inbound",outbound:"outbound"},G9="0.3",V9="WALLETCONNECT_CLIENT_ID",jy="WALLETCONNECT_LINK_MODE_APPS",Wt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},K9="subscription",W9="0.3",Q9="pairing",Z9="0.3",To={wc_pairingDelete:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:G.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:G.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:G.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:G.ONE_DAY,prompt:!1,tag:0},res:{ttl:G.ONE_DAY,prompt:!1,tag:0}}},wi={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},vn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},J9="history",Y9="0.3",X9="expirer",sn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},e7="0.3",t7="verify-api",n7="https://verify.walletconnect.com",D_="https://verify.walletconnect.org",Qo=D_,r7=`${Qo}/v3`,i7=[n7,D_],s7="echo",o7="https://echo.walletconnect.com",$n={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},fr={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},En={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},fi={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},pi={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ro={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},a7=.1,c7="event-client",u7=86400,l7="https://pulse.walletconnect.org/batch";function d7(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,m=0,y=0,w=f.length;y!==w&&f[y]===0;)y++,p++;for(var b=(w-y)*c+1>>>0,A=new Uint8Array(b);y!==w;){for(var E=f[y],_=0,R=b-1;(E!==0||_<m)&&R!==-1;R--,_++)E+=256*A[R]>>>0,A[R]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");m=_,y++}for(var x=b-m;x!==b&&A[x]===0;)x++;for(var S=u.repeat(p);x<b;++x)S+=t.charAt(A[x]);return S}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var p=0;if(f[p]!==" "){for(var m=0,y=0;f[p]===u;)m++,p++;for(var w=(f.length-p)*l+1>>>0,b=new Uint8Array(w);f[p];){var A=n[f.charCodeAt(p)];if(A===255)return;for(var E=0,_=w-1;(A!==0||E<y)&&_!==-1;_--,E++)A+=a*b[_]>>>0,b[_]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=E,p++}if(f[p]!==" "){for(var R=w-y;R!==w&&b[R]===0;)R++;for(var x=new Uint8Array(m+(w-R)),S=m;R!==w;)x[S++]=b[R++];return x}}}function g(f){var p=h(f);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:g}}var h7=d7,f7=h7;const N_=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},p7=t=>new TextEncoder().encode(t),g7=t=>new TextDecoder().decode(t);class m7{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class y7{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return M_(this,e)}}class b7{constructor(e){this.decoders=e}or(e){return M_(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const M_=(t,e)=>new b7({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class w7{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new m7(e,n,r),this.decoder=new y7(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Nl=({name:t,prefix:e,encode:n,decode:r})=>new w7(t,e,n,r),Ja=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=f7(n,e);return Nl({prefix:t,name:e,encode:r,decode:s=>N_(i(s))})},v7=(t,e,n,r)=>{const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,u=0,l=0;for(let c=0;c<s;++c){const d=i[t[c]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},E7=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},pt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Nl({prefix:e,name:t,encode(i){return E7(i,r,n)},decode(i){return v7(i,r,n,t)}}),_7=Nl({prefix:"\0",name:"identity",encode:t=>g7(t),decode:t=>p7(t)});var A7=Object.freeze({__proto__:null,identity:_7});const x7=pt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var I7=Object.freeze({__proto__:null,base2:x7});const S7=pt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var T7=Object.freeze({__proto__:null,base8:S7});const R7=Ja({prefix:"9",name:"base10",alphabet:"0123456789"});var B7=Object.freeze({__proto__:null,base10:R7});const P7=pt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),k7=pt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var O7=Object.freeze({__proto__:null,base16:P7,base16upper:k7});const C7=pt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),D7=pt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),N7=pt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),M7=pt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),L7=pt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$7=pt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),U7=pt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),F7=pt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j7=pt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var q7=Object.freeze({__proto__:null,base32:C7,base32upper:D7,base32pad:N7,base32padupper:M7,base32hex:L7,base32hexupper:$7,base32hexpad:U7,base32hexpadupper:F7,base32z:j7});const H7=Ja({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z7=Ja({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var G7=Object.freeze({__proto__:null,base36:H7,base36upper:z7});const V7=Ja({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),K7=Ja({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var W7=Object.freeze({__proto__:null,base58btc:V7,base58flickr:K7});const Q7=pt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Z7=pt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),J7=pt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Y7=pt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var X7=Object.freeze({__proto__:null,base64:Q7,base64pad:Z7,base64url:J7,base64urlpad:Y7});const L_=Array.from(""),ej=L_.reduce((t,e,n)=>(t[n]=e,t),[]),tj=L_.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function nj(t){return t.reduce((e,n)=>(e+=ej[n],e),"")}function rj(t){const e=[];for(const n of t){const r=tj[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const ij=Nl({prefix:"",name:"base256emoji",encode:nj,decode:rj});var sj=Object.freeze({__proto__:null,base256emoji:ij}),oj=$_,qy=128,aj=-128,cj=Math.pow(2,31);function $_(t,e,n){e=e||[],n=n||0;for(var r=n;t>=cj;)e[n++]=t&255|qy,t/=128;for(;t&aj;)e[n++]=t&255|qy,t>>>=7;return e[n]=t|0,$_.bytes=n-r+1,e}var uj=hf,lj=128,Hy=127;function hf(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw hf.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&Hy)<<i:(o&Hy)*Math.pow(2,i),i+=7}while(o>=lj);return hf.bytes=s-r,n}var dj=Math.pow(2,7),hj=Math.pow(2,14),fj=Math.pow(2,21),pj=Math.pow(2,28),gj=Math.pow(2,35),mj=Math.pow(2,42),yj=Math.pow(2,49),bj=Math.pow(2,56),wj=Math.pow(2,63),vj=function(t){return t<dj?1:t<hj?2:t<fj?3:t<pj?4:t<gj?5:t<mj?6:t<yj?7:t<bj?8:t<wj?9:10},Ej={encode:oj,decode:uj,encodingLength:vj},U_=Ej;const zy=(t,e,n=0)=>(U_.encode(t,e,n),e),Gy=t=>U_.encodingLength(t),ff=(t,e)=>{const n=e.byteLength,r=Gy(t),i=r+Gy(n),s=new Uint8Array(i+n);return zy(t,s,0),zy(n,s,r),s.set(e,i),new _j(t,n,e,s)};class _j{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}}const F_=({name:t,code:e,encode:n})=>new Aj(t,e,n);class Aj{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?ff(this.code,n):n.then(r=>ff(this.code,r))}else throw Error("Unknown type, must be binary type")}}const j_=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),xj=F_({name:"sha2-256",code:18,encode:j_("SHA-256")}),Ij=F_({name:"sha2-512",code:19,encode:j_("SHA-512")});var Sj=Object.freeze({__proto__:null,sha256:xj,sha512:Ij});const q_=0,Tj="identity",H_=N_,Rj=t=>ff(q_,H_(t)),Bj={code:q_,name:Tj,encode:H_,digest:Rj};var Pj=Object.freeze({__proto__:null,identity:Bj});new TextEncoder,new TextDecoder;const Vy={...A7,...I7,...T7,...B7,...O7,...q7,...G7,...W7,...X7,...sj};({...Sj,...Pj});function z_(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function kj(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?z_(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function G_(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Ky=G_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),zd=G_("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=kj(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Oj={utf8:Ky,"utf-8":Ky,hex:Vy.base16,latin1:zd,ascii:zd,binary:zd,...Vy};function Cj(t,e="utf8"){const n=Oj[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?z_(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var Dj=Object.defineProperty,Nj=(t,e,n)=>e in t?Dj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>Nj(t,typeof e!="symbol"?e+"":e,n);class Mj{constructor(e,n){this.core=e,this.logger=n,Mn(this,"keychain",new Map),Mn(this,"name",M9),Mn(this,"version",L9),Mn(this,"initialized",!1),Mn(this,"storagePrefix",Yn),Mn(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Mn(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Mn(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),Mn(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=z("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),Mn(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Pt(n,this.name)}get context(){return Vt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Zh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Jh(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Lj=Object.defineProperty,$j=(t,e,n)=>e in t?Lj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ut=(t,e,n)=>$j(t,typeof e!="symbol"?e+"":e,n);class Uj{constructor(e,n,r){this.core=e,this.logger=n,ut(this,"name",D9),ut(this,"keychain"),ut(this,"randomSessionIdentifier",cf()),ut(this,"initialized",!1),ut(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ut(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),ut(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=m0(i);return X1(s.publicKey)}),ut(this,"generateKeyPair",()=>{this.isInitialized();const i=WU();return this.setPrivateKey(i.publicKey,i.privateKey)}),ut(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=m0(s),a=this.randomSessionIdentifier;return await qN(a,i,N9,o)}),ut(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),u=QU(a,s);return this.setSymKey(u,o)}),ut(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Dc(i);return await this.keychain.set(o,i),o}),ut(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),ut(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),ut(this,"encode",async(i,s,o)=>{this.isInitialized();const a=A_(o),u=Wi(s);if(vy(a))return YU(u,o?.encoding);if(wy(a)){const h=a.senderPublicKey,g=a.receiverPublicKey;i=await this.generateSharedKey(h,g)}const l=this.getSymKey(i),{type:c,senderPublicKey:d}=a;return ZU({type:c,symKey:l,message:u,senderPublicKey:d,encoding:o?.encoding})}),ut(this,"decode",async(i,s,o)=>{this.isInitialized();const a=eF(s,o);if(vy(a)){const u=XU(s,o?.encoding);return Ks(u)}if(wy(a)){const u=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(u,l)}try{const u=this.getSymKey(i),l=JU({symKey:u,encoded:s,encoding:o?.encoding});return Ks(l)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}}),ut(this,"getPayloadType",(i,s=Tn)=>{const o=Ba({encoded:i,encoding:s});return Ji(o.type)}),ut(this,"getPayloadSenderPublicKey",(i,s=Tn)=>{const o=Ba({encoded:i,encoding:s});return o.senderPublicKey?zt(o.senderPublicKey,St):void 0}),this.core=e,this.logger=Pt(n,this.name),this.keychain=r||new Mj(this.core,this.logger)}get context(){return Vt(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Uy)}catch{e=cf(),await this.keychain.set(Uy,e)}return Cj(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Fj=Object.defineProperty,jj=Object.defineProperties,qj=Object.getOwnPropertyDescriptors,Wy=Object.getOwnPropertySymbols,Hj=Object.prototype.hasOwnProperty,zj=Object.prototype.propertyIsEnumerable,pf=(t,e,n)=>e in t?Fj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gj=(t,e)=>{for(var n in e||(e={}))Hj.call(e,n)&&pf(t,n,e[n]);if(Wy)for(var n of Wy(e))zj.call(e,n)&&pf(t,n,e[n]);return t},Vj=(t,e)=>jj(t,qj(e)),Kt=(t,e,n)=>pf(t,typeof e!="symbol"?e+"":e,n);class Kj extends FD{constructor(e,n){super(e,n),this.logger=e,this.core=n,Kt(this,"messages",new Map),Kt(this,"messagesWithoutClientAck",new Map),Kt(this,"name",$9),Kt(this,"version",U9),Kt(this,"initialized",!1),Kt(this,"storagePrefix",Yn),Kt(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Kt(this,"set",async(r,i,s)=>{this.isInitialized();const o=Hn(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===Nc.inbound){const u=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Vj(Gj({},u),{[o]:i}))}return await this.persist(),o}),Kt(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),Kt(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),Kt(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=Hn(i);return typeof s[o]<"u"}),Kt(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=Hn(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),Kt(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Pt(e,this.name),this.core=n}get context(){return Vt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Zh(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Zh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Jh(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Jh(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Wj=Object.defineProperty,Qj=Object.defineProperties,Zj=Object.getOwnPropertyDescriptors,Qy=Object.getOwnPropertySymbols,Jj=Object.prototype.hasOwnProperty,Yj=Object.prototype.propertyIsEnumerable,gf=(t,e,n)=>e in t?Wj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bc=(t,e)=>{for(var n in e||(e={}))Jj.call(e,n)&&gf(t,n,e[n]);if(Qy)for(var n of Qy(e))Yj.call(e,n)&&gf(t,n,e[n]);return t},Gd=(t,e)=>Qj(t,Zj(e)),_n=(t,e,n)=>gf(t,typeof e!="symbol"?e+"":e,n);class Xj extends jD{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,_n(this,"events",new On.EventEmitter),_n(this,"name",F9),_n(this,"queue",new Map),_n(this,"publishTimeout",G.toMiliseconds(G.ONE_MINUTE)),_n(this,"initialPublishTimeout",G.toMiliseconds(G.ONE_SECOND*15)),_n(this,"needsTransportRestart",!1),_n(this,"publish",async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const a=s?.ttl||Fy,u=Vu(s),l=s?.prompt||!1,c=s?.tag||0,d=s?.id||Bi().toString(),h={topic:r,message:i,opts:{ttl:a,relay:u,prompt:l,tag:c,id:d,attestation:s?.attestation,tvf:s?.tvf}},g=`Failed to publish payload, please try again. id:${d} tag:${c}`;try{const f=new Promise(async p=>{const m=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(it.publish,m),p(h))};this.relayer.events.on(it.publish,m);const y=Qr(new Promise((w,b)=>{this.rpcPublish({topic:r,message:i,ttl:a,prompt:l,tag:c,id:d,attestation:s?.attestation,tvf:s?.tvf}).then(w).catch(A=>{this.logger.warn(A,A?.message),b(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${c}`);try{await y,this.events.removeListener(it.publish,m)}catch(w){this.queue.set(d,Gd(bc({},h),{attempt:1})),this.logger.warn(w,w?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:i,opts:s}}),await Qr(f,this.publishTimeout,g)}catch(f){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(f),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw f}finally{this.queue.delete(d)}}),_n(this,"on",(r,i)=>{this.events.on(r,i)}),_n(this,"once",(r,i)=>{this.events.once(r,i)}),_n(this,"off",(r,i)=>{this.events.off(r,i)}),_n(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=Pt(n,this.name),this.registerEventListeners()}get context(){return Vt(this.logger)}async rpcPublish(e){var n,r,i,s;const{topic:o,message:a,ttl:u=Fy,prompt:l,tag:c,id:d,attestation:h,tvf:g}=e,f={method:No(Vu().protocol).publish,params:bc({topic:o,message:a,ttl:u,prompt:l,tag:c,attestation:h},g),id:d};dt((n=f.params)==null?void 0:n.prompt)&&((r=f.params)==null||delete r.prompt),dt((i=f.params)==null?void 0:i.tag)&&((s=f.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});const p=await this.relayer.request(f);return this.relayer.events.emit(it.publish,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,Gd(bc({},e),{attempt:r}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Gd(bc({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ts.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(it.connection_stalled);return}this.checkQueue()}),this.relayer.on(it.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var eq=Object.defineProperty,tq=(t,e,n)=>e in t?eq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ps=(t,e,n)=>tq(t,typeof e!="symbol"?e+"":e,n);class nq{constructor(){ps(this,"map",new Map),ps(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),ps(this,"get",e=>this.map.get(e)||[]),ps(this,"exists",(e,n)=>this.get(e).includes(n)),ps(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const i=r.filter(s=>s!==n);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),ps(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var rq=Object.defineProperty,iq=Object.defineProperties,sq=Object.getOwnPropertyDescriptors,Zy=Object.getOwnPropertySymbols,oq=Object.prototype.hasOwnProperty,aq=Object.prototype.propertyIsEnumerable,mf=(t,e,n)=>e in t?rq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bo=(t,e)=>{for(var n in e||(e={}))oq.call(e,n)&&mf(t,n,e[n]);if(Zy)for(var n of Zy(e))aq.call(e,n)&&mf(t,n,e[n]);return t},Vd=(t,e)=>iq(t,sq(e)),Pe=(t,e,n)=>mf(t,typeof e!="symbol"?e+"":e,n);class cq extends zD{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Pe(this,"subscriptions",new Map),Pe(this,"topicMap",new nq),Pe(this,"events",new On.EventEmitter),Pe(this,"name",K9),Pe(this,"version",W9),Pe(this,"pending",new Map),Pe(this,"cached",[]),Pe(this,"initialized",!1),Pe(this,"storagePrefix",Yn),Pe(this,"subscribeTimeout",G.toMiliseconds(G.ONE_MINUTE)),Pe(this,"initialSubscribeTimeout",G.toMiliseconds(G.ONE_SECOND*15)),Pe(this,"clientId"),Pe(this,"batchSubscribeTopicsLimit",500),Pe(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Pe(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=Vu(i),o={topic:r,relay:s,transportType:i?.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),Pe(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),Pe(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),Pe(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),Pe(this,"on",(r,i)=>{this.events.on(r,i)}),Pe(this,"once",(r,i)=>{this.events.once(r,i)}),Pe(this,"off",(r,i)=>{this.events.off(r,i)}),Pe(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),Pe(this,"start",async()=>{await this.onConnect()}),Pe(this,"stop",async()=>{await this.onDisconnect()}),Pe(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Pe(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),Pe(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ts.pulse,async()=>{await this.checkPending()}),this.events.on(Wt.created,async r=>{const i=Wt.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(Wt.deleted,async r=>{const i=Wt.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=Pt(n,this.name),this.clientId=""}get context(){return Vt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const i=Vu(r);await this.restartToComplete({topic:e,id:n,relay:i}),await this.rpcUnsubscribe(e,n,i);const s=Fe("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,n,r){var i;(!r||r?.transportType===Me.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const s={method:No(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(r?.transportType===Me.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(c=>this.logger.warn(c))},G.toMiliseconds(G.ONE_SECOND)),a;const u=new Promise(async c=>{const d=h=>{h.topic===e&&(this.events.removeListener(Wt.created,d),c(h.id))};this.events.on(Wt.created,d);try{const h=await Qr(new Promise((g,f)=>{this.relayer.request(s).catch(p=>{this.logger.warn(p,p?.message),f(p)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Wt.created,d),c(h)}catch{}}),l=await Qr(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(it.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:No(n.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Qr(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(it.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:No(n.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await Qr(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(it.connection_stalled)}return i}rpcUnsubscribe(e,n,r){const i={method:No(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,n){this.setSubscription(e,Vd(Bo({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Bo({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Bo({},n)),this.topicMap.set(n.topic,e),this.events.emit(Wt.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=z("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Wt.deleted,Vd(Bo({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Wt.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Wt.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>Vd(Bo({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await mL(G.toMiliseconds(G.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Hn(e+await this.getClientId())}}var uq=Object.defineProperty,Jy=Object.getOwnPropertySymbols,lq=Object.prototype.hasOwnProperty,dq=Object.prototype.propertyIsEnumerable,yf=(t,e,n)=>e in t?uq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yy=(t,e)=>{for(var n in e||(e={}))lq.call(e,n)&&yf(t,n,e[n]);if(Jy)for(var n of Jy(e))dq.call(e,n)&&yf(t,n,e[n]);return t},Ae=(t,e,n)=>yf(t,typeof e!="symbol"?e+"":e,n);class hq extends qD{constructor(e){super(e),Ae(this,"protocol","wc"),Ae(this,"version",2),Ae(this,"core"),Ae(this,"logger"),Ae(this,"events",new On.EventEmitter),Ae(this,"provider"),Ae(this,"messages"),Ae(this,"subscriber"),Ae(this,"publisher"),Ae(this,"name",q9),Ae(this,"transportExplicitlyClosed",!1),Ae(this,"initialized",!1),Ae(this,"connectionAttemptInProgress",!1),Ae(this,"relayUrl"),Ae(this,"projectId"),Ae(this,"packageName"),Ae(this,"bundleId"),Ae(this,"hasExperiencedNetworkDisruption",!1),Ae(this,"pingTimeout"),Ae(this,"heartBeatTimeout",G.toMiliseconds(G.THIRTY_SECONDS+G.FIVE_SECONDS)),Ae(this,"reconnectTimeout"),Ae(this,"connectPromise"),Ae(this,"reconnectInProgress",!1),Ae(this,"requestsInFlight",[]),Ae(this,"connectTimeout",G.toMiliseconds(G.ONE_SECOND*15)),Ae(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const s=n.id||Bi().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${s}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Ae(this,"resetPingTimeout",()=>{qu()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),Ae(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ae(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(it.connect)}),Ae(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ae(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(it.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ae(this,"registerProviderListeners",()=>{this.provider.on(rn.payload,this.onPayloadHandler),this.provider.on(rn.connect,this.onConnectHandler),this.provider.on(rn.disconnect,this.onDisconnectHandler),this.provider.on(rn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pt(e.logger,this.name):_l(Tp({level:e.logger||j9})),this.messages=new Kj(this.logger,e.core),this.subscriber=new cq(this,this.logger),this.publisher=new Xj(this,this.logger),this.relayUrl=e?.relayUrl||C_,this.projectId=e.projectId,eL()?this.packageName=j0():tL()&&(this.bundleId=j0()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Vt(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Me.relay},Nc.outbound)}async subscribe(e,n){var r,i,s;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n?.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",u;const l=c=>{c.topic===e&&(this.subscriber.off(Wt.created,l),u())};return await Promise.all([new Promise(c=>{u=c,this.subscriber.on(Wt.created,l)}),new Promise(async(c,d)=>{a=await this.subscriber.subscribe(e,Yy({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,c()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Qr(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ky())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const i=Qe(G.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(it.message,e),await this.recordMessageEvent(e,Nc.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(rn.disconnect,s),await Qr(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(rn.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const u=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(rn.disconnect,u),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(rn.disconnect,u)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,G.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,i,s;if(qu())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new S9(new P9(oL({sdkVersion:df,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:i}=e;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ng(e)){if(!e.method.endsWith(H9))return;const n=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=n.data,a={topic:r,message:i,publishedAt:s,transportType:Me.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Yy({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Dl(e)&&this.events.emit(it.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Nc.inbound),this.events.emit(it.message,e))}async acknowledgePayload(e){const n=eg(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(rn.payload,this.onPayloadHandler),this.provider.off(rn.connect,this.onConnectHandler),this.provider.off(rn.disconnect,this.onDisconnectHandler),this.provider.off(rn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await ky();WF(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ts.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&JF())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(it.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},G.toMiliseconds(z9)))))}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function fq(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Xy(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function eb(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const pq="[object RegExp]",gq="[object String]",mq="[object Number]",yq="[object Boolean]",tb="[object Arguments]",bq="[object Symbol]",wq="[object Date]",vq="[object Map]",Eq="[object Set]",_q="[object Array]",Aq="[object Function]",xq="[object ArrayBuffer]",Kd="[object Object]",Iq="[object Error]",Sq="[object DataView]",Tq="[object Uint8Array]",Rq="[object Uint8ClampedArray]",Bq="[object Uint16Array]",Pq="[object Uint32Array]",kq="[object BigUint64Array]",Oq="[object Int8Array]",Cq="[object Int16Array]",Dq="[object Int32Array]",Nq="[object BigInt64Array]",Mq="[object Float32Array]",Lq="[object Float64Array]";function $q(){}function nb(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Uq(t,e,n){return Mo(t,e,void 0,void 0,void 0,void 0,n)}function Mo(t,e,n,r,i,s,o){const a=o(t,e,n,r,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Zo(t,e,s,o)}return Zo(t,e,s,o)}function Zo(t,e,n,r){if(Object.is(t,e))return!0;let i=eb(t),s=eb(e);if(i===tb&&(i=Kd),s===tb&&(s=Kd),i!==s)return!1;switch(i){case gq:return t.toString()===e.toString();case mq:{const u=t.valueOf(),l=e.valueOf();return fq(u,l)}case yq:case wq:case bq:return Object.is(t.valueOf(),e.valueOf());case pq:return t.source===e.source&&t.flags===e.flags;case Aq:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(i){case vq:{if(t.size!==e.size)return!1;for(const[u,l]of t.entries())if(!e.has(u)||!Mo(l,e.get(u),u,t,e,n,r))return!1;return!0}case Eq:{if(t.size!==e.size)return!1;const u=Array.from(t.values()),l=Array.from(e.values());for(let c=0;c<u.length;c++){const d=u[c],h=l.findIndex(g=>Mo(d,g,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case _q:case Tq:case Rq:case Bq:case Pq:case kq:case Oq:case Cq:case Dq:case Nq:case Mq:case Lq:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let u=0;u<t.length;u++)if(!Mo(t[u],e[u],u,t,e,n,r))return!1;return!0}case xq:return t.byteLength!==e.byteLength?!1:Zo(new Uint8Array(t),new Uint8Array(e),n,r);case Sq:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Zo(new Uint8Array(t),new Uint8Array(e),n,r);case Iq:return t.name===e.name&&t.message===e.message;case Kd:{if(!(Zo(t.constructor,e.constructor,n,r)||nb(t)&&nb(e)))return!1;const u=[...Object.keys(t),...Xy(t)],l=[...Object.keys(e),...Xy(e)];if(u.length!==l.length)return!1;for(let c=0;c<u.length;c++){const d=u[c],h=t[d];if(!Object.hasOwn(e,d))return!1;const g=e[d];if(!Mo(h,g,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Fq(t,e){return Uq(t,e,$q)}var jq=Object.defineProperty,rb=Object.getOwnPropertySymbols,qq=Object.prototype.hasOwnProperty,Hq=Object.prototype.propertyIsEnumerable,bf=(t,e,n)=>e in t?jq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ib=(t,e)=>{for(var n in e||(e={}))qq.call(e,n)&&bf(t,n,e[n]);if(rb)for(var n of rb(e))Hq.call(e,n)&&bf(t,n,e[n]);return t},Ot=(t,e,n)=>bf(t,typeof e!="symbol"?e+"":e,n);class rs extends HD{constructor(e,n,r,i=Yn,s=void 0){super(e,n,r,i),this.core=e,this.logger=n,this.name=r,Ot(this,"map",new Map),Ot(this,"version",G9),Ot(this,"cached",[]),Ot(this,"initialized",!1),Ot(this,"getKey"),Ot(this,"storagePrefix",Yn),Ot(this,"recentlyDeleted",[]),Ot(this,"recentlyDeletedLimit",200),Ot(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!dt(o)?this.map.set(this.getKey(o),o):IF(o)?this.map.set(o.id,o):SF(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ot(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ot(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ot(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(u=>Fq(a[u],o[u]))):this.values)),Ot(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const u=ib(ib({},this.getData(o)),a);this.map.set(o,u),await this.persist()}),Ot(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Pt(n,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Vt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:i}=z("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=z("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}}var zq=Object.defineProperty,Gq=(t,e,n)=>e in t?zq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ye=(t,e,n)=>Gq(t,typeof e!="symbol"?e+"":e,n);class Vq{constructor(e,n){this.core=e,this.logger=n,ye(this,"name",Q9),ye(this,"version",Z9),ye(this,"events",new w1),ye(this,"pairings"),ye(this,"initialized",!1),ye(this,"storagePrefix",Yn),ye(this,"ignoredPayloadTypes",[Er]),ye(this,"registeredMethods",[]),ye(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ye(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ye(this,"create",async r=>{this.isInitialized();const i=cf(),s=await this.core.crypto.setSymKey(i),o=Qe(G.FIVE_MINUTES),a={protocol:O_},u={topic:s,expiry:o,relay:a,active:!1,methods:r?.methods},l=_y({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(wi.create,u),this.core.expirer.set(s,o),await this.pairings.set(s,u),await this.core.relayer.subscribe(s,{transportType:r?.transportType}),{topic:s,uri:l}}),ye(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[$n.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:u,methods:l}=Ey(r.uri);i.props.properties.topic=s,i.addTrace($n.pairing_uri_validation_success),i.addTrace($n.pairing_uri_not_expired);let c;if(this.pairings.keys.includes(s)){if(c=this.pairings.get(s),i.addTrace($n.existing_pairing),c.active)throw i.setError(fr.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace($n.pairing_not_expired)}const d=u||Qe(G.FIVE_MINUTES),h={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,h),i.addTrace($n.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(wi.create,h),i.addTrace($n.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace($n.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(fr.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(g){throw i.setError(fr.subscribe_pairing_topic_failure),g}return i.addTrace($n.subscribe_pairing_topic_success),h}),ye(this,"activate",async({topic:r})=>{this.isInitialized();const i=Qe(G.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),ye(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:u}=mi();this.events.once(Ie("pairing_ping",s),({error:l})=>{l?u(l):a()}),await o()}}),ye(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),ye(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),ye(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ye(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Fe("USER_DISCONNECTED")),await this.deletePairing(i))}),ye(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,u=this.core.crypto.keychain.get(i);return _y({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:u,relay:s,expiryTimestamp:o,methods:a})}),ye(this,"sendRequest",async(r,i,s)=>{const o=Pi(i,s),a=await this.core.crypto.encode(r,o),u=To[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,u),o.id}),ye(this,"sendResult",async(r,i,s)=>{const o=eg(r,s),a=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,r)).request.method,l=To[u].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),ye(this,"sendError",async(r,i,s)=>{const o=tg(r,s),a=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,r)).request.method,l=To[u]?To[u].res:To.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),ye(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Fe("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),ye(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>qr(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),ye(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),ye(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),ye(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(wi.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),ye(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{Fn(i)?this.events.emit(Ie("pairing_ping",s),{}):an(i)&&this.events.emit(Ie("pairing_ping",s),{error:i.error})},500)}),ye(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(wi.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),ye(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Fe("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),ye(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Fe("WC_METHOD_UNSUPPORTED",r))}),ye(this,"isValidPair",(r,i)=>{var s;if(!Nt(r)){const{message:a}=z("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(fr.malformed_pairing_uri),new Error(a)}if(!xF(r.uri)){const{message:a}=z("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(fr.malformed_pairing_uri),new Error(a)}const o=Ey(r?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=z("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(fr.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=z("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(fr.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&G.toMiliseconds(o?.expiryTimestamp)<Date.now()){i.setError(fr.pairing_expired);const{message:a}=z("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),ye(this,"isValidPing",async r=>{if(!Nt(r)){const{message:s}=z("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ye(this,"isValidDisconnect",async r=>{if(!Nt(r)){const{message:s}=z("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ye(this,"isValidPairingTopic",async r=>{if(!Ke(r,!1)){const{message:i}=z("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(qr(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=z("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=Pt(n,this.name),this.pairings=new rs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Vt(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(it.message,async e=>{const{topic:n,message:r,transportType:i}=e;if(this.pairings.keys.includes(n)&&i!==Me.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(n,r);ng(s)?(this.core.history.set(n,s),await this.onRelayEventRequest({topic:n,payload:s})):Dl(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:n,payload:s}),this.core.history.delete(n,s.id)),await this.core.relayer.messages.ack(n,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(sn.expired,async e=>{const{topic:n}=CE(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(wi.expire,{topic:n}))})}}var Kq=Object.defineProperty,Wq=(t,e,n)=>e in t?Kq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lt=(t,e,n)=>Wq(t,typeof e!="symbol"?e+"":e,n);class Qq extends UD{constructor(e,n){super(e,n),this.core=e,this.logger=n,lt(this,"records",new Map),lt(this,"events",new On.EventEmitter),lt(this,"name",J9),lt(this,"version",Y9),lt(this,"cached",[]),lt(this,"initialized",!1),lt(this,"storagePrefix",Yn),lt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),lt(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:Qe(G.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(vn.created,o)}),lt(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=an(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(vn.updated,i))}),lt(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),lt(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(vn.deleted,s)}}),this.persist()}),lt(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),lt(this,"on",(r,i)=>{this.events.on(r,i)}),lt(this,"once",(r,i)=>{this.events.once(r,i)}),lt(this,"off",(r,i)=>{this.events.off(r,i)}),lt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Pt(n,this.name)}get context(){return Vt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Pi(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=z("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(vn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(vn.created,e=>{const n=vn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vn.updated,e=>{const n=vn.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vn.deleted,e=>{const n=vn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(ts.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{G.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(vn.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Zq=Object.defineProperty,Jq=(t,e,n)=>e in t?Zq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bt=(t,e,n)=>Jq(t,typeof e!="symbol"?e+"":e,n);class Yq extends GD{constructor(e,n){super(e,n),this.core=e,this.logger=n,bt(this,"expirations",new Map),bt(this,"events",new On.EventEmitter),bt(this,"name",X9),bt(this,"version",e7),bt(this,"cached",[]),bt(this,"initialized",!1),bt(this,"storagePrefix",Yn),bt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),bt(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),bt(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(sn.created,{target:s,expiration:o})}),bt(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),bt(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(sn.deleted,{target:i,expiration:s})}}),bt(this,"on",(r,i)=>{this.events.on(r,i)}),bt(this,"once",(r,i)=>{this.events.once(r,i)}),bt(this,"off",(r,i)=>{this.events.off(r,i)}),bt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Pt(n,this.name)}get context(){return Vt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return aL(e);if(typeof e=="number")return cL(e);const{message:n}=z("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(sn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=z("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;G.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(sn.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(ts.pulse,()=>this.checkExpirations()),this.events.on(sn.created,e=>{const n=sn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(sn.expired,e=>{const n=sn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(sn.deleted,e=>{const n=sn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Xq=Object.defineProperty,eH=(t,e,n)=>e in t?Xq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ge=(t,e,n)=>eH(t,typeof e!="symbol"?e+"":e,n);class tH extends VD{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Ge(this,"name",t7),Ge(this,"abortController"),Ge(this,"isDevEnv"),Ge(this,"verifyUrlV3",r7),Ge(this,"storagePrefix",Yn),Ge(this,"version",k_),Ge(this,"publicKey"),Ge(this,"fetchPromise"),Ge(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&G.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ge(this,"register",async i=>{if(!ao()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Sr.getDocument(),c=this.startAbortTimer(G.ONE_SECOND*5),d=await new Promise((h,g)=>{const f=()=>{window.removeEventListener("message",m),l.body.removeChild(p),g("attestation aborted")};this.abortController.signal.addEventListener("abort",f);const p=l.createElement("iframe");p.src=u,p.style.display="none",p.addEventListener("error",f,{signal:this.abortController.signal});const m=y=>{if(y.data&&typeof y.data=="string")try{const w=JSON.parse(y.data);if(w.type==="verify_attestation"){if(qh(w.attestation).payload.id!==o)return;clearInterval(c),l.body.removeChild(p),this.abortController.signal.removeEventListener("abort",f),window.removeEventListener("message",m),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(p),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Ge(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(qh(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const u=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,u)}),Ge(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(G.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ge(this,"getVerifyUrl",i=>{let s=i||Qo;return i7.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Qo}`),s=Qo),s}),Ge(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(G.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Ge(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Ge(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ge(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ge(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ge(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Ge(this,"validateAttestation",(i,s)=>{const o=nF(i,s.publicKey),a={hasExpired:G.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Pt(n,this.name),this.abortController=new AbortController,this.isDevEnv=Up(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Vt(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),G.toMiliseconds(e))}}var nH=Object.defineProperty,rH=(t,e,n)=>e in t?nH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sb=(t,e,n)=>rH(t,typeof e!="symbol"?e+"":e,n);class iH extends KD{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,sb(this,"context",s7),sb(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,u=`${o7}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Pt(n,this.context)}}var sH=Object.defineProperty,ob=Object.getOwnPropertySymbols,oH=Object.prototype.hasOwnProperty,aH=Object.prototype.propertyIsEnumerable,wf=(t,e,n)=>e in t?sH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Po=(t,e)=>{for(var n in e||(e={}))oH.call(e,n)&&wf(t,n,e[n]);if(ob)for(var n of ob(e))aH.call(e,n)&&wf(t,n,e[n]);return t},tt=(t,e,n)=>wf(t,typeof e!="symbol"?e+"":e,n);class cH extends WD{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,tt(this,"context",c7),tt(this,"storagePrefix",Yn),tt(this,"storageVersion",a7),tt(this,"events",new Map),tt(this,"shouldPersist",!1),tt(this,"init",async()=>{if(!Up())try{const i={eventId:H0(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:kE(this.core.relayer.protocol,this.core.relayer.version,df)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),tt(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:u}}=i,l=H0(),c=this.core.projectId||"",d=Date.now(),h=Po({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:u}},bundleId:c,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),tt(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(u=>u.props.properties.topic===o);if(a)return Po(Po({},a),this.setMethods(a.eventId))}),tt(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),tt(this,"setEventListeners",()=>{this.core.heartbeat.on(ts.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{G.fromMiliseconds(Date.now())-G.fromMiliseconds(i.timestamp)>u7&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),tt(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),tt(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),tt(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),tt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),tt(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Po(Po({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),tt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),tt(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${l7}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${df}${s}`,{method:"POST",body:JSON.stringify(i)})}),tt(this,"getAppDomain",()=>PE().url),this.logger=Pt(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var uH=Object.defineProperty,ab=Object.getOwnPropertySymbols,lH=Object.prototype.hasOwnProperty,dH=Object.prototype.propertyIsEnumerable,vf=(t,e,n)=>e in t?uH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cb=(t,e)=>{for(var n in e||(e={}))lH.call(e,n)&&vf(t,n,e[n]);if(ab)for(var n of ab(e))dH.call(e,n)&&vf(t,n,e[n]);return t},Oe=(t,e,n)=>vf(t,typeof e!="symbol"?e+"":e,n);class rg extends ND{constructor(e){var n;super(e),Oe(this,"protocol",P_),Oe(this,"version",k_),Oe(this,"name",lf),Oe(this,"relayUrl"),Oe(this,"projectId"),Oe(this,"customStoragePrefix"),Oe(this,"events",new On.EventEmitter),Oe(this,"logger"),Oe(this,"heartbeat"),Oe(this,"relayer"),Oe(this,"crypto"),Oe(this,"storage"),Oe(this,"history"),Oe(this,"expirer"),Oe(this,"pairing"),Oe(this,"verify"),Oe(this,"echoClient"),Oe(this,"linkModeSupportedApps"),Oe(this,"eventClient"),Oe(this,"initialized",!1),Oe(this,"logChunkController"),Oe(this,"on",(a,u)=>this.events.on(a,u)),Oe(this,"once",(a,u)=>this.events.once(a,u)),Oe(this,"off",(a,u)=>this.events.off(a,u)),Oe(this,"removeListener",(a,u)=>this.events.removeListener(a,u)),Oe(this,"dispatchEnvelope",({topic:a,message:u,sessionExists:l})=>{if(!a||!u)return;const c={topic:a,message:u,publishedAt:Date.now(),transportType:Me.link_mode};this.relayer.onLinkMessageEvent(c,{sessionExists:l})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||C_,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=Tp({level:typeof e?.logger=="string"&&e.logger?e.logger:O9.logger,name:lf}),{logger:s,chunkLoggerController:o}=OD({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,u;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Pt(s,this.name),this.heartbeat=new CC,this.crypto=new Uj(this,this.logger,e?.keychain),this.history=new Qq(this,this.logger),this.expirer=new Yq(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new gD(cb(cb({},C9),e?.storageOptions)),this.relayer=new hq({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Vq(this,this.logger),this.verify=new tH(this,this.logger,this.storage),this.echoClient=new iH(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new cH(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new rg(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(V9,r),n}get context(){return Vt(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(jy,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(jy)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&k9.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}}const Wu=rg,V_="wc",K_=2,W_="client",ig=`${V_}@${K_}:${W_}:`,Wd={name:W_,logger:"error"},ub="WALLETCONNECT_DEEPLINK_CHOICE",hH="proposal",lb="Proposal expired",fH="session",gs=G.SEVEN_DAYS,pH="engine",nt={wc_sessionPropose:{req:{ttl:G.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1104},res:{ttl:G.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1106},res:{ttl:G.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:G.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:G.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1112},res:{ttl:G.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1114},res:{ttl:G.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:G.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:G.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1119}}},Qd={min:G.FIVE_MINUTES,max:G.SEVEN_DAYS},Ln={idle:"IDLE",active:"ACTIVE"},gH={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},mH="request",yH=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],bH="wc",wH="auth",vH="authKeys",EH="pairingTopics",_H="requests",Ml=`${bH}@${1.5}:${wH}:`,Mc=`${Ml}:PUB_KEY`;var AH=Object.defineProperty,xH=Object.defineProperties,IH=Object.getOwnPropertyDescriptors,db=Object.getOwnPropertySymbols,SH=Object.prototype.hasOwnProperty,TH=Object.prototype.propertyIsEnumerable,Ef=(t,e,n)=>e in t?AH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ne=(t,e)=>{for(var n in e||(e={}))SH.call(e,n)&&Ef(t,n,e[n]);if(db)for(var n of db(e))TH.call(e,n)&&Ef(t,n,e[n]);return t},Ct=(t,e)=>xH(t,IH(e)),U=(t,e,n)=>Ef(t,typeof e!="symbol"?e+"":e,n);class RH extends YD{constructor(e){super(e),U(this,"name",pH),U(this,"events",new w1),U(this,"initialized",!1),U(this,"requestQueue",{state:Ln.idle,queue:[]}),U(this,"sessionRequestQueue",{state:Ln.idle,queue:[]}),U(this,"emittedSessionRequests",new yL({limit:500})),U(this,"requestQueueDelay",G.ONE_SECOND),U(this,"expectedPairingMethodMap",new Map),U(this,"recentlyDeletedMap",new Map),U(this,"recentlyDeletedLimit",200),U(this,"relayMessageCache",[]),U(this,"pendingSessions",new Map),U(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(nt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},G.toMiliseconds(this.requestQueueDelay)))}),U(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ct(Ne({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=wF(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:u,relays:l}=r;let c=i,d,h=!1;try{if(c){const _=this.client.core.pairing.pairings.get(c);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=_.active}}catch(_){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),_}if(!c||!h){const{topic:_,uri:R}=await this.client.core.pairing.create();c=_,d=R}if(!c){const{message:_}=z("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(_)}const g=await this.client.core.crypto.generateKeyPair(),f=nt.wc_sessionPropose.req.ttl||G.FIVE_MINUTES,p=Qe(f),m=Ct(Ne(Ne({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:O_}],proposer:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:c},a&&{sessionProperties:a}),u&&{scopedProperties:u}),{id:Un()}),y=Ie("session_connect",m.id),{reject:w,resolve:b,done:A}=mi(f,lb),E=({id:_})=>{_===m.id&&(this.client.events.off("proposal_expire",E),this.pendingSessions.delete(m.id),this.events.emit(y,{error:{message:lb,code:0}}))};return this.client.events.on("proposal_expire",E),this.events.once(y,({error:_,session:R})=>{this.client.events.off("proposal_expire",E),_?w(_):R&&b(R)}),await this.sendRequest({topic:c,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:A}}),U(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),U(this,"approve",async n=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[En.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(fi.no_internet_connection),S}try{await this.isValidProposalId(n?.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),o.setError(fi.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(fi.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:u,namespaces:l,sessionProperties:c,scopedProperties:d,sessionConfig:h}=n,g=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:f,proposer:p,requiredNamespaces:m,optionalNamespaces:y}=g;let w=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:f});w||(w=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:En.session_approve_started,properties:{topic:f,trace:[En.session_approve_started,En.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),A=p.publicKey,E=await this.client.core.crypto.generateSharedKey(b,A),_=Ne(Ne(Ne({relay:{protocol:u??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:Qe(gs)},c&&{sessionProperties:c}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),R=Me.relay;w.addTrace(En.subscribing_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:R})}catch(S){throw w.setError(fi.subscribe_session_topic_failure),S}w.addTrace(En.subscribe_session_topic_success);const x=Ct(Ne({},_),{topic:E,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:f,acknowledged:!1,self:_.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:b,transportType:Me.relay});await this.client.session.set(E,x),w.addTrace(En.store_session);try{w.addTrace(En.publishing_session_settle),await this.sendRequest({topic:E,method:"wc_sessionSettle",params:_,throwOnFailedPublish:!0}).catch(S=>{throw w?.setError(fi.session_settle_publish_failure),S}),w.addTrace(En.session_settle_publish_success),w.addTrace(En.publishing_session_approve),await this.sendResult({id:a,topic:f,result:{relay:{protocol:u??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(S=>{throw w?.setError(fi.session_approve_publish_failure),S}),w.addTrace(En.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(E,Fe("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(E),S}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:f,metadata:p.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:f}),await this.setExpiry(E,Qe(gs)),{topic:E,acknowledged:()=>Promise.resolve(this.client.session.get(E))}}),U(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=n;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&await this.sendError({id:r,topic:s,error:i,rpcOpts:nt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),U(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:i}=n,{done:s,resolve:o,reject:a}=mi(),u=Un(),l=Bi().toString(),c=this.client.session.get(r).namespaces;return this.events.once(Ie("session_update",u),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:c}),a(d)}),{acknowledged:s}}),U(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:r}=n,i=Un(),{done:s,resolve:o,reject:a}=mi();return this.events.once(Ie("session_extend",i),({error:u})=>{u?a(u):o()}),await this.setExpiry(r,Qe(gs)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(u=>{a(u)}),{acknowledged:s}}),U(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:i,topic:s,expiry:o=nt.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(s);a?.transportType===Me.relay&&await this.confirmOnlineStateOrThrow();const u=Un(),l=Bi().toString(),{done:c,resolve:d,reject:h}=mi(o,"Request expired. Please try again.");this.events.once(Ie("session_request",u),({error:m,result:y})=>{m?h(m):d(y)});const g="wc_sessionRequest",f=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(f)return await this.sendRequest({clientRpcId:u,relayRpcId:l,topic:s,method:g,params:{request:Ct(Ne({},i),{expiryTimestamp:Qe(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:f}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:u}),await c();const p={request:Ct(Ne({},i),{expiryTimestamp:Qe(o)}),chainId:r};return await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:u,relayRpcId:l,topic:s,method:g,params:p,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(u,p)}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:u}),m()}),new Promise(async m=>{var y;if(!((y=a.sessionConfig)!=null&&y.disableDeepLink)){const w=await hL(this.client.core.storage,ub);await uL({id:u,topic:s,wcDeepLink:w})}m()}),c()]).then(m=>m[2])}),U(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:s}=i,o=this.client.session.get(r);o.transportType===Me.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Fn(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:a}):an(i)&&await this.sendError({id:s,topic:r,error:i.error,appLink:a}),this.cleanupAfterResponse(n)}),U(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=Un(),s=Bi().toString(),{done:o,resolve:a,reject:u}=mi();this.events.once(Ie("session_ping",i),({error:l})=>{l?u(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),U(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:s}=n,o=Bi().toString(),a=Un();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),U(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Fe("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=z("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),U(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>_F(r,n)))),U(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),U(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Me.link_mode:Me.relay;o===Me.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:u="",uri:l,domain:c,nonce:d,type:h,exp:g,nbf:f,methods:p=[],expiry:m}=n,y=[...n.resources||[]],{topic:w,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:b}});const A=await this.client.core.crypto.generateKeyPair(),E=Dc(A);if(await Promise.all([this.client.auth.authKeys.set(Mc,{responseTopic:E,publicKey:A}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:w})]),await this.client.core.relayer.subscribe(E,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),p.length>0){const{namespace:O}=Oc(a[0]);let D=R$(O,"request",p);Cc(y)&&(D=P$(D,y.pop())),y.push(D)}const _=m&&m>nt.wc_sessionAuthenticate.req.ttl?m:nt.wc_sessionAuthenticate.req.ttl,R={authPayload:{type:h??"caip122",chains:a,statement:u,aud:l,domain:c,version:"1",nonce:d,iat:new Date().toISOString(),exp:g,nbf:f,resources:y},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Qe(_)},x={eip155:{chains:a,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:x,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Qe(nt.wc_sessionPropose.req.ttl),id:Un()},{done:T,resolve:B,reject:k}=mi(_,"Request expired"),N=Un(),M=Ie("session_connect",S.id),v=Ie("session_request",N),I=async({error:O,session:D})=>{this.events.off(v,P),O?k(O):D&&B({session:D})},P=async O=>{var D,$,q;if(await this.deletePendingAuthRequest(N,{message:"fulfilled",code:0}),O.error){const ae=Fe("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return O.error.code===ae.code?void 0:(this.events.off(M,I),k(O.error.message))}await this.deleteProposal(S.id),this.events.off(M,I);const{cacaos:V,responder:H}=O.result,W=[],X=[];for(const ae of V){await ey({cacao:ae,projectId:this.client.core.projectId})||(this.client.logger.error(ae,"Signature verification failed"),k(Fe("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Te}=ae,ze=Cc(Te.resources),Xe=[Yh(Te.iss)],mn=Hu(Te.iss);if(ze){const yn=ty(ze),is=ny(ze);W.push(...yn),Xe.push(...is)}for(const yn of Xe)X.push(`${yn}:${mn}`)}const he=await this.client.core.crypto.generateSharedKey(A,H.publicKey);let me;W.length>0&&(me={topic:he,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:H,controller:H.publicKey,expiry:Qe(gs),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:Sy([...new Set(W)],[...new Set(X)]),transportType:o},await this.client.core.relayer.subscribe(he,{transportType:o}),await this.client.session.set(he,me),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:H.metadata}),me=this.client.session.get(he)),(D=this.client.metadata.redirect)!=null&&D.linkMode&&($=H.metadata.redirect)!=null&&$.linkMode&&(q=H.metadata.redirect)!=null&&q.universal&&r&&(this.client.core.addLinkModeSupportedApp(H.metadata.redirect.universal),this.client.session.update(he,{transportType:Me.link_mode})),B({auths:V,session:me})};this.events.once(M,I),this.events.once(v,P);let C;try{if(s){const O=Pi("wc_sessionAuthenticate",R,N);this.client.core.history.set(w,O);const D=await this.client.core.crypto.encode("",O,{type:Za,encoding:Vr});C=yc(r,w,D)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:R,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:N}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:S,expiry:nt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(O){throw this.events.off(M,I),this.events.off(v,P),O}return await this.setProposal(S.id,S),await this.setAuthRequest(N,{request:Ct(Ne({},R),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:C??b,response:T}}),U(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[pi.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw s.setError(Ro.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(Ro.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Me.relay;a===Me.relay&&await this.confirmOnlineStateOrThrow();const u=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),c=Dc(u),d={type:Er,receiverPublicKey:u,senderPublicKey:l},h=[],g=[];for(const m of i){if(!await ey({cacao:m,projectId:this.client.core.projectId})){s.setError(Ro.invalid_cacao);const E=Fe("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:c,error:E,encodeOpts:d}),new Error(E.message)}s.addTrace(pi.cacaos_verified);const{p:y}=m,w=Cc(y.resources),b=[Yh(y.iss)],A=Hu(y.iss);if(w){const E=ty(w),_=ny(w);h.push(...E),b.push(..._)}for(const E of b)g.push(`${E}:${A}`)}const f=await this.client.core.crypto.generateSharedKey(l,u);s.addTrace(pi.create_authenticated_session_topic);let p;if(h?.length>0){p={topic:f,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:u,metadata:o.requester.metadata},controller:u,expiry:Qe(gs),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Sy([...new Set(h)],[...new Set(g)]),transportType:a},s.addTrace(pi.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:a})}catch(m){throw s.setError(Ro.subscribe_authenticated_session_topic_failure),m}s.addTrace(pi.subscribe_authenticated_session_topic_success),await this.client.session.set(f,p),s.addTrace(pi.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(pi.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw s.setError(Ro.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:p}}),U(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===Me.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),u=Dc(o),l={type:Er,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:u,error:i,encodeOpts:l,rpcOpts:nt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),U(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return WE(r,i)}),U(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),U(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),U(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=n,{self:u}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Fe("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(ub).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,Fe("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Ln.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),U(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(fi.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Fe("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),U(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==n),i&&(this.sessionRequestQueue.state=Ln.idle,this.client.events.emit("session_request_expire",{id:n}))}),U(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),U(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),U(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Qe(nt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),U(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:s,transportType:o=Me.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),U(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:s,verifyContext:o}=n,a=s.request.expiryTimestamp||Qe(nt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),U(this,"sendRequest",async n=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:u,throwOnFailedPublish:l,appLink:c,tvf:d}=n,h=Pi(i,s,u);let g;const f=!!c;try{const y=f?Vr:Tn;g=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let p;if(yH.includes(i)){const y=Hn(JSON.stringify(h)),w=Hn(g);p=await this.client.core.verify.register({id:w,decryptedId:y})}const m=nt[i].req;if(m.attestation=p,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),f){const y=yc(c,r,g);await global.Linking.openURL(y,this.client.name)}else{const y=nt[i].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Ct(Ne({},d),{correlationId:h.id}),l?(y.internal=Ct(Ne({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,g,y)):this.client.core.relayer.publish(r,g,y).catch(w=>this.client.logger.error(w))}return h.id}),U(this,"sendResult",async n=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:u}=n,l=eg(r,s);let c;const d=u&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Vr:Tn;c=await this.client.core.crypto.encode(i,l,Ct(Ne({},a||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),f}let h,g;try{h=await this.client.core.history.get(i,r);const f=h.request;try{g=this.getTVFParams(r,f.params,s)}catch(p){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${p?.message}`)}}catch(f){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),f}if(d){const f=yc(u,i,c);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=nt[f].res;p.tvf=Ct(Ne({},g),{correlationId:r}),o?(p.internal=Ct(Ne({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,p)):this.client.core.relayer.publish(i,c,p).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),U(this,"sendError",async n=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:u}=n,l=tg(r,s);let c;const d=u&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?Vr:Tn;c=await this.client.core.crypto.encode(i,l,Ct(Ne({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),g}let h;try{h=await this.client.core.history.get(i,r)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),g}if(d){const g=yc(u,i,c);await global.Linking.openURL(g,this.client.name)}else{const g=h.request.method,f=a||nt[g].res;this.client.core.relayer.publish(i,c,f)}await this.client.core.history.resolve(l)}),U(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;qr(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{qr(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),U(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),U(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),U(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ln.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ln.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Ln.idle}),U(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=n,u=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${u}`)}}),U(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:s}=n,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),U(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=z("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),U(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),U(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=n,{params:a,id:u}=i;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(fr.proposal_listener_not_found)),this.isValidConnect(Ne({},i.params));const c=a.expiryTimestamp||Qe(nt.wc_sessionPropose.req.ttl),d=Ne({id:u,pairingTopic:r,expiryTimestamp:c,attestation:s,encryptedId:o},a);await this.setProposal(u,d);const h=await this.getVerifyContext({attestationId:s,hash:Hn(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l?.addTrace($n.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:d,verifyContext:h})}catch(l){await this.sendError({id:u,topic:r,error:l,rpcOpts:nt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),U(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:s}=r;if(Fn(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const u=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const c=await this.client.core.crypto.generateSharedKey(u,l);this.pendingSessions.set(s,{sessionTopic:c,pairingTopic:n,proposalId:s,publicKey:u});const d=await this.client.core.relayer.subscribe(c,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(an(r)){await this.deleteProposal(s);const o=Ie("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),U(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:u,namespaces:l,sessionProperties:c,scopedProperties:d,sessionConfig:h}=r.params,g=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!g)return this.client.logger.error(`Pending session not found for topic ${n}`);const f=this.client.proposal.get(g.proposalId),p=Ct(Ne(Ne(Ne({topic:n,relay:o,expiry:u,namespaces:l,acknowledged:!0,pairingTopic:g.pairingTopic,requiredNamespaces:f.requiredNamespaces,optionalNamespaces:f.optionalNamespaces,controller:a.publicKey,self:{publicKey:g.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},c&&{sessionProperties:c}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Me.relay});await this.client.session.set(p.topic,p),await this.setExpiry(p.topic,p.expiry),await this.client.core.pairing.updateMetadata({topic:g.pairingTopic,metadata:p.peer.metadata}),this.client.events.emit("session_connect",{session:p}),this.events.emit(Ie("session_connect",g.proposalId),{session:p}),this.pendingSessions.delete(g.proposalId),this.deleteProposal(g.proposalId,!1),this.cleanupDuplicatePairings(p),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),U(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;Fn(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Ie("session_approve",i),{})):an(r)&&(await this.client.session.delete(n,Fe("USER_DISCONNECTED")),this.events.emit(Ie("session_approve",i),{error:r.error}))}),U(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:s}=r;try{const o=`${n}_session_update`,a=So.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:n,error:Fe("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Ne({topic:n},i));try{So.set(o,s),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:n,result:!0})}catch(u){throw So.delete(o),u}this.client.events.emit("session_update",{id:s,topic:n,params:i})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),U(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),U(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,s=Ie("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Fn(r)?this.events.emit(Ie("session_update",i),{}):an(r)&&this.events.emit(Ie("session_update",i),{error:r.error})}),U(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Qe(gs)),await this.sendResult({id:i,topic:n,result:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),U(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,s=Ie("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Fn(r)?this.events.emit(Ie("session_extend",i),{}):an(r)&&this.events.emit(Ie("session_extend",i),{error:r.error})}),U(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),U(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,s=Ie("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Fn(r)?this.events.emit(Ie("session_ping",i),{}):an(r)&&this.events.emit(Ie("session_ping",i),{error:r.error})},500)}),U(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(it.publish,async()=>{s(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Fe("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),U(this,"onSessionRequest",async n=>{var r,i,s;const{topic:o,payload:a,attestation:u,encryptedId:l,transportType:c}=n,{id:d,params:h}=a;try{await this.isValidRequest(Ne({topic:o},h));const g=this.client.session.get(o),f=await this.getVerifyContext({attestationId:u,hash:Hn(JSON.stringify(Pi("wc_sessionRequest",h,d))),encryptedId:l,metadata:g.peer.metadata,transportType:c}),p={id:d,topic:o,params:h,verifyContext:f};await this.setPendingSessionRequest(p),c===Me.link_mode&&(r=g.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=g.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(p):(this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue())}catch(g){await this.sendError({id:d,topic:o,error:g}),this.client.logger.error(g)}}),U(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,s=Ie("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Fn(r)?this.events.emit(Ie("session_request",i),{result:r.result}):an(r)&&this.events.emit(Ie("session_request",i),{error:r.error})}),U(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:s}=r;try{const o=`${n}_session_event_${s.event.name}`,a=So.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Ne({topic:n},s)),this.client.events.emit("session_event",{id:i,topic:n,params:s}),So.set(o,i)}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),U(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Fn(r)?this.events.emit(Ie("session_request",i),{result:r.result}):an(r)&&this.events.emit(Ie("session_request",i),{error:r.error})}),U(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:u}=n;try{const{requester:l,authPayload:c,expiryTimestamp:d}=s.params,h=await this.getVerifyContext({attestationId:o,hash:Hn(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:u}),g={requester:l,pairingTopic:i,id:s.id,authPayload:c,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:g,pairingTopic:i,transportType:u}),u===Me.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:h})}catch(l){this.client.logger.error(l);const c=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(s.params.requester.metadata,u),g={type:Er,receiverPublicKey:c,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:g,rpcOpts:nt.wc_sessionAuthenticate.autoReject,appLink:h})}}),U(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),U(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ln.idle,this.processSessionRequestQueue()},G.toMiliseconds(this.requestQueueDelay))}),U(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===n&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Ie("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Ie("session_request",s.request.id),{error:r})})}),U(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ln.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),U(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Ln.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),U(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Pi("wc_sessionPropose",Ct(Ne({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),U(this,"isValidConnect",async n=>{if(!Nt(n)){const{message:l}=z("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:u}=n;if(dt(r)||await this.isValidPairingTopic(r),!DF(u)){const{message:l}=z("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(l)}if(!dt(i)&&Pa(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!dt(s)&&Pa(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),dt(o)||this.validateSessionProps(o,"sessionProperties"),!dt(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(c=>l.includes(c.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),U(this,"validateNamespaces",(n,r)=>{const i=CF(n,"connect()",r);if(i)throw new Error(i.message)}),U(this,"isValidApprove",async n=>{if(!Nt(n))throw new Error(z("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const u=this.client.proposal.get(r),l=jd(i,"approve()");if(l)throw new Error(l.message);const c=By(u.requiredNamespaces,i,"approve()");if(c)throw new Error(c.message);if(!Ke(s,!0)){const{message:d}=z("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(dt(o)||this.validateSessionProps(o,"sessionProperties"),!dt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(h=>d.has(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),U(this,"isValidReject",async n=>{if(!Nt(n)){const{message:s}=z("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(s)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!MF(i)){const{message:s}=z("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),U(this,"isValidSessionSettleRequest",n=>{if(!Nt(n)){const{message:l}=z("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:i,namespaces:s,expiry:o}=n;if(!S_(r)){const{message:l}=z("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=TF(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const u=jd(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(qr(o)){const{message:l}=z("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),U(this,"isValidUpdate",async n=>{if(!Nt(n)){const{message:u}=z("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(u)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=jd(i,"update()");if(o)throw new Error(o.message);const a=By(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),U(this,"isValidExtend",async n=>{if(!Nt(n)){const{message:i}=z("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),U(this,"isValidRequest",async n=>{if(!Nt(n)){const{message:u}=z("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(u)}const{topic:r,request:i,chainId:s,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Ry(a,s)){const{message:u}=z("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!LF(i)){const{message:u}=z("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!FF(a,s,i.method)){const{message:u}=z("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!zF(o,Qd)){const{message:u}=z("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Qd.min} and ${Qd.max}`);throw new Error(u)}}),U(this,"isValidRespond",async n=>{var r;if(!Nt(n)){const{message:o}=z("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:i,response:s}=n;try{await this.isValidSessionTopic(i)}catch(o){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!$F(s)){const{message:o}=z("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),U(this,"isValidPing",async n=>{if(!Nt(n)){const{message:i}=z("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),U(this,"isValidEmit",async n=>{if(!Nt(n)){const{message:a}=z("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Ry(o,s)){const{message:a}=z("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!UF(i)){const{message:a}=z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!jF(o,s,i.name)){const{message:a}=z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),U(this,"isValidDisconnect",async n=>{if(!Nt(n)){const{message:i}=z("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),U(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:s,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Ke(i,!1))throw new Error("uri is required parameter");if(!Ke(s,!1))throw new Error("domain is required parameter");if(!Ke(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(u=>Oc(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Oc(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),U(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=n,u={verified:{verifyUrl:o.verifyUrl||Qo,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Me.link_mode){const c=this.getAppLinkIfEnabled(o,a);return u.verified.validation=c&&new URL(c).origin===new URL(o.url).origin?"VALID":"INVALID",u}const l=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(u.verified.origin=l.origin,u.verified.isScam=l.isScam,u.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u}),U(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,s)=>{if(i==null){const{message:o}=z("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[s]}`);throw new Error(o)}})}),U(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),U(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),U(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=z("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),U(this,"isLinkModeEnabled",(n,r)=>{var i,s,o,a,u,l,c,d,h;return!n||r!==Me.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:l.universal)!==""&&((c=n?.redirect)==null?void 0:c.universal)!==void 0&&((d=n?.redirect)==null?void 0:d.universal)!==""&&((h=n?.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),U(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n?.redirect)==null?void 0:i.universal:void 0}),U(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=q0(n,"topic")||"",i=decodeURIComponent(q0(n,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:Me.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),U(this,"registerLinkModeListeners",async()=>{var n;if(Up()||ci()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),U(this,"getTVFParams",(n,r,i)=>{var s,o,a;if(!((s=r.request)!=null&&s.method))return{};const u={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,i);u.txHashes=l,u.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return u}),U(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=n?.data||((r=n?.[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),U(this,"extractTxHashesFromResult",(n,r)=>{var i;try{if(!r)return[];const s=n.method,o=gH[s];if(s==="sui_signTransaction")return[h$(r.transactionBytes)];if(s==="near_signTransaction")return[Z0(r)];if(s==="near_signTransactions")return r.map(u=>Z0(u));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[s9({transaction:n.params.transactionPayload,signature:r.signature})];if(s==="algo_signTxn")return Zs(r)?r.map(u=>J0(u)):[J0(r)];if(s==="cosmos_signDirect")return[p$(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Zs(a))return s==="solana_signAllTransactions"?a.map(u=>d$(u)):a;if(typeof a=="string")return[a]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(n))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=z("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(it.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Mc)?this.client.auth.authKeys.get(Mc):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:s===Me.link_mode?Vr:Tn});ng(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:i,transportType:s,encryptedId:Hn(r)})):Dl(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:s}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(sn.expired,async e=>{const{topic:n,id:r}=CE(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,z("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,z("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(wi.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(wi.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Ke(e,!1)){const{message:n}=z("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(qr(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=z("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Ke(e,!1)){const{message:n}=z("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=z("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(qr(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=z("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=z("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Ke(e,!1)){const{message:n}=z("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=z("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!NF(e)){const{message:n}=z("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=z("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(qr(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=z("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class BH extends rs{constructor(e,n){super(e,n,hH,ig),this.core=e,this.logger=n}}class Q_ extends rs{constructor(e,n){super(e,n,fH,ig),this.core=e,this.logger=n}}class PH extends rs{constructor(e,n){super(e,n,mH,ig,r=>r.id),this.core=e,this.logger=n}}class kH extends rs{constructor(e,n){super(e,n,vH,Ml,()=>Mc),this.core=e,this.logger=n}}class OH extends rs{constructor(e,n){super(e,n,EH,Ml),this.core=e,this.logger=n}}class CH extends rs{constructor(e,n){super(e,n,_H,Ml,r=>r.id),this.core=e,this.logger=n}}var DH=Object.defineProperty,NH=(t,e,n)=>e in t?DH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zd=(t,e,n)=>NH(t,typeof e!="symbol"?e+"":e,n);class MH{constructor(e,n){this.core=e,this.logger=n,Zd(this,"authKeys"),Zd(this,"pairingTopics"),Zd(this,"requests"),this.authKeys=new kH(this.core,this.logger),this.pairingTopics=new OH(this.core,this.logger),this.requests=new CH(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var LH=Object.defineProperty,$H=(t,e,n)=>e in t?LH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,be=(t,e,n)=>$H(t,typeof e!="symbol"?e+"":e,n);class sg extends JD{constructor(e){super(e),be(this,"protocol",V_),be(this,"version",K_),be(this,"name",Wd.name),be(this,"metadata"),be(this,"core"),be(this,"logger"),be(this,"events",new On.EventEmitter),be(this,"engine"),be(this,"session"),be(this,"proposal"),be(this,"pendingRequest"),be(this,"auth"),be(this,"signConfig"),be(this,"on",(r,i)=>this.events.on(r,i)),be(this,"once",(r,i)=>this.events.once(r,i)),be(this,"off",(r,i)=>this.events.off(r,i)),be(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),be(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),be(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),be(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),be(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),be(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||Wd.name,this.metadata=rL(e?.metadata),this.signConfig=e?.signConfig;const n=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:_l(Tp({level:e?.logger||Wd.logger}));this.core=e?.core||new Wu(e),this.logger=Pt(n,this.name),this.session=new Q_(this.core,this.logger),this.proposal=new BH(this.core,this.logger),this.pendingRequest=new PH(this.core,this.logger),this.engine=new RH(this),this.auth=new MH(this.core,this.logger)}static async init(e){const n=new sg(e);return await n.initialize(),n}get context(){return Vt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const UH=Q_,FH=sg;var _f={exports:{}},Ts=typeof Reflect=="object"?Reflect:null,hb=Ts&&typeof Ts.apply=="function"?Ts.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},Lc;Ts&&typeof Ts.ownKeys=="function"?Lc=Ts.ownKeys:Object.getOwnPropertySymbols?Lc=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Lc=function(t){return Object.getOwnPropertyNames(t)};function jH(t){console&&console.warn&&console.warn(t)}var fb=Number.isNaN||function(t){return t!==t};function Re(){Re.init.call(this)}_f.exports=Re,_f.exports.once=GH,Re.EventEmitter=Re,Re.prototype._events=void 0,Re.prototype._eventsCount=0,Re.prototype._maxListeners=void 0;var pb=10;function $c(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Re,"defaultMaxListeners",{enumerable:!0,get:function(){return pb},set:function(t){if(typeof t!="number"||t<0||fb(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");pb=t}}),Re.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Re.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||fb(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Z_(t){return t._maxListeners===void 0?Re.defaultMaxListeners:t._maxListeners}Re.prototype.getMaxListeners=function(){return Z_(this)},Re.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[t];if(a===void 0)return!1;if(typeof a=="function")hb(a,this,e);else for(var u=a.length,l=J_(a,u),n=0;n<u;++n)hb(l[n],this,e);return!0};function gb(t,e,n,r){var i,s,o;if($c(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=Z_(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,jH(a)}return t}Re.prototype.addListener=function(t,e){return gb(this,t,e,!1)},Re.prototype.on=Re.prototype.addListener,Re.prototype.prependListener=function(t,e){return gb(this,t,e,!0)};function qH(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mb(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=qH.bind(r);return i.listener=n,r.wrapFn=i,i}Re.prototype.once=function(t,e){return $c(e),this.on(t,mb(this,t,e)),this},Re.prototype.prependOnceListener=function(t,e){return $c(e),this.prependListener(t,mb(this,t,e)),this},Re.prototype.removeListener=function(t,e){var n,r,i,s,o;if($c(e),r=this._events,r===void 0)return this;if(n=r[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;i===0?n.shift():HH(n,i),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,o||e)}return this},Re.prototype.off=Re.prototype.removeListener,Re.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),s;for(r=0;r<i.length;++r)s=i[r],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function yb(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?zH(i):J_(i,i.length)}Re.prototype.listeners=function(t){return yb(this,t,!0)},Re.prototype.rawListeners=function(t){return yb(this,t,!1)},Re.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):bb.call(t,e)},Re.prototype.listenerCount=bb;function bb(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Re.prototype.eventNames=function(){return this._eventsCount>0?Lc(this._events):[]};function J_(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function HH(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function zH(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function GH(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Y_(t,e,s,{once:!0}),e!=="error"&&VH(t,i,{once:!0})})}function VH(t,e,n){typeof t.on=="function"&&Y_(t,"error",e,n)}function Y_(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}const KH="WalletKit";class WH{constructor(e){this.opts=e}}class QH{constructor(e){this.client=e}}var ZH=Object.defineProperty,JH=Object.defineProperties,YH=Object.getOwnPropertyDescriptors,wb=Object.getOwnPropertySymbols,XH=Object.prototype.hasOwnProperty,ez=Object.prototype.propertyIsEnumerable,vb=(t,e,n)=>e in t?ZH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tz=(t,e)=>{for(var n in e||(e={}))XH.call(e,n)&&vb(t,n,e[n]);if(wb)for(var n of wb(e))ez.call(e,n)&&vb(t,n,e[n]);return t},nz=(t,e)=>JH(t,YH(e));class rz extends QH{constructor(e){super(e),this.init=async()=>{this.signClient=await FH.init({core:this.client.core,metadata:this.client.metadata,signConfig:this.client.signConfig}),this.signClient.core.eventClient.init().catch(n=>{this.client.logger.warn(n)})},this.pair=async n=>{await this.client.core.pairing.pair(n)},this.approveSession=async n=>{const{topic:r,acknowledged:i}=await this.signClient.approve(nz(tz({},n),{id:n.id,namespaces:n.namespaces,sessionProperties:n.sessionProperties,sessionConfig:n.sessionConfig}));return await i(),this.signClient.session.get(r)},this.rejectSession=async n=>await this.signClient.reject(n),this.updateSession=async n=>await this.signClient.update(n),this.extendSession=async n=>await this.signClient.extend(n),this.respondSessionRequest=async n=>await this.signClient.respond(n),this.disconnectSession=async n=>await this.signClient.disconnect(n),this.emitSessionEvent=async n=>await this.signClient.emit(n),this.getActiveSessions=()=>this.signClient.session.getAll().reduce((n,r)=>(n[r.topic]=r,n),{}),this.getPendingSessionProposals=()=>this.signClient.proposal.getAll(),this.getPendingSessionRequests=()=>this.signClient.getPendingSessionRequests(),this.approveSessionAuthenticate=async n=>await this.signClient.approveSessionAuthenticate(n),this.rejectSessionAuthenticate=async n=>await this.signClient.rejectSessionAuthenticate(n),this.formatAuthMessage=n=>this.signClient.formatAuthMessage(n),this.registerDeviceToken=n=>this.client.core.echoClient.registerDeviceToken(n),this.on=(n,r)=>(this.setEvent(n,"off"),this.setEvent(n,"on"),this.client.events.on(n,r)),this.once=(n,r)=>(this.setEvent(n,"off"),this.setEvent(n,"once"),this.client.events.once(n,r)),this.off=(n,r)=>(this.setEvent(n,"off"),this.client.events.off(n,r)),this.removeListener=(n,r)=>(this.setEvent(n,"removeListener"),this.client.events.removeListener(n,r)),this.onSessionRequest=n=>{this.client.events.emit("session_request",n)},this.onSessionProposal=n=>{this.client.events.emit("session_proposal",n)},this.onSessionDelete=n=>{this.client.events.emit("session_delete",n)},this.onProposalExpire=n=>{this.client.events.emit("proposal_expire",n)},this.onSessionRequestExpire=n=>{this.client.events.emit("session_request_expire",n)},this.onSessionRequestAuthenticate=n=>{this.client.events.emit("session_authenticate",n)},this.setEvent=(n,r)=>{switch(n){case"session_request":this.signClient.events[r]("session_request",this.onSessionRequest);break;case"session_proposal":this.signClient.events[r]("session_proposal",this.onSessionProposal);break;case"session_delete":this.signClient.events[r]("session_delete",this.onSessionDelete);break;case"proposal_expire":this.signClient.events[r]("proposal_expire",this.onProposalExpire);break;case"session_request_expire":this.signClient.events[r]("session_request_expire",this.onSessionRequestExpire);break;case"session_authenticate":this.signClient.events[r]("session_authenticate",this.onSessionRequestAuthenticate);break}},this.signClient={}}}const iz={decryptMessage:async t=>{const e={core:new Wu({storageOptions:t.storageOptions,storage:t.storage})};await e.core.crypto.init();const n=e.core.crypto.decode(t.topic,t.encryptedMessage);return e.core=null,n},getMetadata:async t=>{const e={core:new Wu({storageOptions:t.storageOptions,storage:t.storage}),sessionStore:null};e.sessionStore=new UH(e.core,e.core.logger),await e.sessionStore.init();const n=e.sessionStore.get(t.topic),r=n?.peer.metadata;return e.core=null,e.sessionStore=null,r}},X_=class extends WH{constructor(t){super(t),this.events=new _f.exports,this.on=(e,n)=>this.engine.on(e,n),this.once=(e,n)=>this.engine.once(e,n),this.off=(e,n)=>this.engine.off(e,n),this.removeListener=(e,n)=>this.engine.removeListener(e,n),this.pair=async e=>{try{return await this.engine.pair(e)}catch(n){throw this.logger.error(n.message),n}},this.approveSession=async e=>{try{return await this.engine.approveSession(e)}catch(n){throw this.logger.error(n.message),n}},this.rejectSession=async e=>{try{return await this.engine.rejectSession(e)}catch(n){throw this.logger.error(n.message),n}},this.updateSession=async e=>{try{return await this.engine.updateSession(e)}catch(n){throw this.logger.error(n.message),n}},this.extendSession=async e=>{try{return await this.engine.extendSession(e)}catch(n){throw this.logger.error(n.message),n}},this.respondSessionRequest=async e=>{try{return await this.engine.respondSessionRequest(e)}catch(n){throw this.logger.error(n.message),n}},this.disconnectSession=async e=>{try{return await this.engine.disconnectSession(e)}catch(n){throw this.logger.error(n.message),n}},this.emitSessionEvent=async e=>{try{return await this.engine.emitSessionEvent(e)}catch(n){throw this.logger.error(n.message),n}},this.getActiveSessions=()=>{try{return this.engine.getActiveSessions()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionProposals=()=>{try{return this.engine.getPendingSessionProposals()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.registerDeviceToken=e=>{try{return this.engine.registerDeviceToken(e)}catch(n){throw this.logger.error(n.message),n}},this.approveSessionAuthenticate=e=>{try{return this.engine.approveSessionAuthenticate(e)}catch(n){throw this.logger.error(n.message),n}},this.rejectSessionAuthenticate=e=>{try{return this.engine.rejectSessionAuthenticate(e)}catch(n){throw this.logger.error(n.message),n}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(n){throw this.logger.error(n.message),n}},this.metadata=t.metadata,this.name=t.name||KH,this.signConfig=t.signConfig,this.core=t.core,this.logger=this.core.logger,this.engine=new rz(this)}static async init(t){const e=new X_(t);return await e.initialize(),e}async initialize(){this.logger.trace("Initialized");try{await this.engine.init(),this.logger.info("WalletKit Initialization Success")}catch(t){throw this.logger.info("WalletKit Initialization Failure"),this.logger.error(t.message),t}}};let eA=X_;eA.notifications=iz;const sz=eA,oz=new Wu({projectId:"bf40c7dcdb05f06f2769573103007576"}),az={name:"TiffyAI Miner",description:"Mine TiffyAI and Claim your rewards",url:"https://tiffyai.github.io/Mining-Machine-/",icons:["https://tiffyai.github.io/TiffyAI-Token.png"]},cz=await sz.init({core:oz,metadata:az}),uz="0xE488253DD6B4D31431142F1b7601C96f24Fb7dd5",lz=[{type:"function",name:"claim",stateMutability:"payable",inputs:[],outputs:[]}],og="tiffy_balance",tA="tiffy_speed",ag="tiffy_last_claim",nA=1,rA=24*60*60*1e3;let Rs=parseFloat(localStorage.getItem(og))||0,Af=parseFloat(localStorage.getItem(tA))||1e-7,Uc,Qu,xf;const dz=document.getElementById("tiffyCounter"),hz=document.getElementById("blueKeys"),fz=document.getElementById("goldKeys"),Eb=document.getElementById("connectBtn"),iA=document.getElementById("withdrawBtn"),pz=document.getElementById("boostBtn"),wc=document.getElementById("backgroundVideo");function sA(){const t=parseInt(localStorage.getItem("tiffyBlueKeys"))||0,e=parseInt(localStorage.getItem("gold"))||0;hz.textContent=` Blue Keys: ${t}`,fz.textContent=` Gold Keys: ${e}`}function cg(){dz.textContent=` ${Rs.toFixed(7)} TIFFY`;const t=localStorage.getItem(ag),e=Rs>=nA&&(!t||Date.now()-parseInt(t)>rA);iA.disabled=!e}function Ll(t,e=!0,n=null){wc.loop=e,wc.src=t,wc.load(),wc.play(),!e&&n&&setTimeout(()=>Ll("mine.mp4",!0),n)}setInterval(()=>{const t=localStorage.getItem(ag),e=!t||Date.now()-parseInt(t)>rA;Rs<nA&&e&&(Rs+=Af,localStorage.setItem(og,Rs),cg())},1e3);pz.addEventListener("click",()=>{let t=parseInt(localStorage.getItem("tiffyBlueKeys"))||0;if(t<1)return alert(" Not enough Blue Keys.");t--,Af*=2,alert(" Mining Power Boosted!"),localStorage.setItem("tiffyBlueKeys",t),localStorage.setItem(tA,Af),Ll("upgrade.mp4",!1,3e3),sA()});Eb.addEventListener("click",async()=>{try{const t=await cz.connect();Uc=new ro(t),Qu=(await Uc.eth.getAccounts())[0],xf=new Uc.eth.Contract(lz,uz),Eb.innerText=` ${Qu.slice(0,6)}...Connected`}catch(t){alert(" Wallet connection failed."),console.error(t)}});iA.addEventListener("click",async()=>{if(!xf||!Qu)return alert(" Connect your wallet first.");try{await xf.methods.claim().send({from:Qu,value:Uc.utils.toWei("0.00086","ether")}),alert(" 1 TIFFY Successfully Claimed!"),Ll("withdraw.mp4",!1,3e3),Rs=0,localStorage.setItem(og,0),localStorage.setItem(ag,Date.now()),cg()}catch(t){alert(" Claim failed. Make sure cooldown passed and you have enough BNB for gas."),console.error(t)}});sA();cg();Ll("mine.mp4",!0);export{k4 as H,x0 as a,Ia as b,Qz as c,I4 as d,cE as e,O4 as f,Wz as g,Lu as h,Yz as i,Jz as j,Zz as r,uE as t};
